{"version":3,"file":null,"sources":["../src/cli/env.js","../node_modules/@jscad/scad-api/src/primitives2d.js","../node_modules/@jscad/scad-api/src/ops-extrusions.js","../node_modules/@jscad/scad-api/src/primitives3d.js","../node_modules/@jscad/scad-api/src/ops-booleans.js","../node_modules/@jscad/scad-api/src/ops-transformations.js","../node_modules/@jscad/scad-api/src/color.js","../node_modules/@jscad/scad-api/src/maths.js","../node_modules/@jscad/scad-api/src/text.js","../node_modules/@jscad/scad-api/src/debug.js","../node_modules/@jscad/scad-api/src/log.js","../node_modules/@jscad/csg/csg.js","../src/utils/misc.js","../src/io/convertToBlob.js","../src/core/jscad-function.js","../src/core/replaceIncludes.js","../src/core/resolveIncludes.js","../src/core/rebuildSolid.js","../src/utils/resolveIncludesFs.js","../src/cli/getParameterDefinitionsCLI.js","../src/cli/generateOutputData.js","../src/cli.js","../src/jscad/version.js","../node_modules/@jscad/scad-api/src/index.js","../node_modules/sax/lib/sax.js","../node_modules/@jscad/io/dist/index.js","../src/io/formats.js"],"sourcesContent":["import { version } from '../jscad/version'\n\nexport default function env () {\n  var env = 'OpenJSCAD ' + version\n  if (typeof document !== 'undefined') {\n    var w = document.defaultView\n    env = env + ' [' + w.navigator.userAgent + ']'\n  } else {\n    if (typeof require === 'function') {\n      var os = require('os')\n      env = env + ' [' + os.type() + ':' + os.release() + ',' + os.platform() + ':' + os.arch() + ']'\n    }\n  }\n  console.log(env)\n}\n","import { CAG } from '@jscad/csg'\n\n// -- 2D primitives (OpenSCAD like notion)\n\nexport function square () {\n  let v = [1, 1]\n  let off\n  let a = arguments\n  let p = a[0]\n\n  if (p && Number.isFinite(p)) v = [p, p]\n  if (p && p.length) v = a[0], p = a[1]\n  if (p && p.size && p.size.length) v = p.size\n\n  off = [v[0] / 2, v[1] / 2]\n  if (p && p.center === true) off = [0, 0]\n\n  var o = CAG.rectangle({center: off, radius: [v[0] / 2, v[1] / 2]})\n\n  return o\n}\n\nexport function circle () {\n  let r = 1\n  let off\n  let fn = 32\n  let a = arguments\n  let p = a[0]\n  if (p && p.r) r = p.r\n  if (p && p.fn) fn = p.fn\n  if (p && !p.r && !p.fn && !p.center) r = p\n  off = [r, r]\n  if (p && p.center === true) { off = [0, 0] }\n  var o = CAG.circle({center: off, radius: r, resolution: fn})\n  return o\n}\n\nexport function polygon (p) { // array of po(ints) and pa(ths)\n  var points = [ ]\n  if (p.paths && p.paths.length && p.paths[0].length) { // pa(th): [[0,1,2],[2,3,1]] (two paths)\n    for (var j = 0; j < p.paths.length; j++) {\n      for (var i = 0; i < p.paths[j].length; i++) {\n        points[i] = p.points[p.paths[j][i]]\n      }\n    }\n  } else if (p.paths && p.paths.length) { // pa(th): [0,1,2,3,4] (single path)\n    for (var i = 0; i < p.paths.length; i++) {\n      points[i] = p.points[p.paths[i]]\n    }\n  } else { // pa(th) = po(ints)\n    if (p.length) {\n      points = p\n    } else {\n      points = p.points\n    }\n  }\n  return CAG.fromPoints(points)\n}\n\nexport function triangle () { // -- new addition\n  var a = arguments\n  if (a[0] && a[0].length) a = a[0]\n  var o = CAG.fromPoints(a)\n  return o\n}\n","import { CSG } from '@jscad/csg'\n// -- 2D to 3D primitives (OpenSCAD like notion)\n\nexport function linear_extrude (p, s) {\n  // console.log(\"linear_extrude() not yet implemented\")\n  // return\n  let h = 1\n  let off = 0\n  let twist = 0\n  let slices = 10\n  /* convexity = 10,*/\n\n  if (p.height) h = p.height\n  // if(p.convexity) convexity = p.convexity      // abandoned\n  if (p.twist) twist = p.twist\n  if (p.slices) slices = p.slices\n  var o = s.extrude({offset: [0, 0, h], twistangle: twist, twiststeps: slices})\n  if (p.center === true) {\n    var b = [ ]\n    b = o.getBounds() // b[0] = min, b[1] = max\n    off = b[1].plus(b[0])\n    off = off.times(-0.5)\n    o = o.translate(off)\n  }\n  return o\n}\n\nexport function rotate_extrude (p, o) {\n  var fn = 32\n  if (arguments.length < 2) {\n    o = p // no switches, just an object\n  } else if (p !== undefined) {\n    fn = p.fn\n  }\n  if (fn < 3) fn = 3\n  var ps = []\n  for (var i = 0; i < fn; i++) {\n    // o.{x,y} -> rotate([0,0,i:0..360], obj->{o.x,0,o.y})\n    for (var j = 0; j < o.sides.length; j++) {\n      // has o.sides[j].vertex{0,1}.pos (only x,y)\n      var p = []\n      var m\n\n      m = new CSG.Matrix4x4.rotationZ(i / fn * 360)\n      p[0] = new CSG.Vector3D(o.sides[j].vertex0.pos.x, 0, o.sides[j].vertex0.pos.y)\n      p[0] = m.rightMultiply1x3Vector(p[0])\n\n      p[1] = new CSG.Vector3D(o.sides[j].vertex1.pos.x, 0, o.sides[j].vertex1.pos.y)\n      p[1] = m.rightMultiply1x3Vector(p[1])\n\n      m = new CSG.Matrix4x4.rotationZ((i + 1) / fn * 360)\n      p[2] = new CSG.Vector3D(o.sides[j].vertex1.pos.x, 0, o.sides[j].vertex1.pos.y)\n      p[2] = m.rightMultiply1x3Vector(p[2])\n\n      p[3] = new CSG.Vector3D(o.sides[j].vertex0.pos.x, 0, o.sides[j].vertex0.pos.y)\n      p[3] = m.rightMultiply1x3Vector(p[3])\n\n      var p1 = new CSG.Polygon([\n        new CSG.Vertex(p[0]),\n        new CSG.Vertex(p[1]),\n        new CSG.Vertex(p[2]),\n        new CSG.Vertex(p[3]), // we make a square polygon (instead of 2 triangles)\n      ])\n      // var p2 = new CSG.Polygon([\n      //   new CSG.Vertex(p[0]),\n      //   new CSG.Vertex(p[2]),\n      //   new CSG.Vertex(p[3]),\n      // ])\n      ps.push(p1)\n    // ps.push(p2)\n    // echo(\"i=\"+i,i/fn*360,\"j=\"+j)\n    }\n  }\n  return CSG.fromPolygons(ps)\n}\n\nexport function rectangular_extrude (pa, p) {\n  let w = 1\n  let h = 1\n  let fn = 8\n  let closed = false\n  let round = true\n  if (p) {\n    if (p.w) w = p.w\n    if (p.h) h = p.h\n    if (p.fn) fn = p.fn\n    if (p.closed !== undefined) closed = p.closed\n    if (p.round !== undefined) round = p.round\n  }\n  return new CSG.Path2D(pa, closed).rectangularExtrude(w, h, fn, round)\n}\n","// -- 3D primitives (OpenSCAD like notion)\nimport { CSG } from '@jscad/csg'\nimport { circle } from './primitives2d'\nimport { rotate_extrude } from './ops-extrusions'\n\nexport function cube (p) {\n  var s = 1, v = null, off = [0, 0, 0], round = false, r = 0, fn = 8\n  if (p && p.length) v = p\n  if (p && p.size && p.size.length) v = p.size // { size: [1,2,3] }\n  if (p && p.size && !p.size.length) s = p.size // { size: 1 }\n  // if(p&&!p.size&&!p.length&&p.center===undefined&&!p.round&&!p.radius) s = p      // (2)\n  if (p && (typeof p != 'object')) s = p// (2)\n  if (p && p.round == true) { round = true, r = v && v.length ? (v[0] + v[1] + v[2]) / 30 : s / 10}\n  if (p && p.radius) { round = true, r = p.radius }\n  if (p && p.fn) fn = p.fn // applies in case of round: true\n\n  var x = s, y = s, z = s\n  if (v && v.length) {\n    x = v[0], y = v[1], z = v[2]\n  }\n  off = [x / 2, y / 2, z / 2] // center: false default\n  var o = round ?\n    CSG.roundedCube({radius: [x / 2, y / 2, z / 2], roundradius: r, resolution: fn}) :\n    CSG.cube({radius: [x / 2, y / 2, z / 2]})\n  if (p && p.center && p.center.length) {\n    off = [p.center[0] ? 0 : x / 2, p.center[1] ? 0 : y / 2, p.center[2] ? 0 : z / 2]\n  } else if (p && p.center == true) {\n    off = [0, 0, 0]\n  } else if (p && p.center == false) {\n    off = [x / 2, y / 2, z / 2]\n  }\n  if (off[0] || off[1] || off[2]) o = o.translate(off)\n  // if(v&&v.length) o = o.scale(v)      // we don't scale afterwards, we already created box with the correct size\n  return o\n}\n\nexport function sphere (p) {\n  var r = 1\n  var fn = 32\n  var off = [0, 0, 0]\n  var type = 'normal'\n\n  // var zoff = 0 // sphere() in openscad has no center:true|false\n  if (p && p.r) r = p.r\n  if (p && p.fn) fn = p.fn\n  if (p && p.type) type = p.type\n  // if(p&&!p.r&&!p.fn&&!p.type) r = p\n  if (p && (typeof p != 'object')) r = p\n  off = [0, 0, 0] // center: false (default)\n\n  var o\n  if (type == 'geodesic')\n    o = geodesicSphere(p)\n  else\n    o = CSG.sphere({radius: r,resolution: fn})\n\n  if (p && p.center && p.center.length) { // preparing individual x,y,z center\n    off = [p.center[0] ? 0 : r, p.center[1] ? 0 : r, p.center[2] ? 0 : r]\n  } else if (p && p.center == true) {\n    off = [0, 0, 0]\n  } else if (p && p.center == false) {\n    off = [r, r, r]\n  }\n  if (off[0] || off[1] || off[2]) o = o.translate(off)\n  return o\n}\n\nexport function geodesicSphere (p) {\n  var r = 1, fn = 5\n\n  var ci = [ // hard-coded data of icosahedron (20 faces, all triangles)\n    [0.850651, 0.000000, -0.525731],\n    [0.850651, -0.000000, 0.525731],\n    [-0.850651, -0.000000, 0.525731],\n    [-0.850651, 0.000000, -0.525731],\n    [0.000000, -0.525731, 0.850651],\n    [0.000000, 0.525731, 0.850651],\n    [0.000000, 0.525731, -0.850651],\n    [0.000000, -0.525731, -0.850651],\n    [-0.525731, -0.850651, -0.000000],\n    [0.525731, -0.850651, -0.000000],\n    [0.525731, 0.850651, 0.000000],\n    [-0.525731, 0.850651, 0.000000]]\n\n  var ti = [ [0, 9, 1], [1, 10, 0], [6, 7, 0], [10, 6, 0], [7, 9, 0], [5, 1, 4], [4, 1, 9], [5, 10, 1], [2, 8, 3], [3, 11, 2], [2, 5, 4],\n    [4, 8, 2], [2, 11, 5], [3, 7, 6], [6, 11, 3], [8, 7, 3], [9, 8, 4], [11, 10, 5], [10, 11, 6], [8, 9, 7]]\n\n  var geodesicSubDivide = function (p, fn, off) {\n    var p1 = p[0], p2 = p[1], p3 = p[2]\n    var n = off\n    var c = []\n    var f = []\n\n    //           p3\n    //           /\\\n    //          /__\\     fn = 3\n    //      i  /\\  /\\\n    //        /__\\/__\\       total triangles = 9 (fn*fn)\n    //       /\\  /\\  /\\\n    //     0/__\\/__\\/__\\\n    //    p1 0   j      p2\n\n    for (var i = 0; i < fn; i++) {\n      for (var j = 0; j < fn - i; j++) {\n        var t0 = i / fn\n        var t1 = (i + 1) / fn\n        var s0 = j / (fn - i)\n        var s1 = (j + 1) / (fn - i)\n        var s2 = fn - i - 1 ? j / (fn - i - 1) : 1\n        var q = []\n\n        q[0] = mix3(mix3(p1, p2, s0), p3, t0)\n        q[1] = mix3(mix3(p1, p2, s1), p3, t0)\n        q[2] = mix3(mix3(p1, p2, s2), p3, t1)\n\n        // -- normalize\n        for (var k = 0; k < 3; k++) {\n          var r = Math.sqrt(q[k][0] * q[k][0] + q[k][1] * q[k][1] + q[k][2] * q[k][2])\n          for (var l = 0; l < 3; l++) {\n            q[k][l] /= r\n          }\n        }\n        c.push(q[0], q[1], q[2])\n        f.push([n, n + 1, n + 2]); n += 3\n\n        if (j < fn - i - 1) {\n          var s3 = fn - i - 1 ? (j + 1) / (fn - i - 1) : 1\n          q[0] = mix3(mix3(p1, p2, s1), p3, t0)\n          q[1] = mix3(mix3(p1, p2, s3), p3, t1)\n          q[2] = mix3(mix3(p1, p2, s2), p3, t1)\n\n          // -- normalize\n          for (var k = 0; k < 3; k++) {\n            var r = Math.sqrt(q[k][0] * q[k][0] + q[k][1] * q[k][1] + q[k][2] * q[k][2])\n            for (var l = 0; l < 3; l++) {\n              q[k][l] /= r\n            }\n          }\n          c.push(q[0], q[1], q[2])\n          f.push([n, n + 1, n + 2]); n += 3\n        }\n      }\n    }\n    return { points: c, triangles: f, off: n }\n  }\n\n  var mix3 = function (a, b, f) {\n    var _f = 1 - f\n    var c = []\n    for (var i = 0; i < 3; i++) {\n      c[i] = a[i] * _f + b[i] * f\n    }\n    return c\n  }\n\n  if (p) {\n    if (p.fn) fn = Math.floor(p.fn / 6)\n    if (p.r) r = p.r\n  }\n\n  if (fn <= 0) fn = 1\n\n  var q = []\n  var c = [], f = []\n  var off = 0\n\n  for (var i = 0; i < ti.length; i++) {\n    var g = geodesicSubDivide([ ci[ti[i][0]], ci[ti[i][1]], ci[ti[i][2]]], fn, off)\n    c = c.concat(g.points)\n    f = f.concat(g.triangles)\n    off = g.off\n  }\n  return polyhedron({points: c, triangles: f}).scale(r)\n}\n\nexport function cylinder (p) {\n  var r1 = 1, r2 = 1, h = 1, fn = 32, round = false\n  var a = arguments\n  var off = [0, 0, 0]\n  if (p && p.d) {\n    r1 = r2 = p.d / 2\n  }\n  if (p && p.r) {\n    r1 = p.r\n    r2 = p.r\n  }\n  if (p && p.h) {\n    h = p.h\n  }\n  if (p && (p.r1 || p.r2)) {\n    r1 = p.r1\n    r2 = p.r2\n    if (p.h) h = p.h\n  }\n  if (p && (p.d1 || p.d2)) {\n    r1 = p.d1 / 2\n    r2 = p.d2 / 2\n  }\n\n  if (a && a[0] && a[0].length) {\n    a = a[0]\n    r1 = a[0]\n    r2 = a[1]\n    h = a[2]\n    if (a.length === 4) fn = a[3]\n  }\n  if (p && p.fn) fn = p.fn\n  // if(p&&p.center==true) zoff = -h/2\n  if (p && p.round === true) round = true\n  var o\n  if (p && (p.start && p.end)) {\n    o = round ?\n      CSG.roundedCylinder({start: p.start, end: p.end, radiusStart: r1, radiusEnd: r2, resolution: fn}) :\n      CSG.cylinder({start: p.start, end: p.end, radiusStart: r1, radiusEnd: r2, resolution: fn})\n  } else {\n    o = round ?\n      CSG.roundedCylinder({start: [0, 0, 0], end: [0, 0, h], radiusStart: r1, radiusEnd: r2, resolution: fn}) :\n      CSG.cylinder({start: [0, 0, 0], end: [0, 0, h], radiusStart: r1, radiusEnd: r2, resolution: fn})\n    var r = r1 > r2 ? r1 : r2\n    if (p && p.center && p.center.length) { // preparing individual x,y,z center\n      off = [p.center[0] ? 0 : r, p.center[1] ? 0 : r, p.center[2] ? -h / 2 : 0]\n    } else if (p && p.center === true) {\n      off = [0, 0, -h / 2]\n    } else if (p && p.center === false) {\n      off = [0, 0, 0]\n    }\n    if (off[0] || off[1] || off[2]) o = o.translate(off)\n  }\n  return o\n}\n\nexport function torus (p) {\n  var ri = 1, ro = 4, fni = 16, fno = 32, roti = 0\n  if (p) {\n    if (p.ri) ri = p.ri\n    if (p.fni) fni = p.fni\n    if (p.roti) roti = p.roti\n    if (p.ro) ro = p.ro\n    if (p.fno) fno = p.fno\n  }\n  if (fni < 3) fni = 3\n  if (fno < 3) fno = 3\n  var c = circle({r: ri, fn: fni, center: true})\n  if (roti) c = c.rotateZ(roti)\n  return rotate_extrude({fn: fno}, c.translate([ro, 0, 0]))\n}\n\nexport function polyhedron (p) {\n  var pgs = []\n  var ref = p.triangles || p.polygons\n  var colors = p.colors || null\n\n  for (var i = 0; i < ref.length; i++) {\n    var pp = []\n    for (var j = 0; j < ref[i].length; j++) {\n      pp[j] = p.points[ref[i][j]]\n    }\n\n    var v = []\n    for (j = ref[i].length - 1; j >= 0; j--) { // --- we reverse order for examples of OpenSCAD work\n      v.push(new CSG.Vertex(new CSG.Vector3D(pp[j][0], pp[j][1], pp[j][2])))\n    }\n    var s = CSG.Polygon.defaultShared\n    if (colors && colors[i]) {\n      s = CSG.Polygon.Shared.fromColor(colors[i])\n    }\n    pgs.push(new CSG.Polygon(v, s))\n  }\n  var r = CSG.fromPolygons(pgs)\n  return r\n}\n","import { CAG } from '@jscad/csg'\n\n// -- 3D operations (OpenSCAD like notion)\nexport function union () {\n  var o,i = 0,a = arguments\n  if (a[0].length) a = a[0]\n\n  o = a[i++]\n  if (0) { // we leave to code for now, perhaps later we allow mixed CAG/CSG union\n    if ((typeof (a[i]) == 'object') && (a[i] instanceof CAG)) {\n      o = a[i].extrude({offset: [0, 0, 0.1]}) // -- convert a 2D shape to a thin solid, note: do not a[i] = a[i].extrude()\n    } else {\n      o = a[i++]\n    }\n  }\n  for (; i < a.length; i++) {\n    var obj = a[i]\n\n    // for now disabled, later perhaps allow mixed union of CAG/CSG\n    if (0 && (typeof (a[i]) == 'object') && (a[i] instanceof CAG)) {\n      obj = a[i].extrude({offset: [0, 0, 0.1]}) // -- convert a 2D shape to a thin solid:\n    }\n    o = o.union(obj)\n  }\n  return o\n}\n\nexport function difference () {\n  var o,i = 0,a = arguments\n  if (a[0].length) a = a[0]\n  for (o = a[i++]; i < a.length; i++) {\n    if (a[i] instanceof CAG) {\n      o = o.subtract(a[i])\n    } else {\n      o = o.subtract(a[i].setColor(1, 1, 0)) // -- color the cuts\n    }\n  }\n  return o\n}\n\nexport function intersection () {\n  var o,i = 0,a = arguments\n  if (a[0].length) a = a[0]\n  for (o = a[i++]; i < a.length; i++) {\n    if (a[i] instanceof CAG) {\n      o = o.intersect(a[i])\n    } else {\n      o = o.intersect(a[i].setColor(1, 1, 0)) // -- color the cuts\n    }\n  }\n  return o\n}\n","import { CSG, CAG } from '@jscad/csg'\nimport { union } from './ops-booleans'\n// -- 3D transformations (OpenSCAD like notion)\n\n\nexport function translate() {      // v, obj or array\n   var a = arguments, v = a[0], o, i = 1;\n   if(a[1].length) { a = a[1]; i = 0; }\n   for(o=a[i++]; i<a.length; i++) {\n      o = o.union(a[i]);\n   }\n   return o.translate(v);\n}\n\nexport function center() { // v, obj or array\n   var a = arguments, v = a[0], o, i = 1;\n   if(a[1].length) { a = a[1]; i = 0; }\n   for(o=a[i++]; i<a.length; i++) {\n      o = o.union(a[i]);\n   }\n   return o.center(v);\n}\n\nexport function scale() {         // v, obj or array\n   var a = arguments, v = a[0], o, i = 1;\n   if(a[1].length) { a = a[1]; i = 0; }\n   for(o=a[i++]; i<a.length; i++) {\n      o = o.union(a[i]);\n   }\n   return o.scale(v);\n}\n\nexport function rotate() {\n   var o,i,v, r = 1, a = arguments;\n   if(!a[0].length) {        // rotate(r,[x,y,z],o)\n      r = a[0];\n      v = a[1];\n      i = 2;\n      if(a[2].length) { a = a[2]; i = 0; }\n   } else {                   // rotate([x,y,z],o)\n      v = a[0];\n      i = 1;\n      if(a[1].length) { a = a[1]; i = 0; }\n   }\n   for(o=a[i++]; i<a.length; i++) {\n      o = o.union(a[i]);\n   }\n   if(r!=1) {\n      return o.rotateX(v[0]*r).rotateY(v[1]*r).rotateZ(v[2]*r);\n   } else {\n      return o.rotateX(v[0]).rotateY(v[1]).rotateZ(v[2]);\n   }\n}\n\nexport function mirror(v,o) {\n   var a = Array.prototype.slice.call(arguments, 1, arguments.length),\n       o = a[0];\n\n   for(var i=1; i<a.length; i++) {\n      o = o.union(a[i]);\n   }\n   var plane = new CSG.Plane(new CSG.Vector3D(v[0], v[1], v[2]).unit(), 0);\n   return o.mirrored(plane);\n}\n\nexport function expand(r,n,o) {\n   return o.expand(r,n);\n}\n\nexport function contract(r,n,o) {\n   return o.contract(r,n);\n}\n\nexport function multmatrix(mat, obj) {\n   console.log(\"multmatrix() not yet implemented\");\n}\n\nexport function minkowski() {\n   console.log(\"minkowski() not yet implemented\");\n}\n\nexport function hull() {\n   var pts = [];\n\n   var a = arguments;\n   if(a[0].length) a = a[0];\n   var done = [];\n\n   for(var i=0; i<a.length; i++) {              // extract all points of the CAG in the argument list\n      var cag = a[i];\n      if(!(cag instanceof CAG)) {\n         throw(\"ERROR: hull() accepts only 2D forms / CAG\");\n         return;\n      }\n      for(var j=0; j<cag.sides.length; j++) {\n         var x = cag.sides[j].vertex0.pos.x;\n         var y = cag.sides[j].vertex0.pos.y;\n         if(done[''+x+','+y])  // avoid some coord to appear multiple times\n            continue;\n         pts.push({ x:x, y:y });\n         done[''+x+','+y]++;\n         //echo(x,y);\n      }\n   }\n   //echo(pts.length+\" points in\",pts);\n\n   // from http://www.psychedelicdevelopment.com/grahamscan/\n   //    see also at https://github.com/bkiers/GrahamScan/blob/master/src/main/cg/GrahamScan.java\n   var ConvexHullPoint = function(i, a, d) {\n\n      this.index = i;\n      this.angle = a;\n      this.distance = d;\n\n      this.compare = function(p) {\n         if (this.angle<p.angle)\n            return -1;\n         else if (this.angle>p.angle)\n            return 1;\n         else {\n            if (this.distance<p.distance)\n               return -1;\n            else if (this.distance>p.distance)\n               return 1;\n         }\n         return 0;\n      }\n   }\n\n   var ConvexHull = function() {\n      this.points = null;\n      this.indices = null;\n\n      this.getIndices = function() {\n         return this.indices;\n      }\n\n      this.clear = function() {\n         this.indices = null;\n         this.points = null;\n      }\n\n      this.ccw = function(p1, p2, p3) {\n         var ccw = (this.points[p2].x - this.points[p1].x)*(this.points[p3].y - this.points[p1].y) -\n                   (this.points[p2].y - this.points[p1].y)*(this.points[p3].x - this.points[p1].x);\n         if(ccw<1e-5)      // we need this, otherwise sorting never ends, see https://github.com/Spiritdude/OpenJSCAD.org/issues/18\n            return 0\n         return ccw;\n      }\n\n      this.angle = function(o, a) {\n         //return Math.atan((this.points[a].y-this.points[o].y) / (this.points[a].x - this.points[o].x));\n         return Math.atan2((this.points[a].y-this.points[o].y), (this.points[a].x - this.points[o].x));\n      }\n\n      this.distance = function(a, b) {\n         return ((this.points[b].x-this.points[a].x)*(this.points[b].x-this.points[a].x)+\n                 (this.points[b].y-this.points[a].y)*(this.points[b].y-this.points[a].y));\n      }\n\n      this.compute = function(_points) {\n         this.indices=null;\n         if (_points.length<3)\n            return;\n         this.points=_points;\n\n         // Find the lowest point\n         var min = 0;\n         for(var i = 1; i < this.points.length; i++) {\n            if(this.points[i].y==this.points[min].y) {\n               if(this.points[i].x<this.points[min].x)\n                  min = i;\n            }\n            else if(this.points[i].y<this.points[min].y)\n               min = i;\n         }\n\n         // Calculate angle and distance from base\n         var al = new Array();\n         var ang = 0.0;\n         var dist = 0.0;\n         for (i = 0; i<this.points.length; i++) {\n            if (i==min)\n               continue;\n            ang = this.angle(min, i);\n            if (ang<0)\n               ang += Math.PI;\n            dist = this.distance(min, i);\n            al.push(new ConvexHullPoint(i, ang, dist));\n         }\n\n         al.sort(function (a, b) { return a.compare(b); });\n\n         // Create stack\n         var stack = new Array(this.points.length+1);\n         var j = 2;\n         for(i = 0; i<this.points.length; i++) {\n            if(i==min)\n               continue;\n            stack[j] = al[j-2].index;\n            j++;\n         }\n         stack[0] = stack[this.points.length];\n         stack[1] = min;\n\n         var tmp;\n         var M = 2;\n         for(i = 3; i<=this.points.length; i++) {\n            while(this.ccw(stack[M-1], stack[M], stack[i]) <= 0)\n               M--;\n            M++;\n            tmp = stack[i];\n            stack[i] = stack[M];\n            stack[M] = tmp;\n         }\n\n         this.indices = new Array(M);\n         for (i = 0; i<M; i++) {\n            this.indices[i] = stack[i+1];\n         }\n      }\n   }\n\n   var hull = new ConvexHull();\n\n   hull.compute(pts);\n   var indices = hull.getIndices();\n\n   if(indices&&indices.length>0) {\n      var ch = [];\n      for(var i=0; i<indices.length; i++) {\n         ch.push(pts[indices[i]]);\n         //echo(pts[indices[i]]);\n      }\n      //echo(ch.length+\" points out\",ch);\n      return CAG.fromPoints(ch);\n      //return CAG.fromPointsNoCheck(ch);\n   }\n}\n\n// \"Whosa whatsis\" suggested \"Chain Hull\" as described at https://plus.google.com/u/0/105535247347788377245/posts/aZGXKFX1ACN\n// essentially hull A+B, B+C, C+D and then union those\n\nexport function chain_hull() {\n   var a = arguments;\n   var j = 0, closed = false;\n\n   if(a[j].closed!==undefined)\n      closed = a[j++].closed;\n\n   if(a[j].length)\n      a = a[j];\n\n   var h = []; var n = a.length-(closed?0:1);\n   for(var i=0; i<n; i++) {\n      h.push(hull(a[i],a[(i+1)%a.length]));\n   }\n   return union(h);\n}\n","// color table from http://www.w3.org/TR/css3-color/\nvar cssColors = {\n// basic color keywords\n  'black': [ 0 / 255, 0 / 255, 0 / 255 ],\n  'silver': [ 192 / 255, 192 / 255, 192 / 255 ],\n  'gray': [ 128 / 255, 128 / 255, 128 / 255 ],\n  'white': [ 255 / 255, 255 / 255, 255 / 255 ],\n  'maroon': [ 128 / 255, 0 / 255, 0 / 255 ],\n  'red': [ 255 / 255, 0 / 255, 0 / 255 ],\n  'purple': [ 128 / 255, 0 / 255, 128 / 255 ],\n  'fuchsia': [ 255 / 255, 0 / 255, 255 / 255 ],\n  'green': [ 0 / 255, 128 / 255, 0 / 255 ],\n  'lime': [ 0 / 255, 255 / 255, 0 / 255 ],\n  'olive': [ 128 / 255, 128 / 255, 0 / 255 ],\n  'yellow': [ 255 / 255, 255 / 255, 0 / 255 ],\n  'navy': [ 0 / 255, 0 / 255, 128 / 255 ],\n  'blue': [ 0 / 255, 0 / 255, 255 / 255 ],\n  'teal': [ 0 / 255, 128 / 255, 128 / 255 ],\n  'aqua': [ 0 / 255, 255 / 255, 255 / 255 ],\n// extended color keywords\n  'aliceblue': [ 240 / 255, 248 / 255, 255 / 255 ],\n  'antiquewhite': [ 250 / 255, 235 / 255, 215 / 255 ],\n  //'aqua': [ 0 / 255, 255 / 255, 255 / 255 ],\n  'aquamarine': [ 127 / 255, 255 / 255, 212 / 255 ],\n  'azure': [ 240 / 255, 255 / 255, 255 / 255 ],\n  'beige': [ 245 / 255, 245 / 255, 220 / 255 ],\n  'bisque': [ 255 / 255, 228 / 255, 196 / 255 ],\n  //'black': [ 0 / 255, 0 / 255, 0 / 255 ],\n  'blanchedalmond': [ 255 / 255, 235 / 255, 205 / 255 ],\n  //'blue': [ 0 / 255, 0 / 255, 255 / 255 ],\n  'blueviolet': [ 138 / 255, 43 / 255, 226 / 255 ],\n  'brown': [ 165 / 255, 42 / 255, 42 / 255 ],\n  'burlywood': [ 222 / 255, 184 / 255, 135 / 255 ],\n  'cadetblue': [ 95 / 255, 158 / 255, 160 / 255 ],\n  'chartreuse': [ 127 / 255, 255 / 255, 0 / 255 ],\n  'chocolate': [ 210 / 255, 105 / 255, 30 / 255 ],\n  'coral': [ 255 / 255, 127 / 255, 80 / 255 ],\n  'cornflowerblue': [ 100 / 255, 149 / 255, 237 / 255 ],\n  'cornsilk': [ 255 / 255, 248 / 255, 220 / 255 ],\n  'crimson': [ 220 / 255, 20 / 255, 60 / 255 ],\n  'cyan': [ 0 / 255, 255 / 255, 255 / 255 ],\n  'darkblue': [ 0 / 255, 0 / 255, 139 / 255 ],\n  'darkcyan': [ 0 / 255, 139 / 255, 139 / 255 ],\n  'darkgoldenrod': [ 184 / 255, 134 / 255, 11 / 255 ],\n  'darkgray': [ 169 / 255, 169 / 255, 169 / 255 ],\n  'darkgreen': [ 0 / 255, 100 / 255, 0 / 255 ],\n  'darkgrey': [ 169 / 255, 169 / 255, 169 / 255 ],\n  'darkkhaki': [ 189 / 255, 183 / 255, 107 / 255 ],\n  'darkmagenta': [ 139 / 255, 0 / 255, 139 / 255 ],\n  'darkolivegreen': [ 85 / 255, 107 / 255, 47 / 255 ],\n  'darkorange': [ 255 / 255, 140 / 255, 0 / 255 ],\n  'darkorchid': [ 153 / 255, 50 / 255, 204 / 255 ],\n  'darkred': [ 139 / 255, 0 / 255, 0 / 255 ],\n  'darksalmon': [ 233 / 255, 150 / 255, 122 / 255 ],\n  'darkseagreen': [ 143 / 255, 188 / 255, 143 / 255 ],\n  'darkslateblue': [ 72 / 255, 61 / 255, 139 / 255 ],\n  'darkslategray': [ 47 / 255, 79 / 255, 79 / 255 ],\n  'darkslategrey': [ 47 / 255, 79 / 255, 79 / 255 ],\n  'darkturquoise': [ 0 / 255, 206 / 255, 209 / 255 ],\n  'darkviolet': [ 148 / 255, 0 / 255, 211 / 255 ],\n  'deeppink': [ 255 / 255, 20 / 255, 147 / 255 ],\n  'deepskyblue': [ 0 / 255, 191 / 255, 255 / 255 ],\n  'dimgray': [ 105 / 255, 105 / 255, 105 / 255 ],\n  'dimgrey': [ 105 / 255, 105 / 255, 105 / 255 ],\n  'dodgerblue': [ 30 / 255, 144 / 255, 255 / 255 ],\n  'firebrick': [ 178 / 255, 34 / 255, 34 / 255 ],\n  'floralwhite': [ 255 / 255, 250 / 255, 240 / 255 ],\n  'forestgreen': [ 34 / 255, 139 / 255, 34 / 255 ],\n  //'fuchsia': [ 255 / 255, 0 / 255, 255 / 255 ],\n  'gainsboro': [ 220 / 255, 220 / 255, 220 / 255 ],\n  'ghostwhite': [ 248 / 255, 248 / 255, 255 / 255 ],\n  'gold': [ 255 / 255, 215 / 255, 0 / 255 ],\n  'goldenrod': [ 218 / 255, 165 / 255, 32 / 255 ],\n  //'gray': [ 128 / 255, 128 / 255, 128 / 255 ],\n  //'green': [ 0 / 255, 128 / 255, 0 / 255 ],\n  'greenyellow': [ 173 / 255, 255 / 255, 47 / 255 ],\n  'grey': [ 128 / 255, 128 / 255, 128 / 255 ],\n  'honeydew': [ 240 / 255, 255 / 255, 240 / 255 ],\n  'hotpink': [ 255 / 255, 105 / 255, 180 / 255 ],\n  'indianred': [ 205 / 255, 92 / 255, 92 / 255 ],\n  'indigo': [ 75 / 255, 0 / 255, 130 / 255 ],\n  'ivory': [ 255 / 255, 255 / 255, 240 / 255 ],\n  'khaki': [ 240 / 255, 230 / 255, 140 / 255 ],\n  'lavender': [ 230 / 255, 230 / 255, 250 / 255 ],\n  'lavenderblush': [ 255 / 255, 240 / 255, 245 / 255 ],\n  'lawngreen': [ 124 / 255, 252 / 255, 0 / 255 ],\n  'lemonchiffon': [ 255 / 255, 250 / 255, 205 / 255 ],\n  'lightblue': [ 173 / 255, 216 / 255, 230 / 255 ],\n  'lightcoral': [ 240 / 255, 128 / 255, 128 / 255 ],\n  'lightcyan': [ 224 / 255, 255 / 255, 255 / 255 ],\n  'lightgoldenrodyellow': [ 250 / 255, 250 / 255, 210 / 255 ],\n  'lightgray': [ 211 / 255, 211 / 255, 211 / 255 ],\n  'lightgreen': [ 144 / 255, 238 / 255, 144 / 255 ],\n  'lightgrey': [ 211 / 255, 211 / 255, 211 / 255 ],\n  'lightpink': [ 255 / 255, 182 / 255, 193 / 255 ],\n  'lightsalmon': [ 255 / 255, 160 / 255, 122 / 255 ],\n  'lightseagreen': [ 32 / 255, 178 / 255, 170 / 255 ],\n  'lightskyblue': [ 135 / 255, 206 / 255, 250 / 255 ],\n  'lightslategray': [ 119 / 255, 136 / 255, 153 / 255 ],\n  'lightslategrey': [ 119 / 255, 136 / 255, 153 / 255 ],\n  'lightsteelblue': [ 176 / 255, 196 / 255, 222 / 255 ],\n  'lightyellow': [ 255 / 255, 255 / 255, 224 / 255 ],\n  //'lime': [ 0 / 255, 255 / 255, 0 / 255 ],\n  'limegreen': [ 50 / 255, 205 / 255, 50 / 255 ],\n  'linen': [ 250 / 255, 240 / 255, 230 / 255 ],\n  'magenta': [ 255 / 255, 0 / 255, 255 / 255 ],\n  //'maroon': [ 128 / 255, 0 / 255, 0 / 255 ],\n  'mediumaquamarine': [ 102 / 255, 205 / 255, 170 / 255 ],\n  'mediumblue': [ 0 / 255, 0 / 255, 205 / 255 ],\n  'mediumorchid': [ 186 / 255, 85 / 255, 211 / 255 ],\n  'mediumpurple': [ 147 / 255, 112 / 255, 219 / 255 ],\n  'mediumseagreen': [ 60 / 255, 179 / 255, 113 / 255 ],\n  'mediumslateblue': [ 123 / 255, 104 / 255, 238 / 255 ],\n  'mediumspringgreen': [ 0 / 255, 250 / 255, 154 / 255 ],\n  'mediumturquoise': [ 72 / 255, 209 / 255, 204 / 255 ],\n  'mediumvioletred': [ 199 / 255, 21 / 255, 133 / 255 ],\n  'midnightblue': [ 25 / 255, 25 / 255, 112 / 255 ],\n  'mintcream': [ 245 / 255, 255 / 255, 250 / 255 ],\n  'mistyrose': [ 255 / 255, 228 / 255, 225 / 255 ],\n  'moccasin': [ 255 / 255, 228 / 255, 181 / 255 ],\n  'navajowhite': [ 255 / 255, 222 / 255, 173 / 255 ],\n  //'navy': [ 0 / 255, 0 / 255, 128 / 255 ],\n  'oldlace': [ 253 / 255, 245 / 255, 230 / 255 ],\n  //'olive': [ 128 / 255, 128 / 255, 0 / 255 ],\n  'olivedrab': [ 107 / 255, 142 / 255, 35 / 255 ],\n  'orange': [ 255 / 255, 165 / 255, 0 / 255 ],\n  'orangered': [ 255 / 255, 69 / 255, 0 / 255 ],\n  'orchid': [ 218 / 255, 112 / 255, 214 / 255 ],\n  'palegoldenrod': [ 238 / 255, 232 / 255, 170 / 255 ],\n  'palegreen': [ 152 / 255, 251 / 255, 152 / 255 ],\n  'paleturquoise': [ 175 / 255, 238 / 255, 238 / 255 ],\n  'palevioletred': [ 219 / 255, 112 / 255, 147 / 255 ],\n  'papayawhip': [ 255 / 255, 239 / 255, 213 / 255 ],\n  'peachpuff': [ 255 / 255, 218 / 255, 185 / 255 ],\n  'peru': [ 205 / 255, 133 / 255, 63 / 255 ],\n  'pink': [ 255 / 255, 192 / 255, 203 / 255 ],\n  'plum': [ 221 / 255, 160 / 255, 221 / 255 ],\n  'powderblue': [ 176 / 255, 224 / 255, 230 / 255 ],\n  //'purple': [ 128 / 255, 0 / 255, 128 / 255 ],\n  //'red': [ 255 / 255, 0 / 255, 0 / 255 ],\n  'rosybrown': [ 188 / 255, 143 / 255, 143 / 255 ],\n  'royalblue': [ 65 / 255, 105 / 255, 225 / 255 ],\n  'saddlebrown': [ 139 / 255, 69 / 255, 19 / 255 ],\n  'salmon': [ 250 / 255, 128 / 255, 114 / 255 ],\n  'sandybrown': [ 244 / 255, 164 / 255, 96 / 255 ],\n  'seagreen': [ 46 / 255, 139 / 255, 87 / 255 ],\n  'seashell': [ 255 / 255, 245 / 255, 238 / 255 ],\n  'sienna': [ 160 / 255, 82 / 255, 45 / 255 ],\n  //'silver': [ 192 / 255, 192 / 255, 192 / 255 ],\n  'skyblue': [ 135 / 255, 206 / 255, 235 / 255 ],\n  'slateblue': [ 106 / 255, 90 / 255, 205 / 255 ],\n  'slategray': [ 112 / 255, 128 / 255, 144 / 255 ],\n  'slategrey': [ 112 / 255, 128 / 255, 144 / 255 ],\n  'snow': [ 255 / 255, 250 / 255, 250 / 255 ],\n  'springgreen': [ 0 / 255, 255 / 255, 127 / 255 ],\n  'steelblue': [ 70 / 255, 130 / 255, 180 / 255 ],\n  'tan': [ 210 / 255, 180 / 255, 140 / 255 ],\n  //'teal': [ 0 / 255, 128 / 255, 128 / 255 ],\n  'thistle': [ 216 / 255, 191 / 255, 216 / 255 ],\n  'tomato': [ 255 / 255, 99 / 255, 71 / 255 ],\n  'turquoise': [ 64 / 255, 224 / 255, 208 / 255 ],\n  'violet': [ 238 / 255, 130 / 255, 238 / 255 ],\n  'wheat': [ 245 / 255, 222 / 255, 179 / 255 ],\n  //'white': [ 255 / 255, 255 / 255, 255 / 255 ],\n  'whitesmoke': [ 245 / 255, 245 / 255, 245 / 255 ],\n  //'yellow': [ 255 / 255, 255 / 255, 0 / 255 ],\n  'yellowgreen': [ 154 / 255, 205 / 255, 50 / 255 ],\n};\n\n/**\n * Converts an CSS color name to RGB color.\n *\n * @param   String  s       The CSS color name\n * @return  Array           The RGB representation, or [0,0,0] default\n */\nexport function css2rgb(s) {\n  return cssColors[s.toLowerCase()]\n}\n\n// color( (array[r,g,b] | css-string) [,alpha] (,array[objects] | list of objects) )\nexport function color () {\n  var o, i = 1, a = arguments, c = a[0], alpha\n\n  // assume first argument is RGB array\n  // but check if first argument is CSS string\n  if (typeof c == 'string') {\n    c = css2rgb(c)\n  }\n  // check if second argument is alpha\n  if (Number.isFinite(a[i])) {\n    c = c.concat(a[i])\n    i++\n  }\n  // check if next argument is an an array\n  if (Array.isArray(a[i])) { a = a[i], i = 0; } // use this as the list of objects\n  for (o = a[i++]; i < a.length; i++) {\n    o = o.union(a[i])\n  }\n  return o.setColor(c)\n}\n\n// from http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\n/**\n * Converts an RGB color value to HSL. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n * Assumes r, g, and b are contained in the set [0, 1] and\n * returns h, s, and l in the set [0, 1].\n *\n * @param   Number  r       The red color value\n * @param   Number  g       The green color value\n * @param   Number  b       The blue color value\n * @return  Array           The HSL representation\n */\nexport function rgb2hsl (r, g, b) {\n  if (r.length) { b = r[2], g = r[1], r = r[0]; }\n  var max = Math.max(r, g, b), min = Math.min(r, g, b)\n  var h, s, l = (max + min) / 2\n\n  if (max == min) {\n    h = s = 0 // achromatic\n  } else {\n    var d = max - min\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min)\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0)\n        break\n      case g:\n        h = (b - r) / d + 2\n        break\n      case b:\n        h = (r - g) / d + 4\n        break\n    }\n    h /= 6\n  }\n\n  return [h, s, l]\n}\n\n/**\n * Converts an HSL color value to RGB. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n * Assumes h, s, and l are contained in the set [0, 1] and\n * returns r, g, and b in the set [0, 1].\n *\n * @param   Number  h       The hue\n * @param   Number  s       The saturation\n * @param   Number  l       The lightness\n * @return  Array           The RGB representation\n */\nexport function hsl2rgb (h, s, l) {\n  if (h.length) { l = h[2], s = h[1], h = h[0]; }\n  var r, g, b\n\n  if (s == 0) {\n    r = g = b = l // achromatic\n  } else {\n    function hue2rgb (p, q, t) {\n      if (t < 0) t += 1\n      if (t > 1) t -= 1\n      if (t < 1 / 6) return p + (q - p) * 6 * t\n      if (t < 1 / 2) return q\n      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6\n      return p\n    }\n\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s\n    var p = 2 * l - q\n    r = hue2rgb(p, q, h + 1 / 3)\n    g = hue2rgb(p, q, h)\n    b = hue2rgb(p, q, h - 1 / 3)\n  }\n\n  return [r, g, b]\n}\n\n/**\n * Converts an RGB color value to HSV. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\n * Assumes r, g, and b are contained in the set [0, 1] and\n * returns h, s, and v in the set [0, 1].\n *\n * @param   Number  r       The red color value\n * @param   Number  g       The green color value\n * @param   Number  b       The blue color value\n * @return  Array           The HSV representation\n */\n\nexport function rgb2hsv (r, g, b) {\n  if (r.length) { b = r[2], g = r[1], r = r[0]; }\n  var max = Math.max(r, g, b), min = Math.min(r, g, b)\n  var h, s, v = max\n\n  var d = max - min\n  s = max == 0 ? 0 : d / max\n\n  if (max == min) {\n    h = 0 // achromatic\n  } else {\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0)\n        break\n      case g:\n        h = (b - r) / d + 2\n        break\n      case b:\n        h = (r - g) / d + 4\n        break\n    }\n    h /= 6\n  }\n\n  return [h, s, v]\n}\n\n/**\n * Converts an HSV color value to RGB. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\n * Assumes h, s, and v are contained in the set [0, 1] and\n * returns r, g, and b in the set [0, 1].\n *\n * @param   Number  h       The hue\n * @param   Number  s       The saturation\n * @param   Number  v       The value\n * @return  Array           The RGB representation\n */\nexport function hsv2rgb (h, s, v) {\n  if (h.length) { v = h[2], s = h[1], h = h[0]; }\n  var r, g, b\n\n  var i = Math.floor(h * 6)\n  var f = h * 6 - i\n  var p = v * (1 - s)\n  var q = v * (1 - f * s)\n  var t = v * (1 - (1 - f) * s)\n\n  switch (i % 6) {\n    case 0:\n      r = v, g = t, b = p\n      break\n    case 1:\n      r = q, g = v, b = p\n      break\n    case 2:\n      r = p, g = v, b = t\n      break\n    case 3:\n      r = p, g = q, b = v\n      break\n    case 4:\n      r = t, g = p, b = v\n      break\n    case 5:\n      r = v, g = p, b = q\n      break\n  }\n\n  return [r, g, b]\n}\n\n/**\n * Converts a HTML5 color value (string) to RGB values\n * See the color input type of HTML5 forms\n * Conversion formula:\n * - split the string; \"#RRGGBB\" into RGB components\n * - convert the HEX value into RGB values\n */\nexport function html2rgb (s) {\n  var r = 0\n  var g = 0\n  var b = 0\n  if (s.length == 7) {\n    r = parseInt('0x' + s.slice(1, 3)) / 255\n    g = parseInt('0x' + s.slice(3, 5)) / 255\n    b = parseInt('0x' + s.slice(5, 7)) / 255\n  }\n  return [r, g, b]\n}\n\n/**\n * Converts RGB color value to HTML5 color value (string)\n * Conversion forumla:\n * - convert R, G, B into HEX strings\n * - return HTML formatted string \"#RRGGBB\"\n */\nexport function rgb2html (r, g, b) {\n  if (r.length) { b = r[2], g = r[1], r = r[0]; }\n  var s = '#' +\n  Number(0x1000000 + r * 255 * 0x10000 + g * 255 * 0x100 + b * 255).toString(16).substring(1,7)\n  return s\n}\n","// -- Math functions (360 deg based vs 2pi)\n\nexport function sin (a) {\n  return Math.sin(a / 360 * Math.PI * 2)\n}\nexport function cos (a) {\n  return Math.cos(a / 360 * Math.PI * 2)\n}\nexport function asin (a) {\n  return Math.asin(a) / (Math.PI * 2) * 360\n}\nexport function acos (a) {\n  return Math.acos(a) / (Math.PI * 2) * 360\n}\nexport function tan (a) {\n  return Math.tan(a / 360 * Math.PI * 2)\n}\nexport function atan (a) {\n  return Math.atan(a) / (Math.PI * 2) * 360\n}\nexport function atan2 (a, b) {\n  return Math.atan2(a, b) / (Math.PI * 2) * 360\n}\nexport function ceil (a) {\n  return Math.ceil(a)\n}\nexport function floor (a) {\n  return Math.floor(a)\n}\nexport function abs (a) {\n  return Math.abs(a)\n}\nexport function min (a, b) {\n  return a < b ? a : b\n}\nexport function max (a, b) {\n  return a > b ? a : b\n}\nexport function rands (min, max, vn, seed) {\n  // -- seed is ignored for now, FIX IT (requires reimplementation of random())\n  //    see http://stackoverflow.com/questions/424292/how-to-create-my-own-javascript-random-number-generator-that-i-can-also-set-the\n  var v = new Array(vn)\n  for (var i = 0; i < vn; i++) {\n    v[i] = Math.random() * (max - min) + min\n  }\n}\nexport function log (a) {\n  return Math.log(a)\n}\nexport function lookup (ix, v) {\n  var r = 0\n  for (var i = 0; i < v.length; i++) {\n    var a0 = v[i]\n    if (a0[0] >= ix) {\n      i--\n      a0 = v[i]\n      var a1 = v[i + 1]\n      var m = 0\n      if (a0[0] !== a1[0]) {\n        m = abs((ix - a0[0]) / (a1[0] - a0[0]))\n      }\n      // echo(\">>\",i,ix,a0[0],a1[0],\";\",m,a0[1],a1[1])\n      if (m > 0) {\n        r = a0[1] * (1 - m) + a1[1] * m\n      } else {\n        r = a0[1]\n      }\n      return r\n    }\n  }\n  return r\n}\n\nexport function pow (a, b) {\n  return Math.pow(a, b)\n}\n\nexport function sign (a) {\n  return a < 0 ? -1 : (a > 1 ? 1 : 0)\n}\n\nexport function sqrt (a) {\n  return Math.sqrt(a)\n}\n\nexport function round (a) {\n  return floor(a + 0.5)\n}\n","\nexport function vector_char(x,y,c) {\n   c = c.charCodeAt(0);\n   c -= 32;\n   if(c<0||c>=95) return { width: 0, segments: [] };\n\n   var off = c*112;\n   var n = simplexFont[off++];\n   var w = simplexFont[off++];\n   var l = [];\n   var segs = [];\n\n   for(var i=0; i<n; i++) {\n      var xp = simplexFont[off+i*2];\n      var yp = simplexFont[off+i*2+1];\n      if(xp==-1&&yp==-1) {\n         segs.push(l); l = [];\n      } else {\n         l.push([xp+x,yp+y]);\n      }\n   }\n   if(l.length) segs.push(l);\n   return { width: w, segments: segs };\n}\n\nexport function vector_text(x,y,s) {\n   var o = [];\n   var x0 = x;\n   for(var i=0; i<s.length; i++) {\n      var c = s.charAt(i);\n      if(c=='\\n') {\n         x = x0; y -= 30;\n      } else {\n         var d = vector_char(x,y,c);\n         x += d.width;\n         o = o.concat(d.segments);\n      }\n   }\n   return o;\n}\n\n// -- data below from http://paulbourke.net/dataformats/hershey/\n\nvar simplexFont = [\n    0,16, /* Ascii 32 */\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8,10, /* Ascii 33 */\n    5,21, 5, 7,-1,-1, 5, 2, 4, 1, 5, 0, 6, 1, 5, 2,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    5,16, /* Ascii 34 */\n    4,21, 4,14,-1,-1,12,21,12,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   11,21, /* Ascii 35 */\n   11,25, 4,-7,-1,-1,17,25,10,-7,-1,-1, 4,12,18,12,-1,-1, 3, 6,17, 6,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   26,20, /* Ascii 36 */\n    8,25, 8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21, 8,21, 5,20, 3,\n   18, 3,16, 4,14, 5,13, 7,12,13,10,15, 9,16, 8,17, 6,17, 3,15, 1,12, 0,\n    8, 0, 5, 1, 3, 3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   31,24, /* Ascii 37 */\n   21,21, 3, 0,-1,-1, 8,21,10,19,10,17, 9,15, 7,14, 5,14, 3,16, 3,18, 4,\n   20, 6,21, 8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17, 7,15, 6,14, 4,\n   14, 2,16, 0,18, 0,20, 1,21, 3,21, 5,19, 7,17, 7,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   34,26, /* Ascii 38 */\n   23,12,23,13,22,14,21,14,20,13,19,11,17, 6,15, 3,13, 1,11, 0, 7, 0, 5,\n    1, 4, 2, 3, 4, 3, 6, 4, 8, 5, 9,12,13,13,14,14,16,14,18,13,20,11,21,\n    9,20, 8,18, 8,16, 9,13,11,10,16, 3,18, 1,20, 0,22, 0,23, 1,23, 2,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    7,10, /* Ascii 39 */\n    5,19, 4,20, 5,21, 6,20, 6,18, 5,16, 4,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   10,14, /* Ascii 40 */\n   11,25, 9,23, 7,20, 5,16, 4,11, 4, 7, 5, 2, 7,-2, 9,-5,11,-7,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   10,14, /* Ascii 41 */\n    3,25, 5,23, 7,20, 9,16,10,11,10, 7, 9, 2, 7,-2, 5,-5, 3,-7,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8,16, /* Ascii 42 */\n    8,21, 8, 9,-1,-1, 3,18,13,12,-1,-1,13,18, 3,12,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    5,26, /* Ascii 43 */\n   13,18,13, 0,-1,-1, 4, 9,22, 9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8,10, /* Ascii 44 */\n    6, 1, 5, 0, 4, 1, 5, 2, 6, 1, 6,-1, 5,-3, 4,-4,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    2,26, /* Ascii 45 */\n    4, 9,22, 9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    5,10, /* Ascii 46 */\n    5, 2, 4, 1, 5, 0, 6, 1, 5, 2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    2,22, /* Ascii 47 */\n   20,25, 2,-7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   17,20, /* Ascii 48 */\n    9,21, 6,20, 4,17, 3,12, 3, 9, 4, 4, 6, 1, 9, 0,11, 0,14, 1,16, 4,17,\n    9,17,12,16,17,14,20,11,21, 9,21,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    4,20, /* Ascii 49 */\n    6,17, 8,18,11,21,11, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   14,20, /* Ascii 50 */\n    4,16, 4,17, 5,19, 6,20, 8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,\n   10, 3, 0,17, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   15,20, /* Ascii 51 */\n    5,21,16,21,10,13,13,13,15,12,16,11,17, 8,17, 6,16, 3,14, 1,11, 0, 8,\n    0, 5, 1, 4, 2, 3, 4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    6,20, /* Ascii 52 */\n   13,21, 3, 7,18, 7,-1,-1,13,21,13, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   17,20, /* Ascii 53 */\n   15,21, 5,21, 4,12, 5,13, 8,14,11,14,14,13,16,11,17, 8,17, 6,16, 3,14,\n    1,11, 0, 8, 0, 5, 1, 4, 2, 3, 4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   23,20, /* Ascii 54 */\n   16,18,15,20,12,21,10,21, 7,20, 5,17, 4,12, 4, 7, 5, 3, 7, 1,10, 0,11,\n    0,14, 1,16, 3,17, 6,17, 7,16,10,14,12,11,13,10,13, 7,12, 5,10, 4, 7,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    5,20, /* Ascii 55 */\n   17,21, 7, 0,-1,-1, 3,21,17,21,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   29,20, /* Ascii 56 */\n    8,21, 5,20, 4,18, 4,16, 5,14, 7,13,11,12,14,11,16, 9,17, 7,17, 4,16,\n    2,15, 1,12, 0, 8, 0, 5, 1, 4, 2, 3, 4, 3, 7, 4, 9, 6,11, 9,12,13,13,\n   15,14,16,16,16,18,15,20,12,21, 8,21,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   23,20, /* Ascii 57 */\n   16,14,15,11,13, 9,10, 8, 9, 8, 6, 9, 4,11, 3,14, 3,15, 4,18, 6,20, 9,\n   21,10,21,13,20,15,18,16,14,16, 9,15, 4,13, 1,10, 0, 8, 0, 5, 1, 4, 3,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   11,10, /* Ascii 58 */\n    5,14, 4,13, 5,12, 6,13, 5,14,-1,-1, 5, 2, 4, 1, 5, 0, 6, 1, 5, 2,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   14,10, /* Ascii 59 */\n    5,14, 4,13, 5,12, 6,13, 5,14,-1,-1, 6, 1, 5, 0, 4, 1, 5, 2, 6, 1, 6,\n   -1, 5,-3, 4,-4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    3,24, /* Ascii 60 */\n   20,18, 4, 9,20, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    5,26, /* Ascii 61 */\n    4,12,22,12,-1,-1, 4, 6,22, 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    3,24, /* Ascii 62 */\n    4,18,20, 9, 4, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   20,18, /* Ascii 63 */\n    3,16, 3,17, 4,19, 5,20, 7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,\n   12, 9,10, 9, 7,-1,-1, 9, 2, 8, 1, 9, 0,10, 1, 9, 2,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   55,27, /* Ascii 64 */\n   18,13,17,15,15,16,12,16,10,15, 9,14, 8,11, 8, 8, 9, 6,11, 5,14, 5,16,\n    6,17, 8,-1,-1,12,16,10,14, 9,11, 9, 8,10, 6,11, 5,-1,-1,18,16,17, 8,\n   17, 6,19, 5,21, 5,23, 7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,\n   21, 9,20, 7,19, 5,17, 4,15, 3,12, 3, 9, 4, 6, 5, 4, 7, 2, 9, 1,12, 0,\n   15, 0,18, 1,20, 2,21, 3,-1,-1,19,16,18, 8,18, 6,19, 5,\n    8,18, /* Ascii 65 */\n    9,21, 1, 0,-1,-1, 9,21,17, 0,-1,-1, 4, 7,14, 7,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   23,21, /* Ascii 66 */\n    4,21, 4, 0,-1,-1, 4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,\n   11,-1,-1, 4,11,13,11,16,10,17, 9,18, 7,18, 4,17, 2,16, 1,13, 0, 4, 0,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   18,21, /* Ascii 67 */\n   18,16,17,18,15,20,13,21, 9,21, 7,20, 5,18, 4,16, 3,13, 3, 8, 4, 5, 5,\n    3, 7, 1, 9, 0,13, 0,15, 1,17, 3,18, 5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   15,21, /* Ascii 68 */\n    4,21, 4, 0,-1,-1, 4,21,11,21,14,20,16,18,17,16,18,13,18, 8,17, 5,16,\n    3,14, 1,11, 0, 4, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   11,19, /* Ascii 69 */\n    4,21, 4, 0,-1,-1, 4,21,17,21,-1,-1, 4,11,12,11,-1,-1, 4, 0,17, 0,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8,18, /* Ascii 70 */\n    4,21, 4, 0,-1,-1, 4,21,17,21,-1,-1, 4,11,12,11,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   22,21, /* Ascii 71 */\n   18,16,17,18,15,20,13,21, 9,21, 7,20, 5,18, 4,16, 3,13, 3, 8, 4, 5, 5,\n    3, 7, 1, 9, 0,13, 0,15, 1,17, 3,18, 5,18, 8,-1,-1,13, 8,18, 8,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8,22, /* Ascii 72 */\n    4,21, 4, 0,-1,-1,18,21,18, 0,-1,-1, 4,11,18,11,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    2, 8, /* Ascii 73 */\n    4,21, 4, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   10,16, /* Ascii 74 */\n   12,21,12, 5,11, 2,10, 1, 8, 0, 6, 0, 4, 1, 3, 2, 2, 5, 2, 7,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8,21, /* Ascii 75 */\n    4,21, 4, 0,-1,-1,18,21, 4, 7,-1,-1, 9,12,18, 0,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    5,17, /* Ascii 76 */\n    4,21, 4, 0,-1,-1, 4, 0,16, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   11,24, /* Ascii 77 */\n    4,21, 4, 0,-1,-1, 4,21,12, 0,-1,-1,20,21,12, 0,-1,-1,20,21,20, 0,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8,22, /* Ascii 78 */\n    4,21, 4, 0,-1,-1, 4,21,18, 0,-1,-1,18,21,18, 0,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   21,22, /* Ascii 79 */\n    9,21, 7,20, 5,18, 4,16, 3,13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0,13, 0,15,\n    1,17, 3,18, 5,19, 8,19,13,18,16,17,18,15,20,13,21, 9,21,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   13,21, /* Ascii 80 */\n    4,21, 4, 0,-1,-1, 4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,\n   10, 4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   24,22, /* Ascii 81 */\n    9,21, 7,20, 5,18, 4,16, 3,13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0,13, 0,15,\n    1,17, 3,18, 5,19, 8,19,13,18,16,17,18,15,20,13,21, 9,21,-1,-1,12, 4,\n   18,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   16,21, /* Ascii 82 */\n    4,21, 4, 0,-1,-1, 4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,\n   11, 4,11,-1,-1,11,11,18, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   20,20, /* Ascii 83 */\n   17,18,15,20,12,21, 8,21, 5,20, 3,18, 3,16, 4,14, 5,13, 7,12,13,10,15,\n    9,16, 8,17, 6,17, 3,15, 1,12, 0, 8, 0, 5, 1, 3, 3,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    5,16, /* Ascii 84 */\n    8,21, 8, 0,-1,-1, 1,21,15,21,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   10,22, /* Ascii 85 */\n    4,21, 4, 6, 5, 3, 7, 1,10, 0,12, 0,15, 1,17, 3,18, 6,18,21,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    5,18, /* Ascii 86 */\n    1,21, 9, 0,-1,-1,17,21, 9, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   11,24, /* Ascii 87 */\n    2,21, 7, 0,-1,-1,12,21, 7, 0,-1,-1,12,21,17, 0,-1,-1,22,21,17, 0,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    5,20, /* Ascii 88 */\n    3,21,17, 0,-1,-1,17,21, 3, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    6,18, /* Ascii 89 */\n    1,21, 9,11, 9, 0,-1,-1,17,21, 9,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8,20, /* Ascii 90 */\n   17,21, 3, 0,-1,-1, 3,21,17,21,-1,-1, 3, 0,17, 0,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   11,14, /* Ascii 91 */\n    4,25, 4,-7,-1,-1, 5,25, 5,-7,-1,-1, 4,25,11,25,-1,-1, 4,-7,11,-7,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    2,14, /* Ascii 92 */\n    0,21,14,-3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   11,14, /* Ascii 93 */\n    9,25, 9,-7,-1,-1,10,25,10,-7,-1,-1, 3,25,10,25,-1,-1, 3,-7,10,-7,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   10,16, /* Ascii 94 */\n    6,15, 8,18,10,15,-1,-1, 3,12, 8,17,13,12,-1,-1, 8,17, 8, 0,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    2,16, /* Ascii 95 */\n    0,-2,16,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    7,10, /* Ascii 96 */\n    6,21, 5,20, 4,18, 4,16, 5,15, 6,16, 5,17,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   17,19, /* Ascii 97 */\n   15,14,15, 0,-1,-1,15,11,13,13,11,14, 8,14, 6,13, 4,11, 3, 8, 3, 6, 4,\n    3, 6, 1, 8, 0,11, 0,13, 1,15, 3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   17,19, /* Ascii 98 */\n    4,21, 4, 0,-1,-1, 4,11, 6,13, 8,14,11,14,13,13,15,11,16, 8,16, 6,15,\n    3,13, 1,11, 0, 8, 0, 6, 1, 4, 3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   14,18, /* Ascii 99 */\n   15,11,13,13,11,14, 8,14, 6,13, 4,11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0,11,\n    0,13, 1,15, 3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   17,19, /* Ascii 100 */\n   15,21,15, 0,-1,-1,15,11,13,13,11,14, 8,14, 6,13, 4,11, 3, 8, 3, 6, 4,\n    3, 6, 1, 8, 0,11, 0,13, 1,15, 3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   17,18, /* Ascii 101 */\n    3, 8,15, 8,15,10,14,12,13,13,11,14, 8,14, 6,13, 4,11, 3, 8, 3, 6, 4,\n    3, 6, 1, 8, 0,11, 0,13, 1,15, 3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8,12, /* Ascii 102 */\n   10,21, 8,21, 6,20, 5,17, 5, 0,-1,-1, 2,14, 9,14,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   22,19, /* Ascii 103 */\n   15,14,15,-2,14,-5,13,-6,11,-7, 8,-7, 6,-6,-1,-1,15,11,13,13,11,14, 8,\n   14, 6,13, 4,11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0,11, 0,13, 1,15, 3,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   10,19, /* Ascii 104 */\n    4,21, 4, 0,-1,-1, 4,10, 7,13, 9,14,12,14,14,13,15,10,15, 0,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8, 8, /* Ascii 105 */\n    3,21, 4,20, 5,21, 4,22, 3,21,-1,-1, 4,14, 4, 0,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   11,10, /* Ascii 106 */\n    5,21, 6,20, 7,21, 6,22, 5,21,-1,-1, 6,14, 6,-3, 5,-6, 3,-7, 1,-7,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8,17, /* Ascii 107 */\n    4,21, 4, 0,-1,-1,14,14, 4, 4,-1,-1, 8, 8,15, 0,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    2, 8, /* Ascii 108 */\n    4,21, 4, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   18,30, /* Ascii 109 */\n    4,14, 4, 0,-1,-1, 4,10, 7,13, 9,14,12,14,14,13,15,10,15, 0,-1,-1,15,\n   10,18,13,20,14,23,14,25,13,26,10,26, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   10,19, /* Ascii 110 */\n    4,14, 4, 0,-1,-1, 4,10, 7,13, 9,14,12,14,14,13,15,10,15, 0,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   17,19, /* Ascii 111 */\n    8,14, 6,13, 4,11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0,11, 0,13, 1,15, 3,16,\n    6,16, 8,15,11,13,13,11,14, 8,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   17,19, /* Ascii 112 */\n    4,14, 4,-7,-1,-1, 4,11, 6,13, 8,14,11,14,13,13,15,11,16, 8,16, 6,15,\n    3,13, 1,11, 0, 8, 0, 6, 1, 4, 3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   17,19, /* Ascii 113 */\n   15,14,15,-7,-1,-1,15,11,13,13,11,14, 8,14, 6,13, 4,11, 3, 8, 3, 6, 4,\n    3, 6, 1, 8, 0,11, 0,13, 1,15, 3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8,13, /* Ascii 114 */\n    4,14, 4, 0,-1,-1, 4, 8, 5,11, 7,13, 9,14,12,14,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   17,17, /* Ascii 115 */\n   14,11,13,13,10,14, 7,14, 4,13, 3,11, 4, 9, 6, 8,11, 7,13, 6,14, 4,14,\n    3,13, 1,10, 0, 7, 0, 4, 1, 3, 3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8,12, /* Ascii 116 */\n    5,21, 5, 4, 6, 1, 8, 0,10, 0,-1,-1, 2,14, 9,14,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   10,19, /* Ascii 117 */\n    4,14, 4, 4, 5, 1, 7, 0,10, 0,12, 1,15, 4,-1,-1,15,14,15, 0,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    5,16, /* Ascii 118 */\n    2,14, 8, 0,-1,-1,14,14, 8, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   11,22, /* Ascii 119 */\n    3,14, 7, 0,-1,-1,11,14, 7, 0,-1,-1,11,14,15, 0,-1,-1,19,14,15, 0,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    5,17, /* Ascii 120 */\n    3,14,14, 0,-1,-1,14,14, 3, 0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    9,16, /* Ascii 121 */\n    2,14, 8, 0,-1,-1,14,14, 8, 0, 6,-4, 4,-6, 2,-7, 1,-7,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    8,17, /* Ascii 122 */\n   14,14, 3, 0,-1,-1, 3,14,14,14,-1,-1, 3, 0,14, 0,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   39,14, /* Ascii 123 */\n    9,25, 7,24, 6,23, 5,21, 5,19, 6,17, 7,16, 8,14, 8,12, 6,10,-1,-1, 7,\n   24, 6,22, 6,20, 7,18, 8,17, 9,15, 9,13, 8,11, 4, 9, 8, 7, 9, 5, 9, 3,\n    8, 1, 7, 0, 6,-2, 6,-4, 7,-6,-1,-1, 6, 8, 8, 6, 8, 4, 7, 2, 6, 1, 5,\n   -1, 5,-3, 6,-5, 7,-6, 9,-7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n    2, 8, /* Ascii 124 */\n    4,25, 4,-7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   39,14, /* Ascii 125 */\n    5,25, 7,24, 8,23, 9,21, 9,19, 8,17, 7,16, 6,14, 6,12, 8,10,-1,-1, 7,\n   24, 8,22, 8,20, 7,18, 6,17, 5,15, 5,13, 6,11,10, 9, 6, 7, 5, 5, 5, 3,\n    6, 1, 7, 0, 8,-2, 8,-4, 7,-6,-1,-1, 8, 8, 6, 6, 6, 4, 7, 2, 8, 1, 9,\n   -1, 9,-3, 8,-5, 7,-6, 5,-7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   23,24, /* Ascii 126 */\n    3, 6, 3, 8, 4,11, 6,12, 8,12,10,11,14, 8,16, 7,18, 7,20, 8,21,10,-1,\n   -1, 3, 8, 4,10, 6,11, 8,11,10,10,14, 7,16, 6,18, 6,20, 7,21,10,21,12,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n   -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,\n];\n","export function echo () {\n  console.warn('echo() will be deprecated in the near future: please use console.log/warn/error instead')\n  var s = '', a = arguments\n  for (var i = 0; i < a.length; i++) {\n    if (i) s += ', '\n    s += a[i]\n  }\n  // var t = (new Date()-global.time)/1000\n  // console.log(t,s)\n  console.log(s)\n}\n\n/**\nsprintf() for JavaScript 0.7-beta1\nhttp://www.diveintojavascript.com/projects/javascript-sprintf\n\nCopyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n    * Redistributions in binary form must reproduce the above copyright\n      notice, this list of conditions and the following disclaimer in the\n      documentation and/or other materials provided with the distribution.\n    * Neither the name of sprintf() for JavaScript nor the\n      names of its contributors may be used to endorse or promote products\n      derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL Alexandru Marasteanu BE LIABLE FOR ANY\nDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\nON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nChangelog:\n2010.09.06 - 0.7-beta1\n  - features: vsprintf, support for named placeholders\n  - enhancements: format cache, reduced global namespace pollution\n\n2010.05.22 - 0.6:\n - reverted to 0.4 and fixed the bug regarding the sign of the number 0\n Note:\n Thanks to Raphael Pigulla <raph (at] n3rd [dot) org> (http://www.n3rd.org/)\n who warned me about a bug in 0.5, I discovered that the last update was\n a regress. I appologize for that.\n\n2010.05.09 - 0.5:\n - bug fix: 0 is now preceeded with a + sign\n - bug fix: the sign was not at the right position on padded results (Kamal Abdali)\n - switched from GPL to BSD license\n\n2007.10.21 - 0.4:\n - unit test and patch (David Baird)\n\n2007.09.17 - 0.3:\n - bug fix: no longer throws exception on empty paramenters (Hans Pufal)\n\n2007.09.11 - 0.2:\n - feature: added argument swapping\n\n2007.04.03 - 0.1:\n - initial release\n**/\n\nlet sprintf = (function () {\n  function get_type (variable) {\n    return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase()\n  }\n  function str_repeat (input, multiplier) {\n    for (var output = []; multiplier > 0; output[--multiplier] = input) { /* do nothing */}\n    return output.join('')\n  }\n\n  var str_format = function () {\n    if (!str_format.cache.hasOwnProperty(arguments[0])) {\n      str_format.cache[arguments[0]] = str_format.parse(arguments[0])\n    }\n    return str_format.format.call(null, str_format.cache[arguments[0]], arguments)\n  }\n\n  str_format.format = function (parse_tree, argv) {\n    var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length\n    for (i = 0; i < tree_length; i++) {\n      node_type = get_type(parse_tree[i])\n      if (node_type === 'string') {\n        output.push(parse_tree[i])\n      }\n      else if (node_type === 'array') {\n        match = parse_tree[i] // convenience purposes only\n        if (match[2]) { // keyword argument\n          arg = argv[cursor]\n          for (k = 0; k < match[2].length; k++) {\n            if (!arg.hasOwnProperty(match[2][k])) {\n              throw(sprintf('[sprintf] property \"%s\" does not exist', match[2][k]))\n            }\n            arg = arg[match[2][k]]\n          }\n        }\n        else if (match[1]) { // positional argument (explicit)\n          arg = argv[match[1]]\n        } else { // positional argument (implicit)\n          arg = argv[cursor++]\n        }\n\n        if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {\n          throw(sprintf('[sprintf] expecting number but found %s', get_type(arg)))\n        }\n        switch (match[8]) {\n          case 'b':\n            arg = arg.toString(2)\n            break\n          case 'c':\n            arg = String.fromCharCode(arg)\n            break\n          case 'd':\n            arg = parseInt(arg, 10)\n            break\n          case 'e':\n            arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential()\n            break\n          case 'f':\n            arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg)\n            break\n          case 'o':\n            arg = arg.toString(8)\n            break\n          case 's':\n            arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg)\n            break\n          case 'u':\n            arg = Math.abs(arg)\n            break\n          case 'x':\n            arg = arg.toString(16)\n            break\n          case 'X':\n            arg = arg.toString(16).toUpperCase()\n            break\n        }\n        arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+' + arg : arg)\n        pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' '\n        pad_length = match[6] - String(arg).length\n        pad = match[6] ? str_repeat(pad_character, pad_length) : ''\n        output.push(match[5] ? arg + pad : pad + arg)\n      }\n    }\n    return output.join('')\n  }\n\n  str_format.cache = {}\n\n  str_format.parse = function (fmt) {\n    var _fmt = fmt, match = [], parse_tree = [], arg_names = 0\n    while (_fmt) {\n      if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\n        parse_tree.push(match[0])\n      }\n      else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\n        parse_tree.push('%')\n      }\n      else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\n        if (match[2]) {\n          arg_names |= 1\n          var field_list = [], replacement_field = match[2], field_match = []\n          if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n            field_list.push(field_match[1])\n            while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\n              if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                field_list.push(field_match[1])\n              }\n              else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\n                field_list.push(field_match[1])\n              } else {\n                throw('[sprintf] huh?')\n              }\n            }\n          } else {\n            throw('[sprintf] huh?')\n          }\n          match[2] = field_list\n        } else {\n          arg_names |= 2\n        }\n        if (arg_names === 3) {\n          throw('[sprintf] mixing positional and named placeholders is not (yet) supported')\n        }\n        parse_tree.push(match)\n      } else {\n        throw('[sprintf] huh?')\n      }\n      _fmt = _fmt.substring(match[0].length)\n    }\n    return parse_tree\n  }\n\n  return str_format\n})()\n\nfunction vsprintf (fmt, argv) {\n  argv.unshift(fmt)\n  return sprintf.apply(null, argv)\n}\n","export function log (txt) {\n  var timeInMs = Date.now()\n  var prevtime = undefined//OpenJsCad.log.prevLogTime\n  if (!prevtime) prevtime = timeInMs\n  var deltatime = timeInMs - prevtime\n  log.prevLogTime = timeInMs\n  var timefmt = (deltatime * 0.001).toFixed(3)\n  txt = '[' + timefmt + '] ' + txt\n  if ((typeof (console) === 'object') && (typeof (console.log) === 'function')) {\n    console.log(txt)\n  } else if ((typeof (self) === 'object') && (typeof (self.postMessage) === 'function')) {\n    self.postMessage({cmd: 'log', txt: txt})\n  }\n  else throw new Error('Cannot log')\n}\n\n// See Processor.setStatus()\n// Note: leave for compatibility\nexport function status (s) {\n  log(s)\n}\n","/*\n\n## IMPORTANT NOTE --- IMPORTANT \nThe master for this file is located at:\nhttps://github.com/joostn/openjscad/tree/gh-pages\nThat is the gh-pages branch of the joostn/openjscad project\nIf contributing from openjscad.org, please do NOT edit this local file but make pull requests against\nabove joostn/gh-pages branch.\n## IMPORTANT NOTE --- IMPORTANT NOTE\n\n\n## License\n\nCopyright (c) 2014 bebbi (elghatta@gmail.com)\nCopyright (c) 2013 Eduard Bespalov (edwbes@gmail.com)\nCopyright (c) 2012 Joost Nieuwenhuijse (joost@newhouse.nl)\nCopyright (c) 2011 Evan Wallace (http://evanw.github.com/csg.js/)\nCopyright (c) 2012 Alexandre Girard (https://github.com/alx)\n\nAll code released under MIT license\n\n## Overview\n\nFor an overview of the CSG process see the original csg.js code:\nhttp://evanw.github.com/csg.js/\n\nCSG operations through BSP trees suffer from one problem: heavy fragmentation\nof polygons. If two CSG solids of n polygons are unified, the resulting solid may have\nin the order of n*n polygons, because each polygon is split by the planes of all other\npolygons. After a few operations the number of polygons explodes.\n\nThis version of CSG.js solves the problem in 3 ways:\n\n1. Every polygon split is recorded in a tree (CSG.PolygonTreeNode). This is a separate\ntree, not to be confused with the CSG tree. If a polygon is split into two parts but in\nthe end both fragments have not been discarded by the CSG operation, we can retrieve\nthe original unsplit polygon from the tree, instead of the two fragments.\n\nThis does not completely solve the issue though: if a polygon is split multiple times\nthe number of fragments depends on the order of subsequent splits, and we might still\nend up with unncessary splits:\nSuppose a polygon is first split into A and B, and then into A1, B1, A2, B2. Suppose B2 is\ndiscarded. We will end up with 2 polygons: A and B1. Depending on the actual split boundaries\nwe could still have joined A and B1 into one polygon. Therefore a second approach is used as well:\n\n2. After CSG operations all coplanar polygon fragments are joined by a retesselating\noperation. See CSG.reTesselated(). Retesselation is done through a\nlinear sweep over the polygon surface. The sweep line passes over the y coordinates\nof all vertices in the polygon. Polygons are split at each sweep line, and the fragments\nare joined horizontally and vertically into larger polygons (making sure that we\nwill end up with convex polygons).\nThis still doesn't solve the problem completely: due to floating point imprecisions\nwe may end up with small gaps between polygons, and polygons may not be exactly coplanar\nanymore, and as a result the retesselation algorithm may fail to join those polygons.\nTherefore:\n\n3. A canonicalization algorithm is implemented: it looks for vertices that have\napproximately the same coordinates (with a certain tolerance, say 1e-5) and replaces\nthem with the same vertex. If polygons share a vertex they will actually point to the\nsame CSG.Vertex instance. The same is done for polygon planes. See CSG.canonicalized().\n\n\nPerformance improvements to the original CSG.js:\n\nReplaced the flip() and invert() methods by flipped() and inverted() which don't\nmodify the source object. This allows to get rid of all clone() calls, so that\nmultiple polygons can refer to the same CSG.Plane instance etc.\n\nThe original union() used an extra invert(), clipTo(), invert() sequence just to remove the\ncoplanar front faces from b; this is now combined in a single b.clipTo(a, true) call.\n\nDetection whether a polygon is in front or in back of a plane: for each polygon\nwe are caching the coordinates of the bounding sphere. If the bounding sphere is\nin front or in back of the plane we don't have to check the individual vertices\nanymore.\n\n\nOther additions to the original CSG.js:\n\nCSG.Vector class has been renamed into CSG.Vector3D\n\nClasses for 3D lines, 2D vectors, 2D lines, and methods to find the intersection of\na line and a plane etc.\n\nTransformations: CSG.transform(), CSG.translate(), CSG.rotate(), CSG.scale()\n\nExpanding or contracting a solid: CSG.expand() and CSG.contract(). Creates nice\nsmooth corners.\n\nThe vertex normal has been removed since it complicates retesselation. It's not needed\nfor solid CAD anyway.\n\n*/\n\n    var _CSGDEBUG = false;\n\n    function fnNumberSort(a, b) {\n        return a - b;\n    }\n\n    // # class CSG\n    // Holds a binary space partition tree representing a 3D solid. Two solids can\n    // be combined using the `union()`, `subtract()`, and `intersect()` methods.\n    var CSG = function() {\n        this.polygons = [];\n        this.properties = new CSG.Properties();\n        this.isCanonicalized = true;\n        this.isRetesselated = true;\n    };\n\n    CSG.defaultResolution2D = 32;\n    CSG.defaultResolution3D = 12;\n\n    // Construct a CSG solid from a list of `CSG.Polygon` instances.\n    CSG.fromPolygons = function(polygons) {\n        var csg = new CSG();\n        csg.polygons = polygons;\n        csg.isCanonicalized = false;\n        csg.isRetesselated = false;\n        return csg;\n    };\n\n    // Construct a CSG solid from generated slices.\n    // Look at CSG.Polygon.prototype.solidFromSlices for details\n    CSG.fromSlices = function(options) {\n        return (new CSG.Polygon.createFromPoints([\n            [0, 0, 0],\n            [1, 0, 0],\n            [1, 1, 0],\n            [0, 1, 0]\n        ])).solidFromSlices(options);\n    };\n\n    // create from an untyped object with identical property names:\n    CSG.fromObject = function(obj) {\n        var polygons = obj.polygons.map(function(p) {\n            return CSG.Polygon.fromObject(p);\n        });\n        var csg = CSG.fromPolygons(polygons);\n        csg.isCanonicalized = obj.isCanonicalized;\n        csg.isRetesselated  = obj.isRetesselated;\n        return csg;\n    };\n\n    // Reconstruct a CSG from the output of toCompactBinary()\n    CSG.fromCompactBinary = function(bin) {\n        if (bin['class'] != \"CSG\") throw new Error(\"Not a CSG\");\n        var planes = [],\n            planeData = bin.planeData,\n            numplanes = planeData.length / 4,\n            arrayindex = 0,\n            x, y, z, w, normal, plane;\n        for (var planeindex = 0; planeindex < numplanes; planeindex++) {\n            x = planeData[arrayindex++];\n            y = planeData[arrayindex++];\n            z = planeData[arrayindex++];\n            w = planeData[arrayindex++];\n            normal = CSG.Vector3D.Create(x, y, z);\n            plane = new CSG.Plane(normal, w);\n            planes.push(plane);\n        }\n\n        var vertices = [],\n            vertexData = bin.vertexData,\n            numvertices = vertexData.length / 3,\n            pos, vertex;\n        arrayindex = 0;\n        for (var vertexindex = 0; vertexindex < numvertices; vertexindex++) {\n            x = vertexData[arrayindex++];\n            y = vertexData[arrayindex++];\n            z = vertexData[arrayindex++];\n            pos = CSG.Vector3D.Create(x, y, z);\n            vertex = new CSG.Vertex(pos);\n            vertices.push(vertex);\n        }\n\n        var shareds = bin.shared.map(function(shared) {\n            return CSG.Polygon.Shared.fromObject(shared);\n        });\n\n        var polygons = [],\n            numpolygons = bin.numPolygons,\n            numVerticesPerPolygon = bin.numVerticesPerPolygon,\n            polygonVertices = bin.polygonVertices,\n            polygonPlaneIndexes = bin.polygonPlaneIndexes,\n            polygonSharedIndexes = bin.polygonSharedIndexes,\n            numpolygonvertices, polygonvertices, shared, polygon; //already defined plane,\n        arrayindex = 0;\n        for (var polygonindex = 0; polygonindex < numpolygons; polygonindex++) {\n            numpolygonvertices = numVerticesPerPolygon[polygonindex];\n            polygonvertices = [];\n            for (var i = 0; i < numpolygonvertices; i++) {\n                polygonvertices.push(vertices[polygonVertices[arrayindex++]]);\n            }\n            plane = planes[polygonPlaneIndexes[polygonindex]];\n            shared = shareds[polygonSharedIndexes[polygonindex]];\n            polygon = new CSG.Polygon(polygonvertices, shared, plane);\n            polygons.push(polygon);\n        }\n        var csg = CSG.fromPolygons(polygons);\n        csg.isCanonicalized = true;\n        csg.isRetesselated = true;\n        return csg;\n    };\n\n    CSG.prototype = {\n        toPolygons: function() {\n            return this.polygons;\n        },\n\n        // Return a new CSG solid representing space in either this solid or in the\n        // solid `csg`. Neither this solid nor the solid `csg` are modified.\n        //\n        //     A.union(B)\n        //\n        //     +-------+            +-------+\n        //     |       |            |       |\n        //     |   A   |            |       |\n        //     |    +--+----+   =   |       +----+\n        //     +----+--+    |       +----+       |\n        //          |   B   |            |       |\n        //          |       |            |       |\n        //          +-------+            +-------+\n        //\n        union: function(csg) {\n            var csgs;\n            if (csg instanceof Array) {\n                csgs = csg.slice(0);\n                csgs.push(this);\n            } else {\n                csgs = [this, csg];\n            }\n\n            // combine csg pairs in a way that forms a balanced binary tree pattern\n            for (var i = 1; i < csgs.length; i += 2) {\n                csgs.push(csgs[i-1].unionSub(csgs[i]));\n            }\n\n            return csgs[i - 1].reTesselated().canonicalized();\n        },\n\n        unionSub: function(csg, retesselate, canonicalize) {\n            if (!this.mayOverlap(csg)) {\n                return this.unionForNonIntersecting(csg);\n            } else {\n                var a = new CSG.Tree(this.polygons);\n                var b = new CSG.Tree(csg.polygons);\n                a.clipTo(b, false);\n\n                // b.clipTo(a, true); // ERROR: this doesn't work\n                b.clipTo(a);\n                b.invert();\n                b.clipTo(a);\n                b.invert();\n\n                var newpolygons = a.allPolygons().concat(b.allPolygons());\n                var result = CSG.fromPolygons(newpolygons);\n                result.properties = this.properties._merge(csg.properties);\n                if (retesselate) result = result.reTesselated();\n                if (canonicalize) result = result.canonicalized();\n                return result;\n            }\n        },\n\n        // Like union, but when we know that the two solids are not intersecting\n        // Do not use if you are not completely sure that the solids do not intersect!\n        unionForNonIntersecting: function(csg) {\n            var newpolygons = this.polygons.concat(csg.polygons);\n            var result = CSG.fromPolygons(newpolygons);\n            result.properties = this.properties._merge(csg.properties);\n            result.isCanonicalized = this.isCanonicalized && csg.isCanonicalized;\n            result.isRetesselated = this.isRetesselated && csg.isRetesselated;\n            return result;\n        },\n\n        // Return a new CSG solid representing space in this solid but not in the\n        // solid `csg`. Neither this solid nor the solid `csg` are modified.\n        //\n        //     A.subtract(B)\n        //\n        //     +-------+            +-------+\n        //     |       |            |       |\n        //     |   A   |            |       |\n        //     |    +--+----+   =   |    +--+\n        //     +----+--+    |       +----+\n        //          |   B   |\n        //          |       |\n        //          +-------+\n        //\n        subtract: function(csg) {\n            var csgs;\n            if (csg instanceof Array) {\n                csgs = csg;\n            } else {\n                csgs = [csg];\n            }\n            var result = this;\n            for (var i = 0; i < csgs.length; i++) {\n                var islast = (i == (csgs.length - 1));\n                result = result.subtractSub(csgs[i], islast, islast);\n            }\n            return result;\n        },\n\n        subtractSub: function(csg, retesselate, canonicalize) {\n            var a = new CSG.Tree(this.polygons);\n            var b = new CSG.Tree(csg.polygons);\n            a.invert();\n            a.clipTo(b);\n            b.clipTo(a, true);\n            a.addPolygons(b.allPolygons());\n            a.invert();\n            var result = CSG.fromPolygons(a.allPolygons());\n            result.properties = this.properties._merge(csg.properties);\n            if (retesselate) result = result.reTesselated();\n            if (canonicalize) result = result.canonicalized();\n            return result;\n        },\n\n        // Return a new CSG solid representing space both this solid and in the\n        // solid `csg`. Neither this solid nor the solid `csg` are modified.\n        //\n        //     A.intersect(B)\n        //\n        //     +-------+\n        //     |       |\n        //     |   A   |\n        //     |    +--+----+   =   +--+\n        //     +----+--+    |       +--+\n        //          |   B   |\n        //          |       |\n        //          +-------+\n        //\n        intersect: function(csg) {\n            var csgs;\n            if (csg instanceof Array) {\n                csgs = csg;\n            } else {\n                csgs = [csg];\n            }\n            var result = this;\n            for (var i = 0; i < csgs.length; i++) {\n                var islast = (i == (csgs.length - 1));\n                result = result.intersectSub(csgs[i], islast, islast);\n            }\n            return result;\n        },\n\n        intersectSub: function(csg, retesselate, canonicalize) {\n            var a = new CSG.Tree(this.polygons);\n            var b = new CSG.Tree(csg.polygons);\n            a.invert();\n            b.clipTo(a);\n            b.invert();\n            a.clipTo(b);\n            b.clipTo(a);\n            a.addPolygons(b.allPolygons());\n            a.invert();\n            var result = CSG.fromPolygons(a.allPolygons());\n            result.properties = this.properties._merge(csg.properties);\n            if (retesselate) result = result.reTesselated();\n            if (canonicalize) result = result.canonicalized();\n            return result;\n        },\n\n        // Return a new CSG solid with solid and empty space switched. This solid is\n        // not modified.\n        invert: function() {\n            var flippedpolygons = this.polygons.map(function(p) {\n                return p.flipped();\n            });\n            return CSG.fromPolygons(flippedpolygons);\n            // TODO: flip properties?\n        },\n\n        // Affine transformation of CSG object. Returns a new CSG object\n        transform1: function(matrix4x4) {\n            var newpolygons = this.polygons.map(function(p) {\n                return p.transform(matrix4x4);\n            });\n            var result = CSG.fromPolygons(newpolygons);\n            result.properties = this.properties._transform(matrix4x4);\n            result.isRetesselated = this.isRetesselated;\n            return result;\n        },\n\n        transform: function(matrix4x4) {\n            var ismirror = matrix4x4.isMirroring();\n            var transformedvertices = {};\n            var transformedplanes = {};\n            var newpolygons = this.polygons.map(function(p) {\n                var newplane;\n                var plane = p.plane;\n                var planetag = plane.getTag();\n                if (planetag in transformedplanes) {\n                    newplane = transformedplanes[planetag];\n                } else {\n                    newplane = plane.transform(matrix4x4);\n                    transformedplanes[planetag] = newplane;\n                }\n                var newvertices = p.vertices.map(function(v) {\n                    var newvertex;\n                    var vertextag = v.getTag();\n                    if (vertextag in transformedvertices) {\n                        newvertex = transformedvertices[vertextag];\n                    } else {\n                        newvertex = v.transform(matrix4x4);\n                        transformedvertices[vertextag] = newvertex;\n                    }\n                    return newvertex;\n                });\n                if (ismirror) newvertices.reverse();\n                return new CSG.Polygon(newvertices, p.shared, newplane);\n            });\n            var result = CSG.fromPolygons(newpolygons);\n            result.properties = this.properties._transform(matrix4x4);\n            result.isRetesselated = this.isRetesselated;\n            result.isCanonicalized = this.isCanonicalized;\n            return result;\n        },\n\n        toString: function() {\n            var result = \"CSG solid:\\n\";\n            this.polygons.map(function(p) {\n                result += p.toString();\n            });\n            return result;\n        },\n\n        // Expand the solid\n        // resolution: number of points per 360 degree for the rounded corners\n        expand: function(radius, resolution) {\n            var result = this.expandedShell(radius, resolution, true);\n            result = result.reTesselated();\n            result.properties = this.properties; // keep original properties\n            return result;\n        },\n\n        // Contract the solid\n        // resolution: number of points per 360 degree for the rounded corners\n        contract: function(radius, resolution) {\n            var expandedshell = this.expandedShell(radius, resolution, false);\n            var result = this.subtract(expandedshell);\n            result = result.reTesselated();\n            result.properties = this.properties; // keep original properties\n            return result;\n        },\n\n        // cut the solid at a plane, and stretch the cross-section found along plane normal\n        stretchAtPlane: function(normal, point, length) {\n            var plane = CSG.Plane.fromNormalAndPoint(normal, point);\n            var onb = new CSG.OrthoNormalBasis(plane);\n            var crosssect = this.sectionCut(onb);\n            var midpiece = crosssect.extrudeInOrthonormalBasis(onb, length);\n            var piece1 = this.cutByPlane(plane);\n            var piece2 = this.cutByPlane(plane.flipped());\n            var result = piece1.union([midpiece, piece2.translate(plane.normal.times(length))]);\n            return result;\n        },\n\n\n        // Create the expanded shell of the solid:\n        // All faces are extruded to get a thickness of 2*radius\n        // Cylinders are constructed around every side\n        // Spheres are placed on every vertex\n        // unionWithThis: if true, the resulting solid will be united with 'this' solid;\n        //   the result is a true expansion of the solid\n        //   If false, returns only the shell\n        expandedShell: function(radius, resolution, unionWithThis) {\n            var csg = this.reTesselated();\n            var result;\n            if (unionWithThis) {\n                result = csg;\n            } else {\n                result = new CSG();\n            }\n\n            // first extrude all polygons:\n            csg.polygons.map(function(polygon) {\n                var extrudevector = polygon.plane.normal.unit().times(2 * radius);\n                var translatedpolygon = polygon.translate(extrudevector.times(-0.5));\n                var extrudedface = translatedpolygon.extrude(extrudevector);\n                result = result.unionSub(extrudedface, false, false);\n            });\n\n            // Make a list of all unique vertex pairs (i.e. all sides of the solid)\n            // For each vertex pair we collect the following:\n            //   v1: first coordinate\n            //   v2: second coordinate\n            //   planenormals: array of normal vectors of all planes touching this side\n            var vertexpairs = {}; // map of 'vertex pair tag' to {v1, v2, planenormals}\n            csg.polygons.map(function(polygon) {\n                var numvertices = polygon.vertices.length;\n                var prevvertex = polygon.vertices[numvertices - 1];\n                var prevvertextag = prevvertex.getTag();\n                for (var i = 0; i < numvertices; i++) {\n                    var vertex = polygon.vertices[i];\n                    var vertextag = vertex.getTag();\n                    var vertextagpair;\n                    if (vertextag < prevvertextag) {\n                        vertextagpair = vertextag + \"-\" + prevvertextag;\n                    } else {\n                        vertextagpair = prevvertextag + \"-\" + vertextag;\n                    }\n                    var obj;\n                    if (vertextagpair in vertexpairs) {\n                        obj = vertexpairs[vertextagpair];\n                    } else {\n                        obj = {\n                            v1: prevvertex,\n                            v2: vertex,\n                            planenormals: []\n                        };\n                        vertexpairs[vertextagpair] = obj;\n                    }\n                    obj.planenormals.push(polygon.plane.normal);\n\n                    prevvertextag = vertextag;\n                    prevvertex = vertex;\n                }\n            });\n\n            // now construct a cylinder on every side\n            // The cylinder is always an approximation of a true cylinder: it will have <resolution> polygons\n            // around the sides. We will make sure though that the cylinder will have an edge at every\n            // face that touches this side. This ensures that we will get a smooth fill even\n            // if two edges are at, say, 10 degrees and the resolution is low.\n            // Note: the result is not retesselated yet but it really should be!\n            for (var vertextagpair in vertexpairs) {\n                var vertexpair = vertexpairs[vertextagpair],\n                    startpoint = vertexpair.v1.pos,\n                    endpoint = vertexpair.v2.pos,\n                    // our x,y and z vectors:\n                    zbase = endpoint.minus(startpoint).unit(),\n                    xbase = vertexpair.planenormals[0].unit(),\n                    ybase = xbase.cross(zbase),\n\n                    // make a list of angles that the cylinder should traverse:\n                    angles = [];\n\n                // first of all equally spaced around the cylinder:\n                for (var i = 0; i < resolution; i++) {\n                    angles.push(i * Math.PI * 2 / resolution);\n                }\n\n                // and also at every normal of all touching planes:\n                for (var i = 0, iMax = vertexpair.planenormals.length; i < iMax; i++) {\n                    var planenormal = vertexpair.planenormals[i],\n                        si = ybase.dot(planenormal),\n                        co = xbase.dot(planenormal),\n                        angle = Math.atan2(si, co);\n\n                    if (angle < 0) angle += Math.PI * 2;\n                    angles.push(angle);\n                    angle = Math.atan2(-si, -co);\n                    if (angle < 0) angle += Math.PI * 2;\n                    angles.push(angle);\n                }\n\n                // this will result in some duplicate angles but we will get rid of those later.\n                // Sort:\n                angles = angles.sort(fnNumberSort);\n\n                // Now construct the cylinder by traversing all angles:\n                var numangles = angles.length,\n                    prevp1, prevp2,\n                    startfacevertices = [],\n                    endfacevertices = [],\n                    polygons = [];\n                for (var i = -1; i < numangles; i++) {\n                    var angle = angles[(i < 0) ? (i + numangles) : i],\n                        si = Math.sin(angle),\n                        co = Math.cos(angle),\n                        p = xbase.times(co * radius).plus(ybase.times(si * radius)),\n                        p1 = startpoint.plus(p),\n                        p2 = endpoint.plus(p),\n                        skip = false;\n                    if (i >= 0) {\n                        if (p1.distanceTo(prevp1) < 1e-5) {\n                            skip = true;\n                        }\n                    }\n                    if (!skip) {\n                        if (i >= 0) {\n                            startfacevertices.push(new CSG.Vertex(p1));\n                            endfacevertices.push(new CSG.Vertex(p2));\n                            var polygonvertices = [\n                                new CSG.Vertex(prevp2),\n                                new CSG.Vertex(p2),\n                                new CSG.Vertex(p1),\n                                new CSG.Vertex(prevp1)\n                            ];\n                            var polygon = new CSG.Polygon(polygonvertices);\n                            polygons.push(polygon);\n                        }\n                        prevp1 = p1;\n                        prevp2 = p2;\n                    }\n                }\n                endfacevertices.reverse();\n                polygons.push(new CSG.Polygon(startfacevertices));\n                polygons.push(new CSG.Polygon(endfacevertices));\n                var cylinder = CSG.fromPolygons(polygons);\n                result = result.unionSub(cylinder, false, false);\n            }\n\n            // make a list of all unique vertices\n            // For each vertex we also collect the list of normals of the planes touching the vertices\n            var vertexmap = {};\n            csg.polygons.map(function(polygon) {\n                polygon.vertices.map(function(vertex) {\n                    var vertextag = vertex.getTag();\n                    var obj;\n                    if (vertextag in vertexmap) {\n                        obj = vertexmap[vertextag];\n                    } else {\n                        obj = {\n                            pos: vertex.pos,\n                            normals: []\n                        };\n                        vertexmap[vertextag] = obj;\n                    }\n                    obj.normals.push(polygon.plane.normal);\n                });\n            });\n\n            // and build spheres at each vertex\n            // We will try to set the x and z axis to the normals of 2 planes\n            // This will ensure that our sphere tesselation somewhat matches 2 planes\n            for (var vertextag in vertexmap) {\n                var vertexobj = vertexmap[vertextag];\n                // use the first normal to be the x axis of our sphere:\n                var xaxis = vertexobj.normals[0].unit();\n                // and find a suitable z axis. We will use the normal which is most perpendicular to the x axis:\n                var bestzaxis = null;\n                var bestzaxisorthogonality = 0;\n                for (var i = 1; i < vertexobj.normals.length; i++) {\n                    var normal = vertexobj.normals[i].unit();\n                    var cross = xaxis.cross(normal);\n                    var crosslength = cross.length();\n                    if (crosslength > 0.05) {\n                        if (crosslength > bestzaxisorthogonality) {\n                            bestzaxisorthogonality = crosslength;\n                            bestzaxis = normal;\n                        }\n                    }\n                }\n                if (!bestzaxis) {\n                    bestzaxis = xaxis.randomNonParallelVector();\n                }\n                var yaxis = xaxis.cross(bestzaxis).unit();\n                var zaxis = yaxis.cross(xaxis);\n                var sphere = CSG.sphere({\n                    center: vertexobj.pos,\n                    radius: radius,\n                    resolution: resolution,\n                    axes: [xaxis, yaxis, zaxis]\n                });\n                result = result.unionSub(sphere, false, false);\n            }\n\n            return result;\n        },\n\n        canonicalized: function() {\n            if (this.isCanonicalized) {\n                return this;\n            } else {\n                var factory = new CSG.fuzzyCSGFactory();\n                var result = factory.getCSG(this);\n                result.isCanonicalized = true;\n                result.isRetesselated = this.isRetesselated;\n                result.properties = this.properties; // keep original properties\n                return result;\n            }\n        },\n\n        reTesselated: function() {\n            if (this.isRetesselated) {\n                return this;\n            } else {\n                var csg = this;\n                var polygonsPerPlane = {};\n                var isCanonicalized = csg.isCanonicalized;\n                var fuzzyfactory = new CSG.fuzzyCSGFactory();\n                csg.polygons.map(function(polygon) {\n                    var plane = polygon.plane;\n                    var shared = polygon.shared;\n                    if (!isCanonicalized) {\n                        // in order to identify to polygons having the same plane, we need to canonicalize the planes\n                        // We don't have to do a full canonizalization (including vertices), to save time only do the planes and the shared data:\n                        plane = fuzzyfactory.getPlane(plane);\n                        shared = fuzzyfactory.getPolygonShared(shared);\n                    }\n                    var tag = plane.getTag() + \"/\" + shared.getTag();\n                    if (!(tag in polygonsPerPlane)) {\n                        polygonsPerPlane[tag] = [polygon];\n                    } else {\n                        polygonsPerPlane[tag].push(polygon);\n                    }\n                });\n                var destpolygons = [];\n                for (var planetag in polygonsPerPlane) {\n                    var sourcepolygons = polygonsPerPlane[planetag];\n                    if (sourcepolygons.length < 2) {\n                        destpolygons = destpolygons.concat(sourcepolygons);\n                    } else {\n                        var retesselayedpolygons = [];\n                        CSG.reTesselateCoplanarPolygons(sourcepolygons, retesselayedpolygons);\n                        destpolygons = destpolygons.concat(retesselayedpolygons);\n                    }\n                }\n                var result = CSG.fromPolygons(destpolygons);\n                result.isRetesselated = true;\n                // result = result.canonicalized();\n                result.properties = this.properties; // keep original properties\n                return result;\n            }\n        },\n\n        // returns an array of two CSG.Vector3Ds (minimum coordinates and maximum coordinates)\n        getBounds: function() {\n            if (!this.cachedBoundingBox) {\n                var minpoint = new CSG.Vector3D(0, 0, 0);\n                var maxpoint = new CSG.Vector3D(0, 0, 0);\n                var polygons = this.polygons;\n                var numpolygons = polygons.length;\n                for (var i = 0; i < numpolygons; i++) {\n                    var polygon = polygons[i];\n                    var bounds = polygon.boundingBox();\n                    if (i === 0) {\n                        minpoint = bounds[0];\n                        maxpoint = bounds[1];\n                    } else {\n                        minpoint = minpoint.min(bounds[0]);\n                        maxpoint = maxpoint.max(bounds[1]);\n                    }\n                }\n                this.cachedBoundingBox = [minpoint, maxpoint];\n            }\n            return this.cachedBoundingBox;\n        },\n\n        // returns true if there is a possibility that the two solids overlap\n        // returns false if we can be sure that they do not overlap\n        mayOverlap: function(csg) {\n            if ((this.polygons.length === 0) || (csg.polygons.length === 0)) {\n                return false;\n            } else {\n                var mybounds = this.getBounds();\n                var otherbounds = csg.getBounds();\n                if (mybounds[1].x < otherbounds[0].x) return false;\n                if (mybounds[0].x > otherbounds[1].x) return false;\n                if (mybounds[1].y < otherbounds[0].y) return false;\n                if (mybounds[0].y > otherbounds[1].y) return false;\n                if (mybounds[1].z < otherbounds[0].z) return false;\n                if (mybounds[0].z > otherbounds[1].z) return false;\n                return true;\n            }\n        },\n\n        // Cut the solid by a plane. Returns the solid on the back side of the plane\n        cutByPlane: function(plane) {\n            if (this.polygons.length === 0) {\n                return new CSG();\n            }\n            // Ideally we would like to do an intersection with a polygon of inifinite size\n            // but this is not supported by our implementation. As a workaround, we will create\n            // a cube, with one face on the plane, and a size larger enough so that the entire\n            // solid fits in the cube.\n            // find the max distance of any vertex to the center of the plane:\n            var planecenter = plane.normal.times(plane.w);\n            var maxdistance = 0;\n            this.polygons.map(function(polygon) {\n                polygon.vertices.map(function(vertex) {\n                    var distance = vertex.pos.distanceToSquared(planecenter);\n                    if (distance > maxdistance) maxdistance = distance;\n                });\n            });\n            maxdistance = Math.sqrt(maxdistance);\n            maxdistance *= 1.01; // make sure it's really larger\n            // Now build a polygon on the plane, at any point farther than maxdistance from the plane center:\n            var vertices = [];\n            var orthobasis = new CSG.OrthoNormalBasis(plane);\n            vertices.push(new CSG.Vertex(orthobasis.to3D(new CSG.Vector2D(maxdistance, -maxdistance))));\n            vertices.push(new CSG.Vertex(orthobasis.to3D(new CSG.Vector2D(-maxdistance, -maxdistance))));\n            vertices.push(new CSG.Vertex(orthobasis.to3D(new CSG.Vector2D(-maxdistance, maxdistance))));\n            vertices.push(new CSG.Vertex(orthobasis.to3D(new CSG.Vector2D(maxdistance, maxdistance))));\n            var polygon = new CSG.Polygon(vertices, null, plane.flipped());\n\n            // and extrude the polygon into a cube, backwards of the plane:\n            var cube = polygon.extrude(plane.normal.times(-maxdistance));\n\n            // Now we can do the intersection:\n            var result = this.intersect(cube);\n            result.properties = this.properties; // keep original properties\n            return result;\n        },\n\n        // Connect a solid to another solid, such that two CSG.Connectors become connected\n        //   myConnector: a CSG.Connector of this solid\n        //   otherConnector: a CSG.Connector to which myConnector should be connected\n        //   mirror: false: the 'axis' vectors of the connectors should point in the same direction\n        //           true: the 'axis' vectors of the connectors should point in opposite direction\n        //   normalrotation: degrees of rotation between the 'normal' vectors of the two\n        //                   connectors\n        connectTo: function(myConnector, otherConnector, mirror, normalrotation) {\n            var matrix = myConnector.getTransformationTo(otherConnector, mirror, normalrotation);\n            return this.transform(matrix);\n        },\n\n        // set the .shared property of all polygons\n        // Returns a new CSG solid, the original is unmodified!\n        setShared: function(shared) {\n            var polygons = this.polygons.map(function(p) {\n                return new CSG.Polygon(p.vertices, shared, p.plane);\n            });\n            var result = CSG.fromPolygons(polygons);\n            result.properties = this.properties; // keep original properties\n            result.isRetesselated = this.isRetesselated;\n            result.isCanonicalized = this.isCanonicalized;\n            return result;\n        },\n\n        setColor: function(args) {\n            var newshared = CSG.Polygon.Shared.fromColor.apply(this, arguments);\n            return this.setShared(newshared);\n        },\n\n        toCompactBinary: function() {\n            var csg = this.canonicalized(),\n                numpolygons = csg.polygons.length,\n                numpolygonvertices = 0,\n                numvertices = 0,\n                vertexmap = {},\n                vertices = [],\n                numplanes = 0,\n                planemap = {},\n                polygonindex = 0,\n                planes = [],\n                shareds = [],\n                sharedmap = {},\n                numshared = 0;\n            // for (var i = 0, iMax = csg.polygons.length; i < iMax; i++) {\n            //  var p = csg.polygons[i];\n            //  for (var j = 0, jMax = p.length; j < jMax; j++) {\n            //      ++numpolygonvertices;\n            //      var vertextag = p[j].getTag();\n            //      if(!(vertextag in vertexmap)) {\n            //          vertexmap[vertextag] = numvertices++;\n            //          vertices.push(p[j]);\n            //      }\n            //  }\n            csg.polygons.map(function(p) {\n                p.vertices.map(function(v) {\n                    ++numpolygonvertices;\n                    var vertextag = v.getTag();\n                    if (!(vertextag in vertexmap)) {\n                        vertexmap[vertextag] = numvertices++;\n                        vertices.push(v);\n                    }\n                });\n\n                var planetag = p.plane.getTag();\n                if (!(planetag in planemap)) {\n                    planemap[planetag] = numplanes++;\n                    planes.push(p.plane);\n                }\n                var sharedtag = p.shared.getTag();\n                if (!(sharedtag in sharedmap)) {\n                    sharedmap[sharedtag] = numshared++;\n                    shareds.push(p.shared);\n                }\n            });\n            var numVerticesPerPolygon = new Uint32Array(numpolygons),\n                polygonSharedIndexes = new Uint32Array(numpolygons),\n                polygonVertices = new Uint32Array(numpolygonvertices),\n                polygonPlaneIndexes = new Uint32Array(numpolygons),\n                vertexData = new Float64Array(numvertices * 3),\n                planeData = new Float64Array(numplanes * 4),\n                polygonVerticesIndex = 0;\n            for (var polygonindex = 0; polygonindex < numpolygons; ++polygonindex) {\n                var p = csg.polygons[polygonindex];\n                numVerticesPerPolygon[polygonindex] = p.vertices.length;\n                p.vertices.map(function(v) {\n                    var vertextag = v.getTag();\n                    var vertexindex = vertexmap[vertextag];\n                    polygonVertices[polygonVerticesIndex++] = vertexindex;\n                });\n                var planetag = p.plane.getTag();\n                var planeindex = planemap[planetag];\n                polygonPlaneIndexes[polygonindex] = planeindex;\n                var sharedtag = p.shared.getTag();\n                var sharedindex = sharedmap[sharedtag];\n                polygonSharedIndexes[polygonindex] = sharedindex;\n            }\n            var verticesArrayIndex = 0;\n            vertices.map(function(v) {\n                var pos = v.pos;\n                vertexData[verticesArrayIndex++] = pos._x;\n                vertexData[verticesArrayIndex++] = pos._y;\n                vertexData[verticesArrayIndex++] = pos._z;\n            });\n            var planesArrayIndex = 0;\n            planes.map(function(p) {\n                var normal = p.normal;\n                planeData[planesArrayIndex++] = normal._x;\n                planeData[planesArrayIndex++] = normal._y;\n                planeData[planesArrayIndex++] = normal._z;\n                planeData[planesArrayIndex++] = p.w;\n            });\n            var result = {\n                \"class\": \"CSG\",\n                numPolygons: numpolygons,\n                numVerticesPerPolygon: numVerticesPerPolygon,\n                polygonPlaneIndexes: polygonPlaneIndexes,\n                polygonSharedIndexes: polygonSharedIndexes,\n                polygonVertices: polygonVertices,\n                vertexData: vertexData,\n                planeData: planeData,\n                shared: shareds\n            };\n            return result;\n        },\n\n        // For debugging\n        // Creates a new solid with a tiny cube at every vertex of the source solid\n        toPointCloud: function(cuberadius) {\n            var csg = this.reTesselated();\n\n            var result = new CSG();\n\n            // make a list of all unique vertices\n            // For each vertex we also collect the list of normals of the planes touching the vertices\n            var vertexmap = {};\n            csg.polygons.map(function(polygon) {\n                polygon.vertices.map(function(vertex) {\n                    vertexmap[vertex.getTag()] = vertex.pos;\n                });\n            });\n\n            for (var vertextag in vertexmap) {\n                var pos = vertexmap[vertextag];\n                var cube = CSG.cube({\n                    center: pos,\n                    radius: cuberadius\n                });\n                result = result.unionSub(cube, false, false);\n            }\n            result = result.reTesselated();\n            return result;\n        },\n\n        // Get the transformation that transforms this CSG such that it is lying on the z=0 plane,\n        // as flat as possible (i.e. the least z-height).\n        // So that it is in an orientation suitable for CNC milling\n        getTransformationAndInverseTransformationToFlatLying: function() {\n            if (this.polygons.length === 0) {\n                var m = new CSG.Matrix4x4(); // unity\n                return [m,m];\n            } else {\n                // get a list of unique planes in the CSG:\n                var csg = this.canonicalized();\n                var planemap = {};\n                csg.polygons.map(function(polygon) {\n                    planemap[polygon.plane.getTag()] = polygon.plane;\n                });\n                // try each plane in the CSG and find the plane that, when we align it flat onto z=0,\n                // gives the least height in z-direction.\n                // If two planes give the same height, pick the plane that originally had a normal closest\n                // to [0,0,-1].\n                var xvector = new CSG.Vector3D(1, 0, 0);\n                var yvector = new CSG.Vector3D(0, 1, 0);\n                var zvector = new CSG.Vector3D(0, 0, 1);\n                var z0connectorx = new CSG.Connector([0, 0, 0], [0, 0, -1], xvector);\n                var z0connectory = new CSG.Connector([0, 0, 0], [0, 0, -1], yvector);\n                var isfirst = true;\n                var minheight = 0;\n                var maxdotz = 0;\n                var besttransformation, bestinversetransformation;\n                for (var planetag in planemap) {\n                    var plane = planemap[planetag];\n                    var pointonplane = plane.normal.times(plane.w);\n                    var transformation, inversetransformation;\n                    // We need a normal vecrtor for the transformation\n                    // determine which is more perpendicular to the plane normal: x or y?\n                    // we will align this as much as possible to the x or y axis vector\n                    var xorthogonality = plane.normal.cross(xvector).length();\n                    var yorthogonality = plane.normal.cross(yvector).length();\n                    if (xorthogonality > yorthogonality) {\n                        // x is better:\n                        var planeconnector = new CSG.Connector(pointonplane, plane.normal, xvector);\n                        transformation = planeconnector.getTransformationTo(z0connectorx, false, 0);\n                        inversetransformation = z0connectorx.getTransformationTo(planeconnector, false, 0);\n                    } else {\n                        // y is better:\n                        var planeconnector = new CSG.Connector(pointonplane, plane.normal, yvector);\n                        transformation = planeconnector.getTransformationTo(z0connectory, false, 0);\n                        inversetransformation = z0connectory.getTransformationTo(planeconnector, false, 0);\n                    }\n                    var transformedcsg = csg.transform(transformation);\n                    var dotz = -plane.normal.dot(zvector);\n                    var bounds = transformedcsg.getBounds();\n                    var zheight = bounds[1].z - bounds[0].z;\n                    var isbetter = isfirst;\n                    if (!isbetter) {\n                        if (zheight < minheight) {\n                            isbetter = true;\n                        } else if (zheight == minheight) {\n                            if (dotz > maxdotz) isbetter = true;\n                        }\n                    }\n                    if (isbetter) {\n                        // translate the transformation around the z-axis and onto the z plane:\n                        var translation = new CSG.Vector3D([-0.5 * (bounds[1].x + bounds[0].x), -0.5 * (bounds[1].y + bounds[0].y), -bounds[0].z]);\n                        transformation = transformation.multiply(CSG.Matrix4x4.translation(translation));\n                        inversetransformation = CSG.Matrix4x4.translation(translation.negated()).multiply(inversetransformation);\n                        minheight = zheight;\n                        maxdotz = dotz;\n                        besttransformation = transformation;\n                        bestinversetransformation = inversetransformation;\n                    }\n                    isfirst = false;\n                }\n                return [besttransformation, bestinversetransformation];\n            }\n        },\n\n        getTransformationToFlatLying: function() {\n            var result = this.getTransformationAndInverseTransformationToFlatLying();\n            return result[0];\n        },\n\n        lieFlat: function() {\n            var transformation = this.getTransformationToFlatLying();\n            return this.transform(transformation);\n        },\n\n        // project the 3D CSG onto a plane\n        // This returns a 2D CAG with the 'shadow' shape of the 3D solid when projected onto the\n        // plane represented by the orthonormal basis\n        projectToOrthoNormalBasis: function(orthobasis) {\n            var EPS = 1e-5;\n            var cags = [];\n            this.polygons.filter(function(p) {\n                    // only return polys in plane, others may disturb result\n                    return p.plane.normal.minus(orthobasis.plane.normal).lengthSquared() < EPS*EPS;\n                })\n                .map(function(polygon) {\n                    var cag = polygon.projectToOrthoNormalBasis(orthobasis);\n                    if (cag.sides.length > 0) {\n                        cags.push(cag);\n                    }\n            });\n            var result = new CAG().union(cags);\n            return result;\n        },\n\n        sectionCut: function(orthobasis) {\n            var EPS = 1e-5;\n            var plane1 = orthobasis.plane;\n            var plane2 = orthobasis.plane.flipped();\n            plane1 = new CSG.Plane(plane1.normal, plane1.w);\n            plane2 = new CSG.Plane(plane2.normal, plane2.w + 5*EPS);\n            var cut3d = this.cutByPlane(plane1);\n            cut3d = cut3d.cutByPlane(plane2);\n            return cut3d.projectToOrthoNormalBasis(orthobasis);\n        },\n\n        /*\n         fixTJunctions:\n\n         Suppose we have two polygons ACDB and EDGF:\n\n          A-----B\n          |     |\n          |     E--F\n          |     |  |\n          C-----D--G\n\n         Note that vertex E forms a T-junction on the side BD. In this case some STL slicers will complain\n         that the solid is not watertight. This is because the watertightness check is done by checking if\n         each side DE is matched by another side ED.\n\n         This function will return a new solid with ACDB replaced by ACDEB\n\n         Note that this can create polygons that are slightly non-convex (due to rounding errors). Therefore the result should\n         not be used for further CSG operations!\n         */\n        fixTJunctions: function() {\n            var csg = this.canonicalized();\n            var sidemap = {};\n            for (var polygonindex = 0; polygonindex < csg.polygons.length; polygonindex++) {\n                var polygon = csg.polygons[polygonindex];\n                var numvertices = polygon.vertices.length;\n                if (numvertices >= 3) // should be true\n                {\n                    var vertex = polygon.vertices[0];\n                    var vertextag = vertex.getTag();\n                    for (var vertexindex = 0; vertexindex < numvertices; vertexindex++) {\n                        var nextvertexindex = vertexindex + 1;\n                        if (nextvertexindex == numvertices) nextvertexindex = 0;\n                        var nextvertex = polygon.vertices[nextvertexindex];\n                        var nextvertextag = nextvertex.getTag();\n                        var sidetag = vertextag + \"/\" + nextvertextag;\n                        var reversesidetag = nextvertextag + \"/\" + vertextag;\n                        if (reversesidetag in sidemap) {\n                            // this side matches the same side in another polygon. Remove from sidemap:\n                            var ar = sidemap[reversesidetag];\n                            ar.splice(-1, 1);\n                            if (ar.length === 0) {\n                                delete sidemap[reversesidetag];\n                            }\n                        } else {\n                            var sideobj = {\n                                vertex0: vertex,\n                                vertex1: nextvertex,\n                                polygonindex: polygonindex\n                            };\n                            if (!(sidetag in sidemap)) {\n                                sidemap[sidetag] = [sideobj];\n                            } else {\n                                sidemap[sidetag].push(sideobj);\n                            }\n                        }\n                        vertex = nextvertex;\n                        vertextag = nextvertextag;\n                    }\n                }\n            }\n            // now sidemap contains 'unmatched' sides\n            // i.e. side AB in one polygon does not have a matching side BA in another polygon\n            var vertextag2sidestart = {};\n            var vertextag2sideend = {};\n            var sidestocheck = {};\n            var sidemapisempty = true;\n            for (var sidetag in sidemap) {\n                sidemapisempty = false;\n                sidestocheck[sidetag] = true;\n                sidemap[sidetag].map(function(sideobj) {\n                    var starttag = sideobj.vertex0.getTag();\n                    var endtag = sideobj.vertex1.getTag();\n                    if (starttag in vertextag2sidestart) {\n                        vertextag2sidestart[starttag].push(sidetag);\n                    } else {\n                        vertextag2sidestart[starttag] = [sidetag];\n                    }\n                    if (endtag in vertextag2sideend) {\n                        vertextag2sideend[endtag].push(sidetag);\n                    } else {\n                        vertextag2sideend[endtag] = [sidetag];\n                    }\n                });\n            }\n\n            if (!sidemapisempty) {\n                // make a copy of the polygons array, since we are going to modify it:\n                var polygons = csg.polygons.slice(0);\n\n                function addSide(vertex0, vertex1, polygonindex) {\n                    var starttag = vertex0.getTag();\n                    var endtag = vertex1.getTag();\n                    if (starttag == endtag) throw new Error(\"Assertion failed\");\n                    var newsidetag = starttag + \"/\" + endtag;\n                    var reversesidetag = endtag + \"/\" + starttag;\n                    if (reversesidetag in sidemap) {\n                        // we have a matching reverse oriented side.\n                        // Instead of adding the new side, cancel out the reverse side:\n                        // console.log(\"addSide(\"+newsidetag+\") has reverse side:\");\n                        deleteSide(vertex1, vertex0, null);\n                        return null;\n                    }\n                    //  console.log(\"addSide(\"+newsidetag+\")\");\n                    var newsideobj = {\n                        vertex0: vertex0,\n                        vertex1: vertex1,\n                        polygonindex: polygonindex\n                    };\n                    if (!(newsidetag in sidemap)) {\n                        sidemap[newsidetag] = [newsideobj];\n                    } else {\n                        sidemap[newsidetag].push(newsideobj);\n                    }\n                    if (starttag in vertextag2sidestart) {\n                        vertextag2sidestart[starttag].push(newsidetag);\n                    } else {\n                        vertextag2sidestart[starttag] = [newsidetag];\n                    }\n                    if (endtag in vertextag2sideend) {\n                        vertextag2sideend[endtag].push(newsidetag);\n                    } else {\n                        vertextag2sideend[endtag] = [newsidetag];\n                    }\n                    return newsidetag;\n                }\n\n                function deleteSide(vertex0, vertex1, polygonindex) {\n                    var starttag = vertex0.getTag();\n                    var endtag = vertex1.getTag();\n                    var sidetag = starttag + \"/\" + endtag;\n                    // console.log(\"deleteSide(\"+sidetag+\")\");\n                    if (!(sidetag in sidemap)) throw new Error(\"Assertion failed\");\n                    var idx = -1;\n                    var sideobjs = sidemap[sidetag];\n                    for (var i = 0; i < sideobjs.length; i++) {\n                        var sideobj = sideobjs[i];\n                        if (sideobj.vertex0 != vertex0) continue;\n                        if (sideobj.vertex1 != vertex1) continue;\n                        if (polygonindex !== null) {\n                            if (sideobj.polygonindex != polygonindex) continue;\n                        }\n                        idx = i;\n                        break;\n                    }\n                    if (idx < 0) throw new Error(\"Assertion failed\");\n                    sideobjs.splice(idx, 1);\n                    if (sideobjs.length === 0) {\n                        delete sidemap[sidetag];\n                    }\n                    idx = vertextag2sidestart[starttag].indexOf(sidetag);\n                    if (idx < 0) throw new Error(\"Assertion failed\");\n                    vertextag2sidestart[starttag].splice(idx, 1);\n                    if (vertextag2sidestart[starttag].length === 0) {\n                        delete vertextag2sidestart[starttag];\n                    }\n\n                    idx = vertextag2sideend[endtag].indexOf(sidetag);\n                    if (idx < 0) throw new Error(\"Assertion failed\");\n                    vertextag2sideend[endtag].splice(idx, 1);\n                    if (vertextag2sideend[endtag].length === 0) {\n                        delete vertextag2sideend[endtag];\n                    }\n                }\n\n\n                while (true) {\n                    var sidemapisempty = true;\n                    for (var sidetag in sidemap) {\n                        sidemapisempty = false;\n                        sidestocheck[sidetag] = true;\n                    }\n                    if (sidemapisempty) break;\n                    var donesomething = false;\n                    while (true) {\n                        var sidetagtocheck = null;\n                        for (var sidetag in sidestocheck) {\n                            sidetagtocheck = sidetag;\n                            break;\n                        }\n                        if (sidetagtocheck === null) break; // sidestocheck is empty, we're done!\n                        var donewithside = true;\n                        if (sidetagtocheck in sidemap) {\n                            var sideobjs = sidemap[sidetagtocheck];\n                            if (sideobjs.length === 0) throw new Error(\"Assertion failed\");\n                            var sideobj = sideobjs[0];\n                            for (var directionindex = 0; directionindex < 2; directionindex++) {\n                                var startvertex = (directionindex === 0) ? sideobj.vertex0 : sideobj.vertex1;\n                                var endvertex = (directionindex === 0) ? sideobj.vertex1 : sideobj.vertex0;\n                                var startvertextag = startvertex.getTag();\n                                var endvertextag = endvertex.getTag();\n                                var matchingsides = [];\n                                if (directionindex === 0) {\n                                    if (startvertextag in vertextag2sideend) {\n                                        matchingsides = vertextag2sideend[startvertextag];\n                                    }\n                                } else {\n                                    if (startvertextag in vertextag2sidestart) {\n                                        matchingsides = vertextag2sidestart[startvertextag];\n                                    }\n                                }\n                                for (var matchingsideindex = 0; matchingsideindex < matchingsides.length; matchingsideindex++) {\n                                    var matchingsidetag = matchingsides[matchingsideindex];\n                                    var matchingside = sidemap[matchingsidetag][0];\n                                    var matchingsidestartvertex = (directionindex === 0) ? matchingside.vertex0 : matchingside.vertex1;\n                                    var matchingsideendvertex = (directionindex === 0) ? matchingside.vertex1 : matchingside.vertex0;\n                                    var matchingsidestartvertextag = matchingsidestartvertex.getTag();\n                                    var matchingsideendvertextag = matchingsideendvertex.getTag();\n                                    if (matchingsideendvertextag != startvertextag) throw new Error(\"Assertion failed\");\n                                    if (matchingsidestartvertextag == endvertextag) {\n                                        // matchingside cancels sidetagtocheck\n                                        deleteSide(startvertex, endvertex, null);\n                                        deleteSide(endvertex, startvertex, null);\n                                        donewithside = false;\n                                        directionindex = 2; // skip reverse direction check\n                                        donesomething = true;\n                                        break;\n                                    } else {\n                                        var startpos = startvertex.pos;\n                                        var endpos = endvertex.pos;\n                                        var checkpos = matchingsidestartvertex.pos;\n                                        var direction = checkpos.minus(startpos);\n                                        // Now we need to check if endpos is on the line startpos-checkpos:\n                                        var t = endpos.minus(startpos).dot(direction) / direction.dot(direction);\n                                        if ((t > 0) && (t < 1)) {\n                                            var closestpoint = startpos.plus(direction.times(t));\n                                            var distancesquared = closestpoint.distanceToSquared(endpos);\n                                            if (distancesquared < 1e-10) {\n                                                // Yes it's a t-junction! We need to split matchingside in two:\n                                                var polygonindex = matchingside.polygonindex;\n                                                var polygon = polygons[polygonindex];\n                                                // find the index of startvertextag in polygon:\n                                                var insertionvertextag = matchingside.vertex1.getTag();\n                                                var insertionvertextagindex = -1;\n                                                for (var i = 0; i < polygon.vertices.length; i++) {\n                                                    if (polygon.vertices[i].getTag() == insertionvertextag) {\n                                                        insertionvertextagindex = i;\n                                                        break;\n                                                    }\n                                                }\n                                                if (insertionvertextagindex < 0) throw new Error(\"Assertion failed\");\n                                                // split the side by inserting the vertex:\n                                                var newvertices = polygon.vertices.slice(0);\n                                                newvertices.splice(insertionvertextagindex, 0, endvertex);\n                                                var newpolygon = new CSG.Polygon(newvertices, polygon.shared /*polygon.plane*/ );\n\n// FIX\n                                               //calculate plane with differents point\n                                                if(isNaN(newpolygon.plane.w)){\n\n                                                    var found = false,\n                                                        loop = function(callback){\n                                                            newpolygon.vertices.forEach(function(item){\n                                                                if(found) return;\n                                                                callback(item);\n                                                            })\n                                                        };\n\n                                                    loop(function(a){\n                                                        loop(function(b) {\n                                                            loop(function (c) {\n                                                                newpolygon.plane = CSG.Plane.fromPoints(a.pos, b.pos, c.pos)\n                                                                if(!isNaN(newpolygon.plane.w)) {\n                                                                    found = true;\n                                                                }\n                                                            })\n                                                        })\n                                                    })\n                                                }\n// FIX\n\n                                                polygons[polygonindex] = newpolygon;\n\n                                                // remove the original sides from our maps:\n                                                // deleteSide(sideobj.vertex0, sideobj.vertex1, null);\n                                                deleteSide(matchingside.vertex0, matchingside.vertex1, polygonindex);\n                                                var newsidetag1 = addSide(matchingside.vertex0, endvertex, polygonindex);\n                                                var newsidetag2 = addSide(endvertex, matchingside.vertex1, polygonindex);\n                                                if (newsidetag1 !== null) sidestocheck[newsidetag1] = true;\n                                                if (newsidetag2 !== null) sidestocheck[newsidetag2] = true;\n                                                donewithside = false;\n                                                directionindex = 2; // skip reverse direction check\n                                                donesomething = true;\n                                                break;\n                                            } // if(distancesquared < 1e-10)\n                                        } // if( (t > 0) && (t < 1) )\n                                    } // if(endingstidestartvertextag == endvertextag)\n                                } // for matchingsideindex\n                            } // for directionindex\n                        } // if(sidetagtocheck in sidemap)\n                        if (donewithside) {\n                            delete sidestocheck[sidetag];\n                        }\n                    }\n                    if (!donesomething) break;\n                }\n                var newcsg = CSG.fromPolygons(polygons);\n                newcsg.properties = csg.properties;\n                newcsg.isCanonicalized = true;\n                newcsg.isRetesselated = true;\n                csg = newcsg;\n            } // if(!sidemapisempty)\n            var sidemapisempty = true;\n            for (var sidetag in sidemap) {\n                sidemapisempty = false;\n                break;\n            }\n            if (!sidemapisempty) {\n                // throw new Error(\"!sidemapisempty\");\n            OpenJsCad.log(\"!sidemapisempty\");\n            }\n            return csg;\n        },\n\n        toTriangles: function() {\n            var polygons = [];\n            this.polygons.forEach(function(poly) {\n                var firstVertex = poly.vertices[0];\n                for (var i = poly.vertices.length - 3; i >= 0; i--) {\n                    polygons.push(new CSG.Polygon([\n                            firstVertex, poly.vertices[i + 1], poly.vertices[i + 2]\n                        ],\n                        poly.shared, poly.plane));\n                }\n            });\n            return polygons;\n        },\n\n        // features: string, or array containing 1 or more strings of: 'volume', 'area'\n        // more could be added here (Fourier coeff, moments)\n        getFeatures: function(features) {\n            if (!(features instanceof Array)) {\n                features = [features];\n            }\n            var result = this.toTriangles().map(function(triPoly) {\n                    return triPoly.getTetraFeatures(features);\n                })\n                .reduce(function(pv, v) {\n                    return v.map(function(feat, i) {\n                        return feat + (pv === 0 ? 0 : pv[i]);\n                    });\n                }, 0);\n            return (result.length == 1) ? result[0] : result;\n        }\n    };\n\n    // Parse an option from the options object\n    // If the option is not present, return the default value\n    CSG.parseOption = function(options, optionname, defaultvalue) {\n        var result = defaultvalue;\n        if (options) {\n            if (optionname in options) {\n                result = options[optionname];\n            }\n        }\n        return result;\n    };\n\n    // Parse an option and force into a CSG.Vector3D. If a scalar is passed it is converted\n    // into a vector with equal x,y,z\n    CSG.parseOptionAs3DVector = function(options, optionname, defaultvalue) {\n        var result = CSG.parseOption(options, optionname, defaultvalue);\n        result = new CSG.Vector3D(result);\n        return result;\n    };\n\n    CSG.parseOptionAs3DVectorList = function(options, optionname, defaultvalue) {\n        var result = CSG.parseOption(options, optionname, defaultvalue);\n        return result.map(function(res) {\n            return new CSG.Vector3D(res);\n        });\n    };\n\n    // Parse an option and force into a CSG.Vector2D. If a scalar is passed it is converted\n    // into a vector with equal x,y\n    CSG.parseOptionAs2DVector = function(options, optionname, defaultvalue) {\n        var result = CSG.parseOption(options, optionname, defaultvalue);\n        result = new CSG.Vector2D(result);\n        return result;\n    };\n\n    CSG.parseOptionAsFloat = function(options, optionname, defaultvalue) {\n        var result = CSG.parseOption(options, optionname, defaultvalue);\n        if (typeof(result) == \"string\") {\n            result = Number(result);\n        }\n        if (isNaN(result) || typeof(result) != \"number\") {\n            throw new Error(\"Parameter \" + optionname + \" should be a number\");\n        }\n        return result;\n    };\n\n    CSG.parseOptionAsInt = function(options, optionname, defaultvalue) {\n        var result = CSG.parseOption(options, optionname, defaultvalue);\n        result = Number(Math.floor(result));\n        if (isNaN(result)) {\n            throw new Error(\"Parameter \" + optionname + \" should be a number\");\n        }\n        return result;\n    };\n\n    CSG.parseOptionAsBool = function(options, optionname, defaultvalue) {\n        var result = CSG.parseOption(options, optionname, defaultvalue);\n        if (typeof(result) == \"string\") {\n            if (result == \"true\") result = true;\n            else if (result == \"false\") result = false;\n            else if (result == 0) result = false;\n        }\n        result = !!result;\n        return result;\n    };\n\n    // Construct an axis-aligned solid cuboid.\n    // Parameters:\n    //   center: center of cube (default [0,0,0])\n    //   radius: radius of cube (default [1,1,1]), can be specified as scalar or as 3D vector\n    //\n    // Example code:\n    //\n    //     var cube = CSG.cube({\n    //       center: [0, 0, 0],\n    //       radius: 1\n    //     });\n    CSG.cube = function(options) {\n        var c, r;\n        options = options || {};\n        if (('corner1' in options) || ('corner2' in options)) {\n            if (('center' in options) || ('radius' in options)) {\n                throw new Error(\"cube: should either give a radius and center parameter, or a corner1 and corner2 parameter\")\n            }\n            corner1 = CSG.parseOptionAs3DVector(options, \"corner1\", [0, 0, 0]);\n            corner2 = CSG.parseOptionAs3DVector(options, \"corner2\", [1, 1, 1]);\n            c = corner1.plus(corner2).times(0.5);\n            r = corner2.minus(corner1).times(0.5);\n        } else {\n            c = CSG.parseOptionAs3DVector(options, \"center\", [0, 0, 0]);\n            r = CSG.parseOptionAs3DVector(options, \"radius\", [1, 1, 1]);\n        }\n        r = r.abs(); // negative radii make no sense\n        var result = CSG.fromPolygons([\n            [\n                [0, 4, 6, 2],\n                [-1, 0, 0]\n            ],\n            [\n                [1, 3, 7, 5],\n                [+1, 0, 0]\n            ],\n            [\n                [0, 1, 5, 4],\n                [0, -1, 0]\n            ],\n            [\n                [2, 6, 7, 3],\n                [0, +1, 0]\n            ],\n            [\n                [0, 2, 3, 1],\n                [0, 0, -1]\n            ],\n            [\n                [4, 5, 7, 6],\n                [0, 0, +1]\n            ]\n        ].map(function(info) {\n            //var normal = new CSG.Vector3D(info[1]);\n            //var plane = new CSG.Plane(normal, 1);\n            var vertices = info[0].map(function(i) {\n                var pos = new CSG.Vector3D(\n                    c.x + r.x * (2 * !!(i & 1) - 1), c.y + r.y * (2 * !!(i & 2) - 1), c.z + r.z * (2 * !!(i & 4) - 1));\n                return new CSG.Vertex(pos);\n            });\n            return new CSG.Polygon(vertices, null /* , plane */ );\n        }));\n        result.properties.cube = new CSG.Properties();\n        result.properties.cube.center = new CSG.Vector3D(c);\n        // add 6 connectors, at the centers of each face:\n        result.properties.cube.facecenters = [\n            new CSG.Connector(new CSG.Vector3D([r.x, 0, 0]).plus(c), [1, 0, 0], [0, 0, 1]),\n            new CSG.Connector(new CSG.Vector3D([-r.x, 0, 0]).plus(c), [-1, 0, 0], [0, 0, 1]),\n            new CSG.Connector(new CSG.Vector3D([0, r.y, 0]).plus(c), [0, 1, 0], [0, 0, 1]),\n            new CSG.Connector(new CSG.Vector3D([0, -r.y, 0]).plus(c), [0, -1, 0], [0, 0, 1]),\n            new CSG.Connector(new CSG.Vector3D([0, 0, r.z]).plus(c), [0, 0, 1], [1, 0, 0]),\n            new CSG.Connector(new CSG.Vector3D([0, 0, -r.z]).plus(c), [0, 0, -1], [1, 0, 0])\n        ];\n        return result;\n    };\n\n    // Construct a solid sphere\n    //\n    // Parameters:\n    //   center: center of sphere (default [0,0,0])\n    //   radius: radius of sphere (default 1), must be a scalar\n    //   resolution: determines the number of polygons per 360 degree revolution (default 12)\n    //   axes: (optional) an array with 3 vectors for the x, y and z base vectors\n    //\n    // Example usage:\n    //\n    //     var sphere = CSG.sphere({\n    //       center: [0, 0, 0],\n    //       radius: 2,\n    //       resolution: 32,\n    //     });\n    CSG.sphere = function(options) {\n        options = options || {};\n        var center = CSG.parseOptionAs3DVector(options, \"center\", [0, 0, 0]);\n        var radius = CSG.parseOptionAsFloat(options, \"radius\", 1);\n        var resolution = CSG.parseOptionAsInt(options, \"resolution\", CSG.defaultResolution3D);\n        var xvector, yvector, zvector;\n        if ('axes' in options) {\n            xvector = options.axes[0].unit().times(radius);\n            yvector = options.axes[1].unit().times(radius);\n            zvector = options.axes[2].unit().times(radius);\n        } else {\n            xvector = new CSG.Vector3D([1, 0, 0]).times(radius);\n            yvector = new CSG.Vector3D([0, -1, 0]).times(radius);\n            zvector = new CSG.Vector3D([0, 0, 1]).times(radius);\n        }\n        if (resolution < 4) resolution = 4;\n        var qresolution = Math.round(resolution / 4);\n        var prevcylinderpoint;\n        var polygons = [];\n        for (var slice1 = 0; slice1 <= resolution; slice1++) {\n            var angle = Math.PI * 2.0 * slice1 / resolution;\n            var cylinderpoint = xvector.times(Math.cos(angle)).plus(yvector.times(Math.sin(angle)));\n            if (slice1 > 0) {\n                // cylinder vertices:\n                var vertices = [];\n                var prevcospitch, prevsinpitch;\n                for (var slice2 = 0; slice2 <= qresolution; slice2++) {\n                    var pitch = 0.5 * Math.PI * slice2 / qresolution;\n                    var cospitch = Math.cos(pitch);\n                    var sinpitch = Math.sin(pitch);\n                    if (slice2 > 0) {\n                        vertices = [];\n                        vertices.push(new CSG.Vertex(center.plus(prevcylinderpoint.times(prevcospitch).minus(zvector.times(prevsinpitch)))));\n                        vertices.push(new CSG.Vertex(center.plus(cylinderpoint.times(prevcospitch).minus(zvector.times(prevsinpitch)))));\n                        if (slice2 < qresolution) {\n                            vertices.push(new CSG.Vertex(center.plus(cylinderpoint.times(cospitch).minus(zvector.times(sinpitch)))));\n                        }\n                        vertices.push(new CSG.Vertex(center.plus(prevcylinderpoint.times(cospitch).minus(zvector.times(sinpitch)))));\n                        polygons.push(new CSG.Polygon(vertices));\n                        vertices = [];\n                        vertices.push(new CSG.Vertex(center.plus(prevcylinderpoint.times(prevcospitch).plus(zvector.times(prevsinpitch)))));\n                        vertices.push(new CSG.Vertex(center.plus(cylinderpoint.times(prevcospitch).plus(zvector.times(prevsinpitch)))));\n                        if (slice2 < qresolution) {\n                            vertices.push(new CSG.Vertex(center.plus(cylinderpoint.times(cospitch).plus(zvector.times(sinpitch)))));\n                        }\n                        vertices.push(new CSG.Vertex(center.plus(prevcylinderpoint.times(cospitch).plus(zvector.times(sinpitch)))));\n                        vertices.reverse();\n                        polygons.push(new CSG.Polygon(vertices));\n                    }\n                    prevcospitch = cospitch;\n                    prevsinpitch = sinpitch;\n                }\n            }\n            prevcylinderpoint = cylinderpoint;\n        }\n        var result = CSG.fromPolygons(polygons);\n        result.properties.sphere = new CSG.Properties();\n        result.properties.sphere.center = new CSG.Vector3D(center);\n        result.properties.sphere.facepoint = center.plus(xvector);\n        return result;\n    };\n\n    // Construct a solid cylinder.\n    //\n    // Parameters:\n    //   start: start point of cylinder (default [0, -1, 0])\n    //   end: end point of cylinder (default [0, 1, 0])\n    //   radius: radius of cylinder (default 1), must be a scalar\n    //   resolution: determines the number of polygons per 360 degree revolution (default 12)\n    //\n    // Example usage:\n    //\n    //     var cylinder = CSG.cylinder({\n    //       start: [0, -1, 0],\n    //       end: [0, 1, 0],\n    //       radius: 1,\n    //       resolution: 16\n    //     });\n    CSG.cylinder = function(options) {\n        var s = CSG.parseOptionAs3DVector(options, \"start\", [0, -1, 0]);\n        var e = CSG.parseOptionAs3DVector(options, \"end\", [0, 1, 0]);\n        var r = CSG.parseOptionAsFloat(options, \"radius\", 1);\n        var rEnd = CSG.parseOptionAsFloat(options, \"radiusEnd\", r);\n        var rStart = CSG.parseOptionAsFloat(options, \"radiusStart\", r);\n        var alpha = CSG.parseOptionAsFloat(options, \"sectorAngle\", 360);\n        alpha = alpha > 360 ? alpha % 360 : alpha;\n\n        if ((rEnd < 0) || (rStart < 0)) {\n            throw new Error(\"Radius should be non-negative\");\n        }\n        if ((rEnd === 0) && (rStart === 0)) {\n            throw new Error(\"Either radiusStart or radiusEnd should be positive\");\n        }\n\n        var slices = CSG.parseOptionAsInt(options, \"resolution\", CSG.defaultResolution2D);\n        var ray = e.minus(s);\n        var axisZ = ray.unit(); //, isY = (Math.abs(axisZ.y) > 0.5);\n        var axisX = axisZ.randomNonParallelVector().unit();\n\n        //  var axisX = new CSG.Vector3D(isY, !isY, 0).cross(axisZ).unit();\n        var axisY = axisX.cross(axisZ).unit();\n        var start = new CSG.Vertex(s);\n        var end = new CSG.Vertex(e);\n        var polygons = [];\n\n        function point(stack, slice, radius) {\n            var angle = slice * Math.PI * alpha / 180;\n            var out = axisX.times(Math.cos(angle)).plus(axisY.times(Math.sin(angle)));\n            var pos = s.plus(ray.times(stack)).plus(out.times(radius));\n            return new CSG.Vertex(pos);\n        }\n        if (alpha > 0) {\n            for (var i = 0; i < slices; i++) {\n                var t0 = i / slices,\n                    t1 = (i + 1) / slices;\n                if (rEnd == rStart) {\n                    polygons.push(new CSG.Polygon([start, point(0, t0, rEnd), point(0, t1, rEnd)]));\n                    polygons.push(new CSG.Polygon([point(0, t1, rEnd), point(0, t0, rEnd), point(1, t0, rEnd), point(1, t1, rEnd)]));\n                    polygons.push(new CSG.Polygon([end, point(1, t1, rEnd), point(1, t0, rEnd)]));\n                } else {\n                    if (rStart > 0) {\n                        polygons.push(new CSG.Polygon([start, point(0, t0, rStart), point(0, t1, rStart)]));\n                        polygons.push(new CSG.Polygon([point(0, t0, rStart), point(1, t0, rEnd), point(0, t1, rStart)]));\n                    }\n                    if (rEnd > 0) {\n                        polygons.push(new CSG.Polygon([end, point(1, t1, rEnd), point(1, t0, rEnd)]));\n                        polygons.push(new CSG.Polygon([point(1, t0, rEnd), point(1, t1, rEnd), point(0, t1, rStart)]));\n                    }\n                }\n            }\n            if (alpha < 360) {\n                polygons.push(new CSG.Polygon([start, end, point(0, 0, rStart)]));\n                polygons.push(new CSG.Polygon([point(0, 0, rStart), end, point(1, 0, rEnd)]));\n                polygons.push(new CSG.Polygon([start, point(0, 1, rStart), end]));\n                polygons.push(new CSG.Polygon([point(0, 1, rStart), point(1, 1, rEnd), end]));\n            }\n        }\n        var result = CSG.fromPolygons(polygons);\n        result.properties.cylinder = new CSG.Properties();\n        result.properties.cylinder.start = new CSG.Connector(s, axisZ.negated(), axisX);\n        result.properties.cylinder.end = new CSG.Connector(e, axisZ, axisX);\n        var cylCenter = s.plus(ray.times(0.5));\n        var fptVec = axisX.rotate(s, axisZ, -alpha / 2).times((rStart + rEnd) / 2);\n        var fptVec90 = fptVec.cross(axisZ);\n        // note this one is NOT a face normal for a cone. - It's horizontal from cyl perspective\n        result.properties.cylinder.facepointH = new CSG.Connector(cylCenter.plus(fptVec), fptVec, axisZ);\n        result.properties.cylinder.facepointH90 = new CSG.Connector(cylCenter.plus(fptVec90), fptVec90, axisZ);\n        return result;\n    };\n\n    // Like a cylinder, but with rounded ends instead of flat\n    //\n    // Parameters:\n    //   start: start point of cylinder (default [0, -1, 0])\n    //   end: end point of cylinder (default [0, 1, 0])\n    //   radius: radius of cylinder (default 1), must be a scalar\n    //   resolution: determines the number of polygons per 360 degree revolution (default 12)\n    //   normal: a vector determining the starting angle for tesselation. Should be non-parallel to start.minus(end)\n    //\n    // Example usage:\n    //\n    //     var cylinder = CSG.roundedCylinder({\n    //       start: [0, -1, 0],\n    //       end: [0, 1, 0],\n    //       radius: 1,\n    //       resolution: 16\n    //     });\n    CSG.roundedCylinder = function(options) {\n        var p1 = CSG.parseOptionAs3DVector(options, \"start\", [0, -1, 0]);\n        var p2 = CSG.parseOptionAs3DVector(options, \"end\", [0, 1, 0]);\n        var radius = CSG.parseOptionAsFloat(options, \"radius\", 1);\n        var direction = p2.minus(p1);\n        var defaultnormal;\n        if (Math.abs(direction.x) > Math.abs(direction.y)) {\n            defaultnormal = new CSG.Vector3D(0, 1, 0);\n        } else {\n            defaultnormal = new CSG.Vector3D(1, 0, 0);\n        }\n        var normal = CSG.parseOptionAs3DVector(options, \"normal\", defaultnormal);\n        var resolution = CSG.parseOptionAsInt(options, \"resolution\", CSG.defaultResolution3D);\n        if (resolution < 4) resolution = 4;\n        var polygons = [];\n        var qresolution = Math.floor(0.25 * resolution);\n        var length = direction.length();\n        if (length < 1e-10) {\n            return CSG.sphere({\n                center: p1,\n                radius: radius,\n                resolution: resolution\n            });\n        }\n        var zvector = direction.unit().times(radius);\n        var xvector = zvector.cross(normal).unit().times(radius);\n        var yvector = xvector.cross(zvector).unit().times(radius);\n        var prevcylinderpoint;\n        for (var slice1 = 0; slice1 <= resolution; slice1++) {\n            var angle = Math.PI * 2.0 * slice1 / resolution;\n            var cylinderpoint = xvector.times(Math.cos(angle)).plus(yvector.times(Math.sin(angle)));\n            if (slice1 > 0) {\n                // cylinder vertices:\n                var vertices = [];\n                vertices.push(new CSG.Vertex(p1.plus(cylinderpoint)));\n                vertices.push(new CSG.Vertex(p1.plus(prevcylinderpoint)));\n                vertices.push(new CSG.Vertex(p2.plus(prevcylinderpoint)));\n                vertices.push(new CSG.Vertex(p2.plus(cylinderpoint)));\n                polygons.push(new CSG.Polygon(vertices));\n                var prevcospitch, prevsinpitch;\n                for (var slice2 = 0; slice2 <= qresolution; slice2++) {\n                    var pitch = 0.5 * Math.PI * slice2 / qresolution;\n                    //var pitch = Math.asin(slice2/qresolution);\n                    var cospitch = Math.cos(pitch);\n                    var sinpitch = Math.sin(pitch);\n                    if (slice2 > 0) {\n                        vertices = [];\n                        vertices.push(new CSG.Vertex(p1.plus(prevcylinderpoint.times(prevcospitch).minus(zvector.times(prevsinpitch)))));\n                        vertices.push(new CSG.Vertex(p1.plus(cylinderpoint.times(prevcospitch).minus(zvector.times(prevsinpitch)))));\n                        if (slice2 < qresolution) {\n                            vertices.push(new CSG.Vertex(p1.plus(cylinderpoint.times(cospitch).minus(zvector.times(sinpitch)))));\n                        }\n                        vertices.push(new CSG.Vertex(p1.plus(prevcylinderpoint.times(cospitch).minus(zvector.times(sinpitch)))));\n                        polygons.push(new CSG.Polygon(vertices));\n                        vertices = [];\n                        vertices.push(new CSG.Vertex(p2.plus(prevcylinderpoint.times(prevcospitch).plus(zvector.times(prevsinpitch)))));\n                        vertices.push(new CSG.Vertex(p2.plus(cylinderpoint.times(prevcospitch).plus(zvector.times(prevsinpitch)))));\n                        if (slice2 < qresolution) {\n                            vertices.push(new CSG.Vertex(p2.plus(cylinderpoint.times(cospitch).plus(zvector.times(sinpitch)))));\n                        }\n                        vertices.push(new CSG.Vertex(p2.plus(prevcylinderpoint.times(cospitch).plus(zvector.times(sinpitch)))));\n                        vertices.reverse();\n                        polygons.push(new CSG.Polygon(vertices));\n                    }\n                    prevcospitch = cospitch;\n                    prevsinpitch = sinpitch;\n                }\n            }\n            prevcylinderpoint = cylinderpoint;\n        }\n        var result = CSG.fromPolygons(polygons);\n        var ray = zvector.unit();\n        var axisX = xvector.unit();\n        result.properties.roundedCylinder = new CSG.Properties();\n        result.properties.roundedCylinder.start = new CSG.Connector(p1, ray.negated(), axisX);\n        result.properties.roundedCylinder.end = new CSG.Connector(p2, ray, axisX);\n        result.properties.roundedCylinder.facepoint = p1.plus(xvector);\n        return result;\n    };\n\n    // Construct an axis-aligned solid rounded cuboid.\n    // Parameters:\n    //   center: center of cube (default [0,0,0])\n    //   radius: radius of cube (default [1,1,1]), can be specified as scalar or as 3D vector\n    //   roundradius: radius of rounded corners (default 0.2), must be a scalar\n    //   resolution: determines the number of polygons per 360 degree revolution (default 8)\n    //\n    // Example code:\n    //\n    //     var cube = CSG.roundedCube({\n    //       center: [0, 0, 0],\n    //       radius: 1,\n    //       roundradius: 0.2,\n    //       resolution: 8,\n    //     });\n    CSG.roundedCube = function(options) {\n        var EPS = 1e-5;\n        var minRR = 1e-2; //minroundradius 1e-3 gives rounding errors already\n        var center, cuberadius;\n        options = options || {};\n        if (('corner1' in options) || ('corner2' in options)) {\n            if (('center' in options) || ('radius' in options)) {\n                throw new Error(\"roundedCube: should either give a radius and center parameter, or a corner1 and corner2 parameter\");\n            }\n            corner1 = CSG.parseOptionAs3DVector(options, \"corner1\", [0, 0, 0]);\n            corner2 = CSG.parseOptionAs3DVector(options, \"corner2\", [1, 1, 1]);\n            center = corner1.plus(corner2).times(0.5);\n            cuberadius = corner2.minus(corner1).times(0.5);\n        } else {\n            center = CSG.parseOptionAs3DVector(options, \"center\", [0, 0, 0]);\n            cuberadius = CSG.parseOptionAs3DVector(options, \"radius\", [1, 1, 1]);\n        }\n        cuberadius = cuberadius.abs(); // negative radii make no sense\n        var resolution = CSG.parseOptionAsInt(options, \"resolution\", CSG.defaultResolution3D);\n        if (resolution < 4) resolution = 4;\n        if (resolution%2 == 1 && resolution < 8) resolution = 8; // avoid ugly\n        var roundradius = CSG.parseOptionAs3DVector(options, \"roundradius\", [0.2, 0.2, 0.2]);\n        // slight hack for now - total radius stays ok\n        roundradius = CSG.Vector3D.Create(Math.max(roundradius.x, minRR), Math.max(roundradius.y, minRR), Math.max(roundradius.z, minRR));\n        var innerradius = cuberadius.minus(roundradius);\n        if (innerradius.x < 0 || innerradius.y < 0 || innerradius.z < 0) {\n            throw('roundradius <= radius!');\n        }\n        var res = CSG.sphere({radius:1, resolution:resolution});\n        res = res.scale(roundradius);\n        innerradius.x > EPS && (res = res.stretchAtPlane([1, 0, 0], [0, 0, 0], 2*innerradius.x));\n        innerradius.y > EPS && (res = res.stretchAtPlane([0, 1, 0], [0, 0, 0], 2*innerradius.y));\n        innerradius.z > EPS && (res = res.stretchAtPlane([0, 0, 1], [0, 0, 0], 2*innerradius.z));\n        res = res.translate([-innerradius.x+center.x, -innerradius.y+center.y, -innerradius.z+center.z]);\n        res = res.reTesselated();\n        res.properties.roundedCube = new CSG.Properties();\n        res.properties.roundedCube.center = new CSG.Vertex(center);\n        res.properties.roundedCube.facecenters = [\n            new CSG.Connector(new CSG.Vector3D([cuberadius.x, 0, 0]).plus(center), [1, 0, 0], [0, 0, 1]),\n            new CSG.Connector(new CSG.Vector3D([-cuberadius.x, 0, 0]).plus(center), [-1, 0, 0], [0, 0, 1]),\n            new CSG.Connector(new CSG.Vector3D([0, cuberadius.y, 0]).plus(center), [0, 1, 0], [0, 0, 1]),\n            new CSG.Connector(new CSG.Vector3D([0, -cuberadius.y, 0]).plus(center), [0, -1, 0], [0, 0, 1]),\n            new CSG.Connector(new CSG.Vector3D([0, 0, cuberadius.z]).plus(center), [0, 0, 1], [1, 0, 0]),\n            new CSG.Connector(new CSG.Vector3D([0, 0, -cuberadius.z]).plus(center), [0, 0, -1], [1, 0, 0])\n        ];\n        return res;\n    };\n\n    /**\n     * polyhedron accepts openscad style arguments. I.e. define face vertices clockwise looking from outside\n     */\n    CSG.polyhedron = function(options) {\n        options = options || {};\n        if (('points' in options) !== ('faces' in options)) {\n            throw new Error(\"polyhedron needs 'points' and 'faces' arrays\");\n        }\n        var vertices = CSG.parseOptionAs3DVectorList(options, \"points\", [\n                [1, 1, 0],\n                [1, -1, 0],\n                [-1, -1, 0],\n                [-1, 1, 0],\n                [0, 0, 1]\n            ])\n            .map(function(pt) {\n                return new CSG.Vertex(pt);\n            });\n        var faces = CSG.parseOption(options, \"faces\", [\n                [0, 1, 4],\n                [1, 2, 4],\n                [2, 3, 4],\n                [3, 0, 4],\n                [1, 0, 3],\n                [2, 1, 3]\n            ]);\n        // openscad convention defines inward normals - so we have to invert here\n        faces.forEach(function(face) {\n            face.reverse();\n        });\n        var polygons = faces.map(function(face) {\n            return new CSG.Polygon(face.map(function(idx) {\n                return vertices[idx];\n            }));\n        });\n\n        // TODO: facecenters as connectors? probably overkill. Maybe centroid\n        // the re-tesselation here happens because it's so easy for a user to\n        // create parametrized polyhedrons that end up with 1-2 dimensional polygons.\n        // These will create infinite loops at CSG.Tree()\n        return CSG.fromPolygons(polygons).reTesselated();\n    };\n\n    CSG.IsFloat = function(n) {\n        return (!isNaN(n)) || (n === Infinity) || (n === -Infinity);\n    };\n\n    // solve 2x2 linear equation:\n    // [ab][x] = [u]\n    // [cd][y]   [v]\n    CSG.solve2Linear = function(a, b, c, d, u, v) {\n        var det = a * d - b * c;\n        var invdet = 1.0 / det;\n        var x = u * d - b * v;\n        var y = -u * c + a * v;\n        x *= invdet;\n        y *= invdet;\n        return [x, y];\n    };\n\n    // # class Vector3D\n    // Represents a 3D vector.\n    //\n    // Example usage:\n    //\n    //     new CSG.Vector3D(1, 2, 3);\n    //     new CSG.Vector3D([1, 2, 3]);\n    //     new CSG.Vector3D({ x: 1, y: 2, z: 3 });\n    //     new CSG.Vector3D(1, 2); // assumes z=0\n    //     new CSG.Vector3D([1, 2]); // assumes z=0\n    CSG.Vector3D = function(x, y, z) {\n        if (arguments.length == 3) {\n            this._x = parseFloat(x);\n            this._y = parseFloat(y);\n            this._z = parseFloat(z);\n        } else if (arguments.length == 2) {\n            this._x = parseFloat(x);\n            this._y = parseFloat(y);\n            this._z = 0;\n        } else {\n            var ok = true;\n            if (arguments.length == 1) {\n                if (typeof(x) == \"object\") {\n                    if (x instanceof CSG.Vector3D) {\n                        this._x = x._x;\n                        this._y = x._y;\n                        this._z = x._z;\n                    } else if (x instanceof CSG.Vector2D) {\n                        this._x = x._x;\n                        this._y = x._y;\n                        this._z = 0;\n                    } else if (x instanceof Array) {\n                        if ((x.length < 2) || (x.length > 3)) {\n                            ok = false;\n                        } else {\n                            this._x = parseFloat(x[0]);\n                            this._y = parseFloat(x[1]);\n                            if (x.length == 3) {\n                                this._z = parseFloat(x[2]);\n                            } else {\n                                this._z = 0;\n                            }\n                        }\n                    } else if (('_x' in x) && ('_y' in x)) {\n                        this._x = parseFloat(x._x);\n                        this._y = parseFloat(x._y);\n                        if ('_z' in x) {\n                            this._z = parseFloat(x._z);\n                        } else {\n                            this._z = 0;\n                        }\n                    } else ok = false;\n                } else {\n                    var v = parseFloat(x);\n                    this._x = v;\n                    this._y = v;\n                    this._z = v;\n                }\n            } else ok = false;\n            if (ok) {\n                if ((!CSG.IsFloat(this._x)) || (!CSG.IsFloat(this._y)) || (!CSG.IsFloat(this._z))) ok = false;\n            }\n            if (!ok) {\n                throw new Error(\"wrong arguments\");\n            }\n        }\n    };\n\n    // This does the same as new CSG.Vector3D(x,y,z) but it doesn't go through the constructor\n    // and the parameters are not validated. Is much faster.\n    CSG.Vector3D.Create = function(x, y, z) {\n        var result = Object.create(CSG.Vector3D.prototype);\n        result._x = x;\n        result._y = y;\n        result._z = z;\n        return result;\n    };\n\n    CSG.Vector3D.prototype = {\n        get x() {\n            return this._x;\n        },\n        get y() {\n            return this._y;\n        },\n        get z() {\n            return this._z;\n        },\n\n        set x(v) {\n            throw new Error(\"Vector3D is immutable\");\n        },\n        set y(v) {\n            throw new Error(\"Vector3D is immutable\");\n        },\n        set z(v) {\n            throw new Error(\"Vector3D is immutable\");\n        },\n\n        clone: function() {\n            return CSG.Vector3D.Create(this._x, this._y, this._z);\n        },\n\n        negated: function() {\n            return CSG.Vector3D.Create(-this._x, -this._y, -this._z);\n        },\n\n        abs: function() {\n            return CSG.Vector3D.Create(Math.abs(this._x), Math.abs(this._y), Math.abs(this._z));\n        },\n\n        plus: function(a) {\n            return CSG.Vector3D.Create(this._x + a._x, this._y + a._y, this._z + a._z);\n        },\n\n        minus: function(a) {\n            return CSG.Vector3D.Create(this._x - a._x, this._y - a._y, this._z - a._z);\n        },\n\n        times: function(a) {\n            return CSG.Vector3D.Create(this._x * a, this._y * a, this._z * a);\n        },\n\n        dividedBy: function(a) {\n            return CSG.Vector3D.Create(this._x / a, this._y / a, this._z / a);\n        },\n\n        dot: function(a) {\n            return this._x * a._x + this._y * a._y + this._z * a._z;\n        },\n\n        lerp: function(a, t) {\n            return this.plus(a.minus(this).times(t));\n        },\n\n        lengthSquared: function() {\n            return this.dot(this);\n        },\n\n        length: function() {\n            return Math.sqrt(this.lengthSquared());\n        },\n\n        unit: function() {\n            return this.dividedBy(this.length());\n        },\n\n        cross: function(a) {\n            return CSG.Vector3D.Create(\n                this._y * a._z - this._z * a._y, this._z * a._x - this._x * a._z, this._x * a._y - this._y * a._x);\n        },\n\n        distanceTo: function(a) {\n            return this.minus(a).length();\n        },\n\n        distanceToSquared: function(a) {\n            return this.minus(a).lengthSquared();\n        },\n\n        equals: function(a) {\n            return (this._x == a._x) && (this._y == a._y) && (this._z == a._z);\n        },\n\n        // Right multiply by a 4x4 matrix (the vector is interpreted as a row vector)\n        // Returns a new CSG.Vector3D\n        multiply4x4: function(matrix4x4) {\n            return matrix4x4.leftMultiply1x3Vector(this);\n        },\n\n        transform: function(matrix4x4) {\n            return matrix4x4.leftMultiply1x3Vector(this);\n        },\n\n        toString: function() {\n            return \"(\" + this._x.toFixed(2) + \", \" + this._y.toFixed(2) + \", \" + this._z.toFixed(2) + \")\";\n        },\n\n        // find a vector that is somewhat perpendicular to this one\n        randomNonParallelVector: function() {\n            var abs = this.abs();\n            if ((abs._x <= abs._y) && (abs._x <= abs._z)) {\n                return CSG.Vector3D.Create(1, 0, 0);\n            } else if ((abs._y <= abs._x) && (abs._y <= abs._z)) {\n                return CSG.Vector3D.Create(0, 1, 0);\n            } else {\n                return CSG.Vector3D.Create(0, 0, 1);\n            }\n        },\n\n        min: function(p) {\n            return CSG.Vector3D.Create(\n                Math.min(this._x, p._x), Math.min(this._y, p._y), Math.min(this._z, p._z));\n        },\n\n        max: function(p) {\n            return CSG.Vector3D.Create(\n                Math.max(this._x, p._x), Math.max(this._y, p._y), Math.max(this._z, p._z));\n        }\n    };\n\n    // # class Vertex\n    // Represents a vertex of a polygon. Use your own vertex class instead of this\n    // one to provide additional features like texture coordinates and vertex\n    // colors. Custom vertex classes need to provide a `pos` property\n    // `flipped()`, and `interpolate()` methods that behave analogous to the ones\n    // defined by `CSG.Vertex`.\n    CSG.Vertex = function(pos) {\n        this.pos = pos;\n    };\n\n    // create from an untyped object with identical property names:\n    CSG.Vertex.fromObject = function(obj) {\n        var pos = new CSG.Vector3D(obj.pos);\n        return new CSG.Vertex(pos);\n    };\n\n    CSG.Vertex.prototype = {\n        // Return a vertex with all orientation-specific data (e.g. vertex normal) flipped. Called when the\n        // orientation of a polygon is flipped.\n        flipped: function() {\n            return this;\n        },\n\n        getTag: function() {\n            var result = this.tag;\n            if (!result) {\n                result = CSG.getTag();\n                this.tag = result;\n            }\n            return result;\n        },\n\n        // Create a new vertex between this vertex and `other` by linearly\n        // interpolating all properties using a parameter of `t`. Subclasses should\n        // override this to interpolate additional properties.\n        interpolate: function(other, t) {\n            var newpos = this.pos.lerp(other.pos, t);\n            return new CSG.Vertex(newpos);\n        },\n\n        // Affine transformation of vertex. Returns a new CSG.Vertex\n        transform: function(matrix4x4) {\n            var newpos = this.pos.multiply4x4(matrix4x4);\n            return new CSG.Vertex(newpos);\n        },\n\n        toString: function() {\n            return this.pos.toString();\n        }\n    };\n\n    // # class Plane\n    // Represents a plane in 3D space.\n    CSG.Plane = function(normal, w) {\n        this.normal = normal;\n        this.w = w;\n    };\n\n    // create from an untyped object with identical property names:\n    CSG.Plane.fromObject = function(obj) {\n        var normal = new CSG.Vector3D(obj.normal);\n        var w = parseFloat(obj.w);\n        return new CSG.Plane(normal, w);\n    };\n\n    // `CSG.Plane.EPSILON` is the tolerance used by `splitPolygon()` to decide if a\n    // point is on the plane.\n    CSG.Plane.EPSILON = 1e-5;\n\n    CSG.Plane.fromVector3Ds = function(a, b, c) {\n        var n = b.minus(a).cross(c.minus(a)).unit();\n        return new CSG.Plane(n, n.dot(a));\n    };\n\n    // like fromVector3Ds, but allow the vectors to be on one point or one line\n    // in such a case a random plane through the given points is constructed\n    CSG.Plane.anyPlaneFromVector3Ds = function(a, b, c) {\n        var v1 = b.minus(a);\n        var v2 = c.minus(a);\n        if (v1.length() < 1e-5) {\n            v1 = v2.randomNonParallelVector();\n        }\n        if (v2.length() < 1e-5) {\n            v2 = v1.randomNonParallelVector();\n        }\n        var normal = v1.cross(v2);\n        if (normal.length() < 1e-5) {\n            // this would mean that v1 == v2.negated()\n            v2 = v1.randomNonParallelVector();\n            normal = v1.cross(v2);\n        }\n        normal = normal.unit();\n        return new CSG.Plane(normal, normal.dot(a));\n    };\n\n    CSG.Plane.fromPoints = function(a, b, c) {\n        a = new CSG.Vector3D(a);\n        b = new CSG.Vector3D(b);\n        c = new CSG.Vector3D(c);\n        return CSG.Plane.fromVector3Ds(a, b, c);\n    };\n\n    CSG.Plane.fromNormalAndPoint = function(normal, point) {\n        normal = new CSG.Vector3D(normal);\n        point = new CSG.Vector3D(point);\n        normal = normal.unit();\n        var w = point.dot(normal);\n        return new CSG.Plane(normal, w);\n    };\n\n    CSG.Plane.prototype = {\n        flipped: function() {\n            return new CSG.Plane(this.normal.negated(), -this.w);\n        },\n\n        getTag: function() {\n            var result = this.tag;\n            if (!result) {\n                result = CSG.getTag();\n                this.tag = result;\n            }\n            return result;\n        },\n\n        equals: function(n) {\n            return this.normal.equals(n.normal) && this.w == n.w;\n        },\n\n        transform: function(matrix4x4) {\n            var ismirror = matrix4x4.isMirroring();\n            // get two vectors in the plane:\n            var r = this.normal.randomNonParallelVector();\n            var u = this.normal.cross(r);\n            var v = this.normal.cross(u);\n            // get 3 points in the plane:\n            var point1 = this.normal.times(this.w);\n            var point2 = point1.plus(u);\n            var point3 = point1.plus(v);\n            // transform the points:\n            point1 = point1.multiply4x4(matrix4x4);\n            point2 = point2.multiply4x4(matrix4x4);\n            point3 = point3.multiply4x4(matrix4x4);\n            // and create a new plane from the transformed points:\n            var newplane = CSG.Plane.fromVector3Ds(point1, point2, point3);\n            if (ismirror) {\n                // the transform is mirroring\n                // We should mirror the plane:\n                newplane = newplane.flipped();\n            }\n            return newplane;\n        },\n\n        // Returns object:\n        // .type:\n        //   0: coplanar-front\n        //   1: coplanar-back\n        //   2: front\n        //   3: back\n        //   4: spanning\n        // In case the polygon is spanning, returns:\n        // .front: a CSG.Polygon of the front part\n        // .back: a CSG.Polygon of the back part\n        splitPolygon: function(polygon) {\n            var result = {\n                type: null,\n                front: null,\n                back: null\n            };\n            // cache in local vars (speedup):\n            var planenormal = this.normal;\n            var vertices = polygon.vertices;\n            var numvertices = vertices.length;\n            if (polygon.plane.equals(this)) {\n                result.type = 0;\n            } else {\n                var EPS = CSG.Plane.EPSILON;\n                var thisw = this.w;\n                var hasfront = false;\n                var hasback = false;\n                var vertexIsBack = [];\n                var MINEPS = -EPS;\n                for (var i = 0; i < numvertices; i++) {\n                    var t = planenormal.dot(vertices[i].pos) - thisw;\n                    var isback = (t < 0);\n                    vertexIsBack.push(isback);\n                    if (t > EPS) hasfront = true;\n                    if (t < MINEPS) hasback = true;\n                }\n                if ((!hasfront) && (!hasback)) {\n                    // all points coplanar\n                    var t = planenormal.dot(polygon.plane.normal);\n                    result.type = (t >= 0) ? 0 : 1;\n                } else if (!hasback) {\n                    result.type = 2;\n                } else if (!hasfront) {\n                    result.type = 3;\n                } else {\n                    // spanning\n                    result.type = 4;\n                    var frontvertices = [],\n                        backvertices = [];\n                    var isback = vertexIsBack[0];\n                    for (var vertexindex = 0; vertexindex < numvertices; vertexindex++) {\n                        var vertex = vertices[vertexindex];\n                        var nextvertexindex = vertexindex + 1;\n                        if (nextvertexindex >= numvertices) nextvertexindex = 0;\n                        var nextisback = vertexIsBack[nextvertexindex];\n                        if (isback == nextisback) {\n                            // line segment is on one side of the plane:\n                            if (isback) {\n                                backvertices.push(vertex);\n                            } else {\n                                frontvertices.push(vertex);\n                            }\n                        } else {\n                            // line segment intersects plane:\n                            var point = vertex.pos;\n                            var nextpoint = vertices[nextvertexindex].pos;\n                            var intersectionpoint = this.splitLineBetweenPoints(point, nextpoint);\n                            var intersectionvertex = new CSG.Vertex(intersectionpoint);\n                            if (isback) {\n                                backvertices.push(vertex);\n                                backvertices.push(intersectionvertex);\n                                frontvertices.push(intersectionvertex);\n                            } else {\n                                frontvertices.push(vertex);\n                                frontvertices.push(intersectionvertex);\n                                backvertices.push(intersectionvertex);\n                            }\n                        }\n                        isback = nextisback;\n                    } // for vertexindex\n                    // remove duplicate vertices:\n                    var EPS_SQUARED = CSG.Plane.EPSILON * CSG.Plane.EPSILON;\n                    if (backvertices.length >= 3) {\n                        var prevvertex = backvertices[backvertices.length - 1];\n                        for (var vertexindex = 0; vertexindex < backvertices.length; vertexindex++) {\n                            var vertex = backvertices[vertexindex];\n                            if (vertex.pos.distanceToSquared(prevvertex.pos) < EPS_SQUARED) {\n                                backvertices.splice(vertexindex, 1);\n                                vertexindex--;\n                            }\n                            prevvertex = vertex;\n                        }\n                    }\n                    if (frontvertices.length >= 3) {\n                        var prevvertex = frontvertices[frontvertices.length - 1];\n                        for (var vertexindex = 0; vertexindex < frontvertices.length; vertexindex++) {\n                            var vertex = frontvertices[vertexindex];\n                            if (vertex.pos.distanceToSquared(prevvertex.pos) < EPS_SQUARED) {\n                                frontvertices.splice(vertexindex, 1);\n                                vertexindex--;\n                            }\n                            prevvertex = vertex;\n                        }\n                    }\n                    if (frontvertices.length >= 3) {\n                        result.front = new CSG.Polygon(frontvertices, polygon.shared, polygon.plane);\n                    }\n                    if (backvertices.length >= 3) {\n                        result.back = new CSG.Polygon(backvertices, polygon.shared, polygon.plane);\n                    }\n                }\n            }\n            return result;\n        },\n\n        // robust splitting of a line by a plane\n        // will work even if the line is parallel to the plane\n        splitLineBetweenPoints: function(p1, p2) {\n            var direction = p2.minus(p1);\n            var labda = (this.w - this.normal.dot(p1)) / this.normal.dot(direction);\n            if (isNaN(labda)) labda = 0;\n            if (labda > 1) labda = 1;\n            if (labda < 0) labda = 0;\n            var result = p1.plus(direction.times(labda));\n            return result;\n        },\n\n        // returns CSG.Vector3D\n        intersectWithLine: function(line3d) {\n            return line3d.intersectWithPlane(this);\n        },\n\n        // intersection of two planes\n        intersectWithPlane: function(plane) {\n            return CSG.Line3D.fromPlanes(this, plane);\n        },\n\n        signedDistanceToPoint: function(point) {\n            var t = this.normal.dot(point) - this.w;\n            return t;\n        },\n\n        toString: function() {\n            return \"[normal: \" + this.normal.toString() + \", w: \" + this.w + \"]\";\n        },\n\n        mirrorPoint: function(point3d) {\n            var distance = this.signedDistanceToPoint(point3d);\n            var mirrored = point3d.minus(this.normal.times(distance * 2.0));\n            return mirrored;\n        }\n    };\n\n\n    // # class Polygon\n    // Represents a convex polygon. The vertices used to initialize a polygon must\n    // be coplanar and form a convex loop. They do not have to be `CSG.Vertex`\n    // instances but they must behave similarly (duck typing can be used for\n    // customization).\n    //\n    // Each convex polygon has a `shared` property, which is shared between all\n    // polygons that are clones of each other or were split from the same polygon.\n    // This can be used to define per-polygon properties (such as surface color).\n    //\n    // The plane of the polygon is calculated from the vertex coordinates\n    // To avoid unnecessary recalculation, the plane can alternatively be\n    // passed as the third argument\n    CSG.Polygon = function(vertices, shared, plane) {\n        this.vertices = vertices;\n        if (!shared) shared = CSG.Polygon.defaultShared;\n        this.shared = shared;\n        //var numvertices = vertices.length;\n\n        if (arguments.length >= 3) {\n            this.plane = plane;\n        } else {\n            this.plane = CSG.Plane.fromVector3Ds(vertices[0].pos, vertices[1].pos, vertices[2].pos);\n        }\n\n        if (_CSGDEBUG) {\n            this.checkIfConvex();\n        }\n    };\n\n    // create from an untyped object with identical property names:\n    CSG.Polygon.fromObject = function(obj) {\n        var vertices = obj.vertices.map(function(v) {\n            return CSG.Vertex.fromObject(v);\n        });\n        var shared = CSG.Polygon.Shared.fromObject(obj.shared);\n        var plane = CSG.Plane.fromObject(obj.plane);\n        return new CSG.Polygon(vertices, shared, plane);\n    };\n\n    CSG.Polygon.prototype = {\n        // check whether the polygon is convex (it should be, otherwise we will get unexpected results)\n        checkIfConvex: function() {\n            if (!CSG.Polygon.verticesConvex(this.vertices, this.plane.normal)) {\n                CSG.Polygon.verticesConvex(this.vertices, this.plane.normal);\n                throw new Error(\"Not convex!\");\n            }\n        },\n\n        setColor: function(args) {\n            var newshared = CSG.Polygon.Shared.fromColor.apply(this, arguments);\n            this.shared = newshared;\n            return this;\n        },\n\n        getSignedVolume: function() {\n            var signedVolume = 0;\n            for (var i = 0; i < this.vertices.length - 2; i++) {\n                signedVolume += this.vertices[0].pos.dot(this.vertices[i+1].pos\n                    .cross(this.vertices[i+2].pos));\n            }\n            signedVolume /= 6;\n            return signedVolume;\n        },\n\n        // Note: could calculate vectors only once to speed up\n        getArea: function() {\n            var polygonArea = 0;\n            for (var i = 0; i < this.vertices.length - 2; i++) {\n                polygonArea += this.vertices[i+1].pos.minus(this.vertices[0].pos)\n                    .cross(this.vertices[i+2].pos.minus(this.vertices[i+1].pos)).length();\n            }\n            polygonArea /= 2;\n            return polygonArea;\n        },\n\n\n        // accepts array of features to calculate\n        // returns array of results\n        getTetraFeatures: function(features) {\n            var result = [];\n            features.forEach(function(feature) {\n                if (feature == 'volume') {\n                    result.push(this.getSignedVolume());\n                } else if (feature == 'area') {\n                    result.push(this.getArea());\n                }\n            }, this);\n            return result;\n        },\n\n        // Extrude a polygon into the direction offsetvector\n        // Returns a CSG object\n        extrude: function(offsetvector) {\n            var newpolygons = [];\n\n            var polygon1 = this;\n            var direction = polygon1.plane.normal.dot(offsetvector);\n            if (direction > 0) {\n                polygon1 = polygon1.flipped();\n            }\n            newpolygons.push(polygon1);\n            var polygon2 = polygon1.translate(offsetvector);\n            var numvertices = this.vertices.length;\n            for (var i = 0; i < numvertices; i++) {\n                var sidefacepoints = [];\n                var nexti = (i < (numvertices - 1)) ? i + 1 : 0;\n                sidefacepoints.push(polygon1.vertices[i].pos);\n                sidefacepoints.push(polygon2.vertices[i].pos);\n                sidefacepoints.push(polygon2.vertices[nexti].pos);\n                sidefacepoints.push(polygon1.vertices[nexti].pos);\n                var sidefacepolygon = CSG.Polygon.createFromPoints(sidefacepoints, this.shared);\n                newpolygons.push(sidefacepolygon);\n            }\n            polygon2 = polygon2.flipped();\n            newpolygons.push(polygon2);\n            return CSG.fromPolygons(newpolygons);\n        },\n\n        translate: function(offset) {\n            return this.transform(CSG.Matrix4x4.translation(offset));\n        },\n\n        // returns an array with a CSG.Vector3D (center point) and a radius\n        boundingSphere: function() {\n            if (!this.cachedBoundingSphere) {\n                var box = this.boundingBox();\n                var middle = box[0].plus(box[1]).times(0.5);\n                var radius3 = box[1].minus(middle);\n                var radius = radius3.length();\n                this.cachedBoundingSphere = [middle, radius];\n            }\n            return this.cachedBoundingSphere;\n        },\n\n        // returns an array of two CSG.Vector3Ds (minimum coordinates and maximum coordinates)\n        boundingBox: function() {\n            if (!this.cachedBoundingBox) {\n                var minpoint, maxpoint;\n                var vertices = this.vertices;\n                var numvertices = vertices.length;\n                if (numvertices === 0) {\n                    minpoint = new CSG.Vector3D(0, 0, 0);\n                } else {\n                    minpoint = vertices[0].pos;\n                }\n                maxpoint = minpoint;\n                for (var i = 1; i < numvertices; i++) {\n                    var point = vertices[i].pos;\n                    minpoint = minpoint.min(point);\n                    maxpoint = maxpoint.max(point);\n                }\n                this.cachedBoundingBox = [minpoint, maxpoint];\n            }\n            return this.cachedBoundingBox;\n        },\n\n        flipped: function() {\n            var newvertices = this.vertices.map(function(v) {\n                return v.flipped();\n            });\n            newvertices.reverse();\n            var newplane = this.plane.flipped();\n            return new CSG.Polygon(newvertices, this.shared, newplane);\n        },\n\n        // Affine transformation of polygon. Returns a new CSG.Polygon\n        transform: function(matrix4x4) {\n            var newvertices = this.vertices.map(function(v) {\n                return v.transform(matrix4x4);\n            });\n            var newplane = this.plane.transform(matrix4x4);\n            if (matrix4x4.isMirroring()) {\n                // need to reverse the vertex order\n                // in order to preserve the inside/outside orientation:\n                newvertices.reverse();\n            }\n            return new CSG.Polygon(newvertices, this.shared, newplane);\n        },\n\n        toString: function() {\n            var result = \"Polygon plane: \" + this.plane.toString() + \"\\n\";\n            this.vertices.map(function(vertex) {\n                result += \"  \" + vertex.toString() + \"\\n\";\n            });\n            return result;\n        },\n\n        // project the 3D polygon onto a plane\n        projectToOrthoNormalBasis: function(orthobasis) {\n            var points2d = this.vertices.map(function(vertex) {\n                return orthobasis.to2D(vertex.pos);\n            });\n            var result = CAG.fromPointsNoCheck(points2d);\n            var area = result.area();\n            if (Math.abs(area) < 1e-5) {\n                // the polygon was perpendicular to the orthnormal plane. The resulting 2D polygon would be degenerate\n                // return an empty area instead:\n                result = new CAG();\n            } else if (area < 0) {\n                result = result.flipped();\n            }\n            return result;\n        },\n\n        /**\n         * Creates solid from slices (CSG.Polygon) by generating walls\n         * @param {Object} options Solid generating options\n         *  - numslices {Number} Number of slices to be generated\n         *  - callback(t, slice) {Function} Callback function generating slices.\n         *          arguments: t = [0..1], slice = [0..numslices - 1]\n         *          return: CSG.Polygon or null to skip\n         *  - loop {Boolean} no flats, only walls, it's used to generate solids like a tor\n         */\n        solidFromSlices: function(options) {\n            var polygons = [],\n                csg = null,\n                prev = null,\n                bottom = null,\n                top = null,\n                numSlices = 2,\n                bLoop = false,\n                fnCallback,\n                flipped = null;\n\n            if (options) {\n                bLoop = Boolean(options['loop']);\n\n                if (options.numslices)\n                    numSlices = options.numslices;\n\n                if (options.callback)\n                    fnCallback = options.callback;\n            }\n            if (!fnCallback) {\n                var square = new CSG.Polygon.createFromPoints([\n                    [0, 0, 0],\n                    [1, 0, 0],\n                    [1, 1, 0],\n                    [0, 1, 0]\n                ]);\n                fnCallback = function(t, slice) {\n                    return t == 0 || t == 1 ? square.translate([0, 0, t]) : null;\n                }\n            }\n            for (var i = 0, iMax = numSlices - 1; i <= iMax; i++) {\n                csg = fnCallback.call(this, i / iMax, i);\n                if (csg) {\n                    if (!(csg instanceof CSG.Polygon)) {\n                        throw new Error(\"CSG.Polygon.solidFromSlices callback error: CSG.Polygon expected\");\n                    }\n                    csg.checkIfConvex();\n\n                    if (prev) { //generate walls\n                        if (flipped === null) { //not generated yet\n                            flipped = prev.plane.signedDistanceToPoint(csg.vertices[0].pos) < 0;\n                        }\n                        this._addWalls(polygons, prev, csg, flipped);\n\n                    } else { //the first - will be a bottom\n                        bottom = csg;\n                    }\n                    prev = csg;\n                } //callback can return null to skip that slice\n            }\n            top = csg;\n\n            if (bLoop) {\n                var bSameTopBottom = bottom.vertices.length == top.vertices.length &&\n                    bottom.vertices.every(function(v, index) {\n                        return v.pos.equals(top.vertices[index].pos)\n                    });\n                //if top and bottom are not the same -\n                //generate walls between them\n                if (!bSameTopBottom) {\n                    this._addWalls(polygons, top, bottom, flipped);\n                } //else - already generated\n            } else {\n                //save top and bottom\n                //TODO: flip if necessary\n                polygons.unshift(flipped ? bottom : bottom.flipped());\n                polygons.push(flipped ? top.flipped() : top);\n            }\n            return CSG.fromPolygons(polygons);\n        },\n        /**\n         *\n         * @param walls Array of wall polygons\n         * @param bottom Bottom polygon\n         * @param top Top polygon\n         */\n        _addWalls: function(walls, bottom, top, bFlipped) {\n            var bottomPoints = bottom.vertices.slice(0), //make a copy\n                topPoints = top.vertices.slice(0), //make a copy\n                color = top.shared || null;\n\n            //check if bottom perimeter is closed\n            if (!bottomPoints[0].pos.equals(bottomPoints[bottomPoints.length - 1].pos)) {\n                bottomPoints.push(bottomPoints[0]);\n            }\n\n            //check if top perimeter is closed\n            if (!topPoints[0].pos.equals(topPoints[topPoints.length - 1].pos)) {\n                topPoints.push(topPoints[0]);\n            }\n            if (bFlipped) {\n                bottomPoints = bottomPoints.reverse();\n                topPoints = topPoints.reverse();\n            }\n\n            var iTopLen = topPoints.length - 1,\n                iBotLen = bottomPoints.length - 1,\n                iExtra = iTopLen - iBotLen, //how many extra triangles we need\n                bMoreTops = iExtra > 0,\n                bMoreBottoms = iExtra < 0;\n\n            var aMin = []; //indexes to start extra triangles (polygon with minimal square)\n            //init - we need exactly /iExtra/ small triangles\n            for (var i = Math.abs(iExtra); i > 0; i--) {\n                aMin.push({\n                    len: Infinity,\n                    index: -1\n                });\n            }\n\n            var len;\n            if (bMoreBottoms) {\n                for (var i = 0; i < iBotLen; i++) {\n                    len = bottomPoints[i].pos.distanceToSquared(bottomPoints[i + 1].pos);\n                    //find the element to replace\n                    for (var j = aMin.length - 1; j >= 0; j--) {\n                        if (aMin[j].len > len) {\n                            aMin[j].len = len;\n                            aMin.index = j;\n                            break;\n                        }\n                    } //for\n                }\n            } else if (bMoreTops) {\n                for (var i = 0; i < iTopLen; i++) {\n                    len = topPoints[i].pos.distanceToSquared(topPoints[i + 1].pos);\n                    //find the element to replace\n                    for (var j = aMin.length - 1; j >= 0; j--) {\n                        if (aMin[j].len > len) {\n                            aMin[j].len = len;\n                            aMin.index = j;\n                            break;\n                        }\n                    } //for\n                }\n            } //if\n            //sort by index\n            aMin.sort(fnSortByIndex);\n            var getTriangle = function addWallsPutTriangle(pointA, pointB, pointC, color) {\n                return new CSG.Polygon([pointA, pointB, pointC], color);\n                //return bFlipped ? triangle.flipped() : triangle;\n            };\n\n            var bpoint = bottomPoints[0],\n                tpoint = topPoints[0],\n                secondPoint,\n                nBotFacet, nTopFacet; //length of triangle facet side\n            for (var iB = 0, iT = 0, iMax = iTopLen + iBotLen; iB + iT < iMax;) {\n                if (aMin.length) {\n                    if (bMoreTops && iT == aMin[0].index) { //one vertex is on the bottom, 2 - on the top\n                        secondPoint = topPoints[++iT];\n                        //console.log('<<< extra top: ' + secondPoint + ', ' + tpoint + ', bottom: ' + bpoint);\n                        walls.push(getTriangle(\n                            secondPoint, tpoint, bpoint, color\n                        ));\n                        tpoint = secondPoint;\n                        aMin.shift();\n                        continue;\n                    } else if (bMoreBottoms && iB == aMin[0].index) {\n                        secondPoint = bottomPoints[++iB];\n                        walls.push(getTriangle(\n                            tpoint, bpoint, secondPoint, color\n                        ));\n                        bpoint = secondPoint;\n                        aMin.shift();\n                        continue;\n                    }\n                }\n                //choose the shortest path\n                if (iB < iBotLen) { //one vertex is on the top, 2 - on the bottom\n                    nBotFacet = tpoint.pos.distanceToSquared(bottomPoints[iB + 1].pos);\n                } else {\n                    nBotFacet = Infinity;\n                }\n                if (iT < iTopLen) { //one vertex is on the bottom, 2 - on the top\n                    nTopFacet = bpoint.pos.distanceToSquared(topPoints[iT + 1].pos);\n                } else {\n                    nTopFacet = Infinity;\n                }\n                if (nBotFacet <= nTopFacet) {\n                    secondPoint = bottomPoints[++iB];\n                    walls.push(getTriangle(\n                        tpoint, bpoint, secondPoint, color\n                    ));\n                    bpoint = secondPoint;\n                } else if (iT < iTopLen) { //nTopFacet < Infinity\n                    secondPoint = topPoints[++iT];\n                    //console.log('<<< top: ' + secondPoint + ', ' + tpoint + ', bottom: ' + bpoint);\n                    walls.push(getTriangle(\n                        secondPoint, tpoint, bpoint, color\n                    ));\n                    tpoint = secondPoint;\n                };\n            }\n            return walls;\n        }\n    };\n\n    CSG.Polygon.verticesConvex = function(vertices, planenormal) {\n        var numvertices = vertices.length;\n        if (numvertices > 2) {\n            var prevprevpos = vertices[numvertices - 2].pos;\n            var prevpos = vertices[numvertices - 1].pos;\n            for (var i = 0; i < numvertices; i++) {\n                var pos = vertices[i].pos;\n                if (!CSG.Polygon.isConvexPoint(prevprevpos, prevpos, pos, planenormal)) {\n                    return false;\n                }\n                prevprevpos = prevpos;\n                prevpos = pos;\n            }\n        }\n        return true;\n    };\n\n    // Create a polygon from the given points\n    CSG.Polygon.createFromPoints = function(points, shared, plane) {\n        var normal;\n        if (arguments.length < 3) {\n            // initially set a dummy vertex normal:\n            normal = new CSG.Vector3D(0, 0, 0);\n        } else {\n            normal = plane.normal;\n        }\n        var vertices = [];\n        points.map(function(p) {\n            var vec = new CSG.Vector3D(p);\n            var vertex = new CSG.Vertex(vec);\n            vertices.push(vertex);\n        });\n        var polygon;\n        if (arguments.length < 3) {\n            polygon = new CSG.Polygon(vertices, shared);\n        } else {\n            polygon = new CSG.Polygon(vertices, shared, plane);\n        }\n        return polygon;\n    };\n\n    // calculate whether three points form a convex corner\n    //  prevpoint, point, nextpoint: the 3 coordinates (CSG.Vector3D instances)\n    //  normal: the normal vector of the plane\n    CSG.Polygon.isConvexPoint = function(prevpoint, point, nextpoint, normal) {\n        var crossproduct = point.minus(prevpoint).cross(nextpoint.minus(point));\n        var crossdotnormal = crossproduct.dot(normal);\n        return (crossdotnormal >= 0);\n    };\n\n    CSG.Polygon.isStrictlyConvexPoint = function(prevpoint, point, nextpoint, normal) {\n        var crossproduct = point.minus(prevpoint).cross(nextpoint.minus(point));\n        var crossdotnormal = crossproduct.dot(normal);\n        return (crossdotnormal >= 1e-5);\n    };\n\n    // # class CSG.Polygon.Shared\n    // Holds the shared properties for each polygon (currently only color)\n    // Constructor expects a 4 element array [r,g,b,a], values from 0 to 1, or null\n    CSG.Polygon.Shared = function(color) {\n        if(color !== null)\n        {\n            if (color.length != 4) {\n                throw new Error(\"Expecting 4 element array\");\n            }\n        }\n        this.color = color;\n    };\n\n    CSG.Polygon.Shared.fromObject = function(obj) {\n        return new CSG.Polygon.Shared(obj.color);\n    };\n\n    // Create CSG.Polygon.Shared from a color, can be called as follows:\n    // var s = CSG.Polygon.Shared.fromColor(r,g,b [,a])\n    // var s = CSG.Polygon.Shared.fromColor([r,g,b [,a]])\n    CSG.Polygon.Shared.fromColor = function(args) {\n        var color;\n        if(arguments.length == 1) {\n            color = arguments[0].slice(); // make deep copy\n        }\n        else {\n            color = [];\n            for(var i=0; i < arguments.length; i++) {\n                color.push(arguments[i]);\n            }\n        }\n        if(color.length == 3) {\n            color.push(1);\n        } else if(color.length != 4) {\n            throw new Error(\"setColor expects either an array with 3 or 4 elements, or 3 or 4 parameters.\");\n        }\n        return new CSG.Polygon.Shared(color);\n    };\n\n    CSG.Polygon.Shared.prototype = {\n        getTag: function() {\n            var result = this.tag;\n            if (!result) {\n                result = CSG.getTag();\n                this.tag = result;\n            }\n            return result;\n        },\n        // get a string uniquely identifying this object\n        getHash: function() {\n            if (!this.color) return \"null\";\n            return this.color.join(\"/\");\n        }\n    };\n\n    CSG.Polygon.defaultShared = new CSG.Polygon.Shared(null);\n\n    // # class PolygonTreeNode\n    // This class manages hierarchical splits of polygons\n    // At the top is a root node which doesn hold a polygon, only child PolygonTreeNodes\n    // Below that are zero or more 'top' nodes; each holds a polygon. The polygons can be in different planes\n    // splitByPlane() splits a node by a plane. If the plane intersects the polygon, two new child nodes\n    // are created holding the splitted polygon.\n    // getPolygons() retrieves the polygon from the tree. If for PolygonTreeNode the polygon is split but\n    // the two split parts (child nodes) are still intact, then the unsplit polygon is returned.\n    // This ensures that we can safely split a polygon into many fragments. If the fragments are untouched,\n    //  getPolygons() will return the original unsplit polygon instead of the fragments.\n    // remove() removes a polygon from the tree. Once a polygon is removed, the parent polygons are invalidated\n    // since they are no longer intact.\n    // constructor creates the root node:\n    CSG.PolygonTreeNode = function() {\n        this.parent = null;\n        this.children = [];\n        this.polygon = null;\n        this.removed = false;\n    };\n\n    CSG.PolygonTreeNode.prototype = {\n        // fill the tree with polygons. Should be called on the root node only; child nodes must\n        // always be a derivate (split) of the parent node.\n        addPolygons: function(polygons) {\n            if (!this.isRootNode())\n            // new polygons can only be added to root node; children can only be splitted polygons\n                throw new Error(\"Assertion failed\");\n            var _this = this;\n            polygons.map(function(polygon) {\n                _this.addChild(polygon);\n            });\n        },\n\n        // remove a node\n        // - the siblings become toplevel nodes\n        // - the parent is removed recursively\n        remove: function() {\n            if (!this.removed) {\n                this.removed = true;\n\n                if (_CSGDEBUG) {\n                    if (this.isRootNode()) throw new Error(\"Assertion failed\"); // can't remove root node\n                    if (this.children.length) throw new Error(\"Assertion failed\"); // we shouldn't remove nodes with children\n                }\n\n                // remove ourselves from the parent's children list:\n                var parentschildren = this.parent.children;\n                var i = parentschildren.indexOf(this);\n                if (i < 0) throw new Error(\"Assertion failed\");\n                parentschildren.splice(i, 1);\n\n                // invalidate the parent's polygon, and of all parents above it:\n                this.parent.recursivelyInvalidatePolygon();\n            }\n        },\n\n        isRemoved: function() {\n            return this.removed;\n        },\n\n        isRootNode: function() {\n            return !this.parent;\n        },\n\n        // invert all polygons in the tree. Call on the root node\n        invert: function() {\n            if (!this.isRootNode()) throw new Error(\"Assertion failed\"); // can only call this on the root node\n            this.invertSub();\n        },\n\n        getPolygon: function() {\n            if (!this.polygon) throw new Error(\"Assertion failed\"); // doesn't have a polygon, which means that it has been broken down\n            return this.polygon;\n        },\n\n        getPolygons: function(result) {\n            var children = [this];\n            var queue = [children];\n            var i, j, l, node;\n            for (i = 0; i < queue.length; ++i ) { // queue size can change in loop, don't cache length\n                children = queue[i];\n                for (j = 0, l = children.length; j < l; j++) { // ok to cache length\n                    node = children[j];\n                    if (node.polygon) {\n                        // the polygon hasn't been broken yet. We can ignore the children and return our polygon:\n                        result.push(node.polygon);\n                    } else {\n                        // our polygon has been split up and broken, so gather all subpolygons from the children\n                        queue.push(node.children);\n                    }\n                }\n            }\n        },\n\n        // split the node by a plane; add the resulting nodes to the frontnodes and backnodes array\n        // If the plane doesn't intersect the polygon, the 'this' object is added to one of the arrays\n        // If the plane does intersect the polygon, two new child nodes are created for the front and back fragments,\n        //  and added to both arrays.\n        splitByPlane: function(plane, coplanarfrontnodes, coplanarbacknodes, frontnodes, backnodes) {\n            if (this.children.length) {\n                var queue = [this.children], i, j, l, node, nodes;\n                for (i = 0; i < queue.length; i++) { // queue.length can increase, do not cache\n                    nodes = queue[i];\n                    for (j = 0, l = nodes.length; j < l; j++) { // ok to cache length\n                        node = nodes[j];\n                        if (node.children.length) {\n                            queue.push(node.children);\n                        } else {\n                            // no children. Split the polygon:\n                            node._splitByPlane(plane, coplanarfrontnodes, coplanarbacknodes, frontnodes, backnodes);\n                        }\n                    }\n                }\n            } else {\n                this._splitByPlane(plane, coplanarfrontnodes, coplanarbacknodes, frontnodes, backnodes);\n            }\n        },\n\n        // only to be called for nodes with no children\n        _splitByPlane: function (plane, coplanarfrontnodes, coplanarbacknodes, frontnodes, backnodes) {\n            var polygon = this.polygon;\n            if (polygon) {\n                var bound = polygon.boundingSphere();\n                var sphereradius = bound[1] + 1e-4;\n                var planenormal = plane.normal;\n                var spherecenter = bound[0];\n                var d = planenormal.dot(spherecenter) - plane.w;\n                if (d > sphereradius) {\n                    frontnodes.push(this);\n                } else if (d < -sphereradius) {\n                    backnodes.push(this);\n                } else {\n                    var splitresult = plane.splitPolygon(polygon);\n                    switch (splitresult.type) {\n                        case 0:\n                            // coplanar front:\n                            coplanarfrontnodes.push(this);\n                            break;\n\n                        case 1:\n                            // coplanar back:\n                            coplanarbacknodes.push(this);\n                            break;\n\n                        case 2:\n                            // front:\n                            frontnodes.push(this);\n                            break;\n\n                        case 3:\n                            // back:\n                            backnodes.push(this);\n                            break;\n\n                        case 4:\n                            // spanning:\n                            if (splitresult.front) {\n                                var frontnode = this.addChild(splitresult.front);\n                                frontnodes.push(frontnode);\n                            }\n                            if (splitresult.back) {\n                                var backnode = this.addChild(splitresult.back);\n                                backnodes.push(backnode);\n                            }\n                            break;\n                    }\n                }\n            }\n        },\n\n\n        // PRIVATE methods from here:\n        // add child to a node\n        // this should be called whenever the polygon is split\n        // a child should be created for every fragment of the split polygon\n        // returns the newly created child\n        addChild: function(polygon) {\n            var newchild = new CSG.PolygonTreeNode();\n            newchild.parent = this;\n            newchild.polygon = polygon;\n            this.children.push(newchild);\n            return newchild;\n        },\n\n        invertSub: function() {\n            var children = [this];\n            var queue = [children];\n            var i, j, l, node;\n            for (i = 0; i < queue.length; i++) {\n                children = queue[i];\n                for (j = 0, l = children.length; j < l; j++) {\n                    node = children[j];\n                    if (node.polygon) {\n                        node.polygon = node.polygon.flipped();\n                    }\n                    queue.push(node.children);\n                }\n            }\n        },\n\n        recursivelyInvalidatePolygon: function() {\n            var node = this;\n            while (node.polygon) {\n                node.polygon = null;\n                if (node.parent) {\n                    node = node.parent;\n                }\n            }\n        }\n    };\n\n\n\n    // # class Tree\n    // This is the root of a BSP tree\n    // We are using this separate class for the root of the tree, to hold the PolygonTreeNode root\n    // The actual tree is kept in this.rootnode\n    CSG.Tree = function(polygons) {\n        this.polygonTree = new CSG.PolygonTreeNode();\n        this.rootnode = new CSG.Node(null);\n        if (polygons) this.addPolygons(polygons);\n    };\n\n    CSG.Tree.prototype = {\n        invert: function() {\n            this.polygonTree.invert();\n            this.rootnode.invert();\n        },\n\n        // Remove all polygons in this BSP tree that are inside the other BSP tree\n        // `tree`.\n        clipTo: function(tree, alsoRemovecoplanarFront) {\n            alsoRemovecoplanarFront = alsoRemovecoplanarFront ? true : false;\n            this.rootnode.clipTo(tree, alsoRemovecoplanarFront);\n        },\n\n        allPolygons: function() {\n            var result = [];\n            this.polygonTree.getPolygons(result);\n            return result;\n        },\n\n        addPolygons: function(polygons) {\n            var _this = this;\n            var polygontreenodes = polygons.map(function(p) {\n                return _this.polygonTree.addChild(p);\n            });\n            this.rootnode.addPolygonTreeNodes(polygontreenodes);\n        }\n    };\n\n    // # class Node\n    // Holds a node in a BSP tree. A BSP tree is built from a collection of polygons\n    // by picking a polygon to split along.\n    // Polygons are not stored directly in the tree, but in PolygonTreeNodes, stored in\n    // this.polygontreenodes. Those PolygonTreeNodes are children of the owning\n    // CSG.Tree.polygonTree\n    // This is not a leafy BSP tree since there is\n    // no distinction between internal and leaf nodes.\n    CSG.Node = function(parent) {\n        this.plane = null;\n        this.front = null;\n        this.back = null;\n        this.polygontreenodes = [];\n        this.parent = parent;\n    };\n\n    CSG.Node.prototype = {\n        // Convert solid space to empty space and empty space to solid space.\n        invert: function() {\n            var queue = [this];\n            var i, node;\n            for (var i = 0; i < queue.length; i++) {\n                node = queue[i];\n                if(node.plane) node.plane = node.plane.flipped();\n                if(node.front) queue.push(node.front);\n                if(node.back) queue.push(node.back);\n                var temp = node.front;\n                node.front = node.back;\n                node.back = temp;\n            }\n        },\n\n        // clip polygontreenodes to our plane\n        // calls remove() for all clipped PolygonTreeNodes\n        clipPolygons: function(polygontreenodes, alsoRemovecoplanarFront) {\n            var args = {'node': this, 'polygontreenodes': polygontreenodes }\n            var node;\n            var stack = [];\n\n            do {\n                node = args.node;\n                polygontreenodes = args.polygontreenodes;\n\n                // begin \"function\"\n                if(node.plane) {\n                    var backnodes = [];\n                    var frontnodes = [];\n                    var coplanarfrontnodes = alsoRemovecoplanarFront ? backnodes : frontnodes;\n                    var plane = node.plane;\n                    var numpolygontreenodes = polygontreenodes.length;\n                    for(i = 0; i < numpolygontreenodes; i++) {\n                        var node1 = polygontreenodes[i];\n                        if(!node1.isRemoved()) {\n                            node1.splitByPlane(plane, coplanarfrontnodes, backnodes, frontnodes, backnodes);\n                        }\n                    }\n\n                    if(node.front && (frontnodes.length > 0)) {\n                        stack.push({'node': node.front, 'polygontreenodes': frontnodes});\n                    }\n                    var numbacknodes = backnodes.length;\n                    if (node.back && (numbacknodes > 0)) {\n                        stack.push({'node': node.back, 'polygontreenodes': backnodes});\n                    } else {\n                        // there's nothing behind this plane. Delete the nodes behind this plane:\n                        for (var i = 0; i < numbacknodes; i++) {\n                            backnodes[i].remove();\n                        }\n                    }\n                }\n                args = stack.pop();\n            } while (typeof(args) !== 'undefined');\n        },\n\n        // Remove all polygons in this BSP tree that are inside the other BSP tree\n        // `tree`.\n        clipTo: function(tree, alsoRemovecoplanarFront) {\n            var node = this, stack = [];\n            do {\n                if(node.polygontreenodes.length > 0) {\n                    tree.rootnode.clipPolygons(node.polygontreenodes, alsoRemovecoplanarFront);\n                }\n                if(node.front) stack.push(node.front);\n                if(node.back) stack.push(node.back);\n                node = stack.pop();\n            } while(typeof(node) !== 'undefined');\n        },\n\n        addPolygonTreeNodes: function(polygontreenodes) {\n            var args = {'node': this, 'polygontreenodes': polygontreenodes };\n            var node;\n            var stack = [];\n            do {\n                node = args.node;\n                polygontreenodes = args.polygontreenodes;\n\n                if (polygontreenodes.length === 0) {\n                    args = stack.pop();\n                    continue;\n                }\n                var _this = node;\n                if (!node.plane) {\n                    var bestplane = polygontreenodes[0].getPolygon().plane;\n                    node.plane = bestplane;\n                }\n                var frontnodes = [];\n                var backnodes = [];\n\n                for (var i = 0, n = polygontreenodes.length ; i < n; ++i) {\n                    polygontreenodes[i].splitByPlane(_this.plane, _this.polygontreenodes, backnodes, frontnodes, backnodes);\n                }\n\n                if (frontnodes.length > 0) {\n                    if (!node.front) node.front = new CSG.Node(node);\n                    stack.push({'node': node.front, 'polygontreenodes': frontnodes});\n                }\n                if (backnodes.length > 0) {\n                    if (!node.back) node.back = new CSG.Node(node);\n                    stack.push({'node': node.back, 'polygontreenodes': backnodes});\n                }\n\n                args = stack.pop();\n            } while (typeof(args) !== 'undefined');\n        },\n\n        getParentPlaneNormals: function(normals, maxdepth) {\n            if (maxdepth > 0) {\n                if (this.parent) {\n                    normals.push(this.parent.plane.normal);\n                    this.parent.getParentPlaneNormals(normals, maxdepth - 1);\n                }\n            }\n        }\n    };\n\n    //////////\n    // # class Matrix4x4:\n    // Represents a 4x4 matrix. Elements are specified in row order\n    CSG.Matrix4x4 = function(elements) {\n        if (arguments.length >= 1) {\n            this.elements = elements;\n        } else {\n            // if no arguments passed: create unity matrix\n            this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n        }\n    };\n\n    CSG.Matrix4x4.prototype = {\n        plus: function(m) {\n            var r = [];\n            for (var i = 0; i < 16; i++) {\n                r[i] = this.elements[i] + m.elements[i];\n            }\n            return new CSG.Matrix4x4(r);\n        },\n\n        minus: function(m) {\n            var r = [];\n            for (var i = 0; i < 16; i++) {\n                r[i] = this.elements[i] - m.elements[i];\n            }\n            return new CSG.Matrix4x4(r);\n        },\n\n        // right multiply by another 4x4 matrix:\n        multiply: function(m) {\n            // cache elements in local variables, for speedup:\n            var this0 = this.elements[0];\n            var this1 = this.elements[1];\n            var this2 = this.elements[2];\n            var this3 = this.elements[3];\n            var this4 = this.elements[4];\n            var this5 = this.elements[5];\n            var this6 = this.elements[6];\n            var this7 = this.elements[7];\n            var this8 = this.elements[8];\n            var this9 = this.elements[9];\n            var this10 = this.elements[10];\n            var this11 = this.elements[11];\n            var this12 = this.elements[12];\n            var this13 = this.elements[13];\n            var this14 = this.elements[14];\n            var this15 = this.elements[15];\n            var m0 = m.elements[0];\n            var m1 = m.elements[1];\n            var m2 = m.elements[2];\n            var m3 = m.elements[3];\n            var m4 = m.elements[4];\n            var m5 = m.elements[5];\n            var m6 = m.elements[6];\n            var m7 = m.elements[7];\n            var m8 = m.elements[8];\n            var m9 = m.elements[9];\n            var m10 = m.elements[10];\n            var m11 = m.elements[11];\n            var m12 = m.elements[12];\n            var m13 = m.elements[13];\n            var m14 = m.elements[14];\n            var m15 = m.elements[15];\n\n            var result = [];\n            result[0] = this0 * m0 + this1 * m4 + this2 * m8 + this3 * m12;\n            result[1] = this0 * m1 + this1 * m5 + this2 * m9 + this3 * m13;\n            result[2] = this0 * m2 + this1 * m6 + this2 * m10 + this3 * m14;\n            result[3] = this0 * m3 + this1 * m7 + this2 * m11 + this3 * m15;\n            result[4] = this4 * m0 + this5 * m4 + this6 * m8 + this7 * m12;\n            result[5] = this4 * m1 + this5 * m5 + this6 * m9 + this7 * m13;\n            result[6] = this4 * m2 + this5 * m6 + this6 * m10 + this7 * m14;\n            result[7] = this4 * m3 + this5 * m7 + this6 * m11 + this7 * m15;\n            result[8] = this8 * m0 + this9 * m4 + this10 * m8 + this11 * m12;\n            result[9] = this8 * m1 + this9 * m5 + this10 * m9 + this11 * m13;\n            result[10] = this8 * m2 + this9 * m6 + this10 * m10 + this11 * m14;\n            result[11] = this8 * m3 + this9 * m7 + this10 * m11 + this11 * m15;\n            result[12] = this12 * m0 + this13 * m4 + this14 * m8 + this15 * m12;\n            result[13] = this12 * m1 + this13 * m5 + this14 * m9 + this15 * m13;\n            result[14] = this12 * m2 + this13 * m6 + this14 * m10 + this15 * m14;\n            result[15] = this12 * m3 + this13 * m7 + this14 * m11 + this15 * m15;\n            return new CSG.Matrix4x4(result);\n        },\n\n        clone: function() {\n            var elements = this.elements.map(function(p) {\n                return p;\n            });\n            return new CSG.Matrix4x4(elements);\n        },\n\n        // Right multiply the matrix by a CSG.Vector3D (interpreted as 3 row, 1 column)\n        // (result = M*v)\n        // Fourth element is taken as 1\n        rightMultiply1x3Vector: function(v) {\n            var v0 = v._x;\n            var v1 = v._y;\n            var v2 = v._z;\n            var v3 = 1;\n            var x = v0 * this.elements[0] + v1 * this.elements[1] + v2 * this.elements[2] + v3 * this.elements[3];\n            var y = v0 * this.elements[4] + v1 * this.elements[5] + v2 * this.elements[6] + v3 * this.elements[7];\n            var z = v0 * this.elements[8] + v1 * this.elements[9] + v2 * this.elements[10] + v3 * this.elements[11];\n            var w = v0 * this.elements[12] + v1 * this.elements[13] + v2 * this.elements[14] + v3 * this.elements[15];\n            // scale such that fourth element becomes 1:\n            if (w != 1) {\n                var invw = 1.0 / w;\n                x *= invw;\n                y *= invw;\n                z *= invw;\n            }\n            return new CSG.Vector3D(x, y, z);\n        },\n\n        // Multiply a CSG.Vector3D (interpreted as 3 column, 1 row) by this matrix\n        // (result = v*M)\n        // Fourth element is taken as 1\n        leftMultiply1x3Vector: function(v) {\n            var v0 = v._x;\n            var v1 = v._y;\n            var v2 = v._z;\n            var v3 = 1;\n            var x = v0 * this.elements[0] + v1 * this.elements[4] + v2 * this.elements[8] + v3 * this.elements[12];\n            var y = v0 * this.elements[1] + v1 * this.elements[5] + v2 * this.elements[9] + v3 * this.elements[13];\n            var z = v0 * this.elements[2] + v1 * this.elements[6] + v2 * this.elements[10] + v3 * this.elements[14];\n            var w = v0 * this.elements[3] + v1 * this.elements[7] + v2 * this.elements[11] + v3 * this.elements[15];\n            // scale such that fourth element becomes 1:\n            if (w != 1) {\n                var invw = 1.0 / w;\n                x *= invw;\n                y *= invw;\n                z *= invw;\n            }\n            return new CSG.Vector3D(x, y, z);\n        },\n\n        // Right multiply the matrix by a CSG.Vector2D (interpreted as 2 row, 1 column)\n        // (result = M*v)\n        // Fourth element is taken as 1\n        rightMultiply1x2Vector: function(v) {\n            var v0 = v.x;\n            var v1 = v.y;\n            var v2 = 0;\n            var v3 = 1;\n            var x = v0 * this.elements[0] + v1 * this.elements[1] + v2 * this.elements[2] + v3 * this.elements[3];\n            var y = v0 * this.elements[4] + v1 * this.elements[5] + v2 * this.elements[6] + v3 * this.elements[7];\n            var z = v0 * this.elements[8] + v1 * this.elements[9] + v2 * this.elements[10] + v3 * this.elements[11];\n            var w = v0 * this.elements[12] + v1 * this.elements[13] + v2 * this.elements[14] + v3 * this.elements[15];\n            // scale such that fourth element becomes 1:\n            if (w != 1) {\n                var invw = 1.0 / w;\n                x *= invw;\n                y *= invw;\n                z *= invw;\n            }\n            return new CSG.Vector2D(x, y);\n        },\n\n        // Multiply a CSG.Vector2D (interpreted as 2 column, 1 row) by this matrix\n        // (result = v*M)\n        // Fourth element is taken as 1\n        leftMultiply1x2Vector: function(v) {\n            var v0 = v.x;\n            var v1 = v.y;\n            var v2 = 0;\n            var v3 = 1;\n            var x = v0 * this.elements[0] + v1 * this.elements[4] + v2 * this.elements[8] + v3 * this.elements[12];\n            var y = v0 * this.elements[1] + v1 * this.elements[5] + v2 * this.elements[9] + v3 * this.elements[13];\n            var z = v0 * this.elements[2] + v1 * this.elements[6] + v2 * this.elements[10] + v3 * this.elements[14];\n            var w = v0 * this.elements[3] + v1 * this.elements[7] + v2 * this.elements[11] + v3 * this.elements[15];\n            // scale such that fourth element becomes 1:\n            if (w != 1) {\n                var invw = 1.0 / w;\n                x *= invw;\n                y *= invw;\n                z *= invw;\n            }\n            return new CSG.Vector2D(x, y);\n        },\n\n        // determine whether this matrix is a mirroring transformation\n        isMirroring: function() {\n            var u = new CSG.Vector3D(this.elements[0], this.elements[4], this.elements[8]);\n            var v = new CSG.Vector3D(this.elements[1], this.elements[5], this.elements[9]);\n            var w = new CSG.Vector3D(this.elements[2], this.elements[6], this.elements[10]);\n\n            // for a true orthogonal, non-mirrored base, u.cross(v) == w\n            // If they have an opposite direction then we are mirroring\n            var mirrorvalue = u.cross(v).dot(w);\n            var ismirror = (mirrorvalue < 0);\n            return ismirror;\n        }\n    };\n\n    // return the unity matrix\n    CSG.Matrix4x4.unity = function() {\n        return new CSG.Matrix4x4();\n    };\n\n    // Create a rotation matrix for rotating around the x axis\n    CSG.Matrix4x4.rotationX = function(degrees) {\n        var radians = degrees * Math.PI * (1.0 / 180.0);\n        var cos = Math.cos(radians);\n        var sin = Math.sin(radians);\n        var els = [\n            1, 0, 0, 0, 0, cos, sin, 0, 0, -sin, cos, 0, 0, 0, 0, 1\n        ];\n        return new CSG.Matrix4x4(els);\n    };\n\n    // Create a rotation matrix for rotating around the y axis\n    CSG.Matrix4x4.rotationY = function(degrees) {\n        var radians = degrees * Math.PI * (1.0 / 180.0);\n        var cos = Math.cos(radians);\n        var sin = Math.sin(radians);\n        var els = [\n            cos, 0, -sin, 0, 0, 1, 0, 0, sin, 0, cos, 0, 0, 0, 0, 1\n        ];\n        return new CSG.Matrix4x4(els);\n    };\n\n    // Create a rotation matrix for rotating around the z axis\n    CSG.Matrix4x4.rotationZ = function(degrees) {\n        var radians = degrees * Math.PI * (1.0 / 180.0);\n        var cos = Math.cos(radians);\n        var sin = Math.sin(radians);\n        var els = [\n            cos, sin, 0, 0, -sin, cos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1\n        ];\n        return new CSG.Matrix4x4(els);\n    };\n\n    // Matrix for rotation about arbitrary point and axis\n    CSG.Matrix4x4.rotation = function(rotationCenter, rotationAxis, degrees) {\n        rotationCenter = new CSG.Vector3D(rotationCenter);\n        rotationAxis = new CSG.Vector3D(rotationAxis);\n        var rotationPlane = CSG.Plane.fromNormalAndPoint(rotationAxis, rotationCenter);\n        var orthobasis = new CSG.OrthoNormalBasis(rotationPlane);\n        var transformation = CSG.Matrix4x4.translation(rotationCenter.negated());\n        transformation = transformation.multiply(orthobasis.getProjectionMatrix());\n        transformation = transformation.multiply(CSG.Matrix4x4.rotationZ(degrees));\n        transformation = transformation.multiply(orthobasis.getInverseProjectionMatrix());\n        transformation = transformation.multiply(CSG.Matrix4x4.translation(rotationCenter));\n        return transformation;\n    };\n\n    // Create an affine matrix for translation:\n    CSG.Matrix4x4.translation = function(v) {\n        // parse as CSG.Vector3D, so we can pass an array or a CSG.Vector3D\n        var vec = new CSG.Vector3D(v);\n        var els = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, vec.x, vec.y, vec.z, 1];\n        return new CSG.Matrix4x4(els);\n    };\n\n    // Create an affine matrix for mirroring into an arbitrary plane:\n    CSG.Matrix4x4.mirroring = function(plane) {\n        var nx = plane.normal.x;\n        var ny = plane.normal.y;\n        var nz = plane.normal.z;\n        var w = plane.w;\n        var els = [\n            (1.0 - 2.0 * nx * nx), (-2.0 * ny * nx), (-2.0 * nz * nx), 0,\n            (-2.0 * nx * ny), (1.0 - 2.0 * ny * ny), (-2.0 * nz * ny), 0,\n            (-2.0 * nx * nz), (-2.0 * ny * nz), (1.0 - 2.0 * nz * nz), 0,\n            (2.0 * nx * w), (2.0 * ny * w), (2.0 * nz * w), 1\n        ];\n        return new CSG.Matrix4x4(els);\n    };\n\n    // Create an affine matrix for scaling:\n    CSG.Matrix4x4.scaling = function(v) {\n        // parse as CSG.Vector3D, so we can pass an array or a CSG.Vector3D\n        var vec = new CSG.Vector3D(v);\n        var els = [\n            vec.x, 0, 0, 0, 0, vec.y, 0, 0, 0, 0, vec.z, 0, 0, 0, 0, 1\n        ];\n        return new CSG.Matrix4x4(els);\n    };\n\n    ///////////////////////////////////////////////////\n    // # class Vector2D:\n    // Represents a 2 element vector\n    CSG.Vector2D = function(x, y) {\n        if (arguments.length == 2) {\n            this._x = parseFloat(x);\n            this._y = parseFloat(y);\n        } else {\n            var ok = true;\n            if (arguments.length == 1) {\n                if (typeof(x) == \"object\") {\n                    if (x instanceof CSG.Vector2D) {\n                        this._x = x._x;\n                        this._y = x._y;\n                    } else if (x instanceof Array) {\n                        this._x = parseFloat(x[0]);\n                        this._y = parseFloat(x[1]);\n                    } else if (('x' in x) && ('y' in x)) {\n                        this._x = parseFloat(x.x);\n                        this._y = parseFloat(x.y);\n                    } else ok = false;\n                } else {\n                    var v = parseFloat(x);\n                    this._x = v;\n                    this._y = v;\n                }\n            } else ok = false;\n            if (ok) {\n                if ((!CSG.IsFloat(this._x)) || (!CSG.IsFloat(this._y))) ok = false;\n            }\n            if (!ok) {\n                throw new Error(\"wrong arguments\");\n            }\n        }\n    };\n\n    CSG.Vector2D.fromAngle = function(radians) {\n        return CSG.Vector2D.fromAngleRadians(radians);\n    };\n\n    CSG.Vector2D.fromAngleDegrees = function(degrees) {\n        var radians = Math.PI * degrees / 180;\n        return CSG.Vector2D.fromAngleRadians(radians);\n    };\n\n    CSG.Vector2D.fromAngleRadians = function(radians) {\n        return CSG.Vector2D.Create(Math.cos(radians), Math.sin(radians));\n    };\n\n    // This does the same as new CSG.Vector2D(x,y) but it doesn't go through the constructor\n    // and the parameters are not validated. Is much faster.\n    CSG.Vector2D.Create = function(x, y) {\n        var result = Object.create(CSG.Vector2D.prototype);\n        result._x = x;\n        result._y = y;\n        return result;\n    };\n\n    CSG.Vector2D.prototype = {\n        get x() {\n            return this._x;\n        },\n        get y() {\n            return this._y;\n        },\n\n        set x(v) {\n            throw new Error(\"Vector2D is immutable\");\n        },\n        set y(v) {\n            throw new Error(\"Vector2D is immutable\");\n        },\n\n        // extend to a 3D vector by adding a z coordinate:\n        toVector3D: function(z) {\n            return new CSG.Vector3D(this._x, this._y, z);\n        },\n\n        equals: function(a) {\n            return (this._x == a._x) && (this._y == a._y);\n        },\n\n        clone: function() {\n            return CSG.Vector2D.Create(this._x, this._y);\n        },\n\n        negated: function() {\n            return CSG.Vector2D.Create(-this._x, -this._y);\n        },\n\n        plus: function(a) {\n            return CSG.Vector2D.Create(this._x + a._x, this._y + a._y);\n        },\n\n        minus: function(a) {\n            return CSG.Vector2D.Create(this._x - a._x, this._y - a._y);\n        },\n\n        times: function(a) {\n            return CSG.Vector2D.Create(this._x * a, this._y * a);\n        },\n\n        dividedBy: function(a) {\n            return CSG.Vector2D.Create(this._x / a, this._y / a);\n        },\n\n        dot: function(a) {\n            return this._x * a._x + this._y * a._y;\n        },\n\n        lerp: function(a, t) {\n            return this.plus(a.minus(this).times(t));\n        },\n\n        length: function() {\n            return Math.sqrt(this.dot(this));\n        },\n\n        distanceTo: function(a) {\n            return this.minus(a).length();\n        },\n\n        distanceToSquared: function(a) {\n            return this.minus(a).lengthSquared();\n        },\n\n        lengthSquared: function() {\n            return this.dot(this);\n        },\n\n        unit: function() {\n            return this.dividedBy(this.length());\n        },\n\n        cross: function(a) {\n            return this._x * a._y - this._y * a._x;\n        },\n\n        // returns the vector rotated by 90 degrees clockwise\n        normal: function() {\n            return CSG.Vector2D.Create(this._y, -this._x);\n        },\n\n        // Right multiply by a 4x4 matrix (the vector is interpreted as a row vector)\n        // Returns a new CSG.Vector2D\n        multiply4x4: function(matrix4x4) {\n            return matrix4x4.leftMultiply1x2Vector(this);\n        },\n\n        transform: function(matrix4x4) {\n            return matrix4x4.leftMultiply1x2Vector(this);\n        },\n\n        angle: function() {\n            return this.angleRadians();\n        },\n\n        angleDegrees: function() {\n            var radians = this.angleRadians();\n            return 180 * radians / Math.PI;\n        },\n\n        angleRadians: function() {\n            // y=sin, x=cos\n            return Math.atan2(this._y, this._x);\n        },\n\n        min: function(p) {\n            return CSG.Vector2D.Create(\n                Math.min(this._x, p._x), Math.min(this._y, p._y));\n        },\n\n        max: function(p) {\n            return CSG.Vector2D.Create(\n                Math.max(this._x, p._x), Math.max(this._y, p._y));\n        },\n\n        toString: function() {\n            return \"(\" + this._x.toFixed(2) + \", \" + this._y.toFixed(2) + \")\";\n        },\n\n        abs: function() {\n            return CSG.Vector2D.Create(Math.abs(this._x), Math.abs(this._y));\n        },\n    };\n\n\n    // # class Line2D\n    // Represents a directional line in 2D space\n    // A line is parametrized by its normal vector (perpendicular to the line, rotated 90 degrees counter clockwise)\n    // and w. The line passes through the point <normal>.times(w).\n    // normal must be a unit vector!\n    // Equation: p is on line if normal.dot(p)==w\n    CSG.Line2D = function(normal, w) {\n        normal = new CSG.Vector2D(normal);\n        w = parseFloat(w);\n        var l = normal.length();\n        // normalize:\n        w *= l;\n        normal = normal.times(1.0 / l);\n        this.normal = normal;\n        this.w = w;\n    };\n\n    CSG.Line2D.fromPoints = function(p1, p2) {\n        p1 = new CSG.Vector2D(p1);\n        p2 = new CSG.Vector2D(p2);\n        var direction = p2.minus(p1);\n        var normal = direction.normal().negated().unit();\n        var w = p1.dot(normal);\n        return new CSG.Line2D(normal, w);\n    };\n\n    CSG.Line2D.prototype = {\n        // same line but opposite direction:\n        reverse: function() {\n            return new CSG.Line2D(this.normal.negated(), -this.w);\n        },\n\n        equals: function(l) {\n            return (l.normal.equals(this.normal) && (l.w == this.w));\n        },\n\n        origin: function() {\n            return this.normal.times(this.w);\n        },\n\n        direction: function() {\n            return this.normal.normal();\n        },\n\n        xAtY: function(y) {\n            // (py == y) && (normal * p == w)\n            // -> px = (w - normal._y * y) / normal.x\n            var x = (this.w - this.normal._y * y) / this.normal.x;\n            return x;\n        },\n\n        absDistanceToPoint: function(point) {\n            point = new CSG.Vector2D(point);\n            var point_projected = point.dot(this.normal);\n            var distance = Math.abs(point_projected - this.w);\n            return distance;\n        },\n        /*FIXME: has error - origin is not defined, the method is never used\n         closestPoint: function(point) {\n             point = new CSG.Vector2D(point);\n             var vector = point.dot(this.direction());\n             return origin.plus(vector);\n         },\n         */\n\n        // intersection between two lines, returns point as Vector2D\n        intersectWithLine: function(line2d) {\n            var point = CSG.solve2Linear(this.normal.x, this.normal.y, line2d.normal.x, line2d.normal.y, this.w, line2d.w);\n            point = new CSG.Vector2D(point); // make  vector2d\n            return point;\n        },\n\n        transform: function(matrix4x4) {\n            var origin = new CSG.Vector2D(0, 0);\n            var pointOnPlane = this.normal.times(this.w);\n            var neworigin = origin.multiply4x4(matrix4x4);\n            var neworiginPlusNormal = this.normal.multiply4x4(matrix4x4);\n            var newnormal = neworiginPlusNormal.minus(neworigin);\n            var newpointOnPlane = pointOnPlane.multiply4x4(matrix4x4);\n            var neww = newnormal.dot(newpointOnPlane);\n            return new CSG.Line2D(newnormal, neww);\n        }\n    };\n\n    // # class Line3D\n    // Represents a line in 3D space\n    // direction must be a unit vector\n    // point is a random point on the line\n    CSG.Line3D = function(point, direction) {\n        point = new CSG.Vector3D(point);\n        direction = new CSG.Vector3D(direction);\n        this.point = point;\n        this.direction = direction.unit();\n    };\n\n    CSG.Line3D.fromPoints = function(p1, p2) {\n        p1 = new CSG.Vector3D(p1);\n        p2 = new CSG.Vector3D(p2);\n        var direction = p2.minus(p1);\n        return new CSG.Line3D(p1, direction);\n    };\n\n    CSG.Line3D.fromPlanes = function(p1, p2) {\n        var direction = p1.normal.cross(p2.normal);\n        var l = direction.length();\n        if (l < 1e-10) {\n            throw new Error(\"Parallel planes\");\n        }\n        direction = direction.times(1.0 / l);\n\n        var mabsx = Math.abs(direction.x);\n        var mabsy = Math.abs(direction.y);\n        var mabsz = Math.abs(direction.z);\n        var origin;\n        if ((mabsx >= mabsy) && (mabsx >= mabsz)) {\n            // direction vector is mostly pointing towards x\n            // find a point p for which x is zero:\n            var r = CSG.solve2Linear(p1.normal.y, p1.normal.z, p2.normal.y, p2.normal.z, p1.w, p2.w);\n            origin = new CSG.Vector3D(0, r[0], r[1]);\n        } else if ((mabsy >= mabsx) && (mabsy >= mabsz)) {\n            // find a point p for which y is zero:\n            var r = CSG.solve2Linear(p1.normal.x, p1.normal.z, p2.normal.x, p2.normal.z, p1.w, p2.w);\n            origin = new CSG.Vector3D(r[0], 0, r[1]);\n        } else {\n            // find a point p for which z is zero:\n            var r = CSG.solve2Linear(p1.normal.x, p1.normal.y, p2.normal.x, p2.normal.y, p1.w, p2.w);\n            origin = new CSG.Vector3D(r[0], r[1], 0);\n        }\n        return new CSG.Line3D(origin, direction);\n    };\n\n\n    CSG.Line3D.prototype = {\n        intersectWithPlane: function(plane) {\n            // plane: plane.normal * p = plane.w\n            // line: p=line.point + labda * line.direction\n            var labda = (plane.w - plane.normal.dot(this.point)) / plane.normal.dot(this.direction);\n            var point = this.point.plus(this.direction.times(labda));\n            return point;\n        },\n\n        clone: function(line) {\n            return new CSG.Line3D(this.point.clone(), this.direction.clone());\n        },\n\n        reverse: function() {\n            return new CSG.Line3D(this.point.clone(), this.direction.negated());\n        },\n\n        transform: function(matrix4x4) {\n            var newpoint = this.point.multiply4x4(matrix4x4);\n            var pointPlusDirection = this.point.plus(this.direction);\n            var newPointPlusDirection = pointPlusDirection.multiply4x4(matrix4x4);\n            var newdirection = newPointPlusDirection.minus(newpoint);\n            return new CSG.Line3D(newpoint, newdirection);\n        },\n\n        closestPointOnLine: function(point) {\n            point = new CSG.Vector3D(point);\n            var t = point.minus(this.point).dot(this.direction) / this.direction.dot(this.direction);\n            var closestpoint = this.point.plus(this.direction.times(t));\n            return closestpoint;\n        },\n\n        distanceToPoint: function(point) {\n            point = new CSG.Vector3D(point);\n            var closestpoint = this.closestPointOnLine(point);\n            var distancevector = point.minus(closestpoint);\n            var distance = distancevector.length();\n            return distance;\n        },\n\n        equals: function(line3d) {\n            if (!this.direction.equals(line3d.direction)) return false;\n            var distance = this.distanceToPoint(line3d.point);\n            if (distance > 1e-8) return false;\n            return true;\n        }\n    };\n\n\n    // # class OrthoNormalBasis\n    // Reprojects points on a 3D plane onto a 2D plane\n    // or from a 2D plane back onto the 3D plane\n    CSG.OrthoNormalBasis = function(plane, rightvector) {\n        if (arguments.length < 2) {\n            // choose an arbitrary right hand vector, making sure it is somewhat orthogonal to the plane normal:\n            rightvector = plane.normal.randomNonParallelVector();\n        } else {\n            rightvector = new CSG.Vector3D(rightvector);\n        }\n        this.v = plane.normal.cross(rightvector).unit();\n        this.u = this.v.cross(plane.normal);\n        this.plane = plane;\n        this.planeorigin = plane.normal.times(plane.w);\n    };\n\n    // Get an orthonormal basis for the standard XYZ planes.\n    // Parameters: the names of two 3D axes. The 2d x axis will map to the first given 3D axis, the 2d y \n    // axis will map to the second.\n    // Prepend the axis with a \"-\" to invert the direction of this axis.\n    // For example: CSG.OrthoNormalBasis.GetCartesian(\"-Y\",\"Z\")\n    //   will return an orthonormal basis where the 2d X axis maps to the 3D inverted Y axis, and\n    //   the 2d Y axis maps to the 3D Z axis.\n    CSG.OrthoNormalBasis.GetCartesian = function(xaxisid, yaxisid) {\n        var axisid = xaxisid + \"/\" + yaxisid;\n        var planenormal, rightvector;\n        if (axisid == \"X/Y\") {\n            planenormal = [0, 0, 1];\n            rightvector = [1, 0, 0];\n        } else if (axisid == \"Y/-X\") {\n            planenormal = [0, 0, 1];\n            rightvector = [0, 1, 0];\n        } else if (axisid == \"-X/-Y\") {\n            planenormal = [0, 0, 1];\n            rightvector = [-1, 0, 0];\n        } else if (axisid == \"-Y/X\") {\n            planenormal = [0, 0, 1];\n            rightvector = [0, -1, 0];\n        } else if (axisid == \"-X/Y\") {\n            planenormal = [0, 0, -1];\n            rightvector = [-1, 0, 0];\n        } else if (axisid == \"-Y/-X\") {\n            planenormal = [0, 0, -1];\n            rightvector = [0, -1, 0];\n        } else if (axisid == \"X/-Y\") {\n            planenormal = [0, 0, -1];\n            rightvector = [1, 0, 0];\n        } else if (axisid == \"Y/X\") {\n            planenormal = [0, 0, -1];\n            rightvector = [0, 1, 0];\n        } else if (axisid == \"X/Z\") {\n            planenormal = [0, -1, 0];\n            rightvector = [1, 0, 0];\n        } else if (axisid == \"Z/-X\") {\n            planenormal = [0, -1, 0];\n            rightvector = [0, 0, 1];\n        } else if (axisid == \"-X/-Z\") {\n            planenormal = [0, -1, 0];\n            rightvector = [-1, 0, 0];\n        } else if (axisid == \"-Z/X\") {\n            planenormal = [0, -1, 0];\n            rightvector = [0, 0, -1];\n        } else if (axisid == \"-X/Z\") {\n            planenormal = [0, 1, 0];\n            rightvector = [-1, 0, 0];\n        } else if (axisid == \"-Z/-X\") {\n            planenormal = [0, 1, 0];\n            rightvector = [0, 0, -1];\n        } else if (axisid == \"X/-Z\") {\n            planenormal = [0, 1, 0];\n            rightvector = [1, 0, 0];\n        } else if (axisid == \"Z/X\") {\n            planenormal = [0, 1, 0];\n            rightvector = [0, 0, 1];\n        } else if (axisid == \"Y/Z\") {\n            planenormal = [1, 0, 0];\n            rightvector = [0, 1, 0];\n        } else if (axisid == \"Z/-Y\") {\n            planenormal = [1, 0, 0];\n            rightvector = [0, 0, 1];\n        } else if (axisid == \"-Y/-Z\") {\n            planenormal = [1, 0, 0];\n            rightvector = [0, -1, 0];\n        } else if (axisid == \"-Z/Y\") {\n            planenormal = [1, 0, 0];\n            rightvector = [0, 0, -1];\n        } else if (axisid == \"-Y/Z\") {\n            planenormal = [-1, 0, 0];\n            rightvector = [0, -1, 0];\n        } else if (axisid == \"-Z/-Y\") {\n            planenormal = [-1, 0, 0];\n            rightvector = [0, 0, -1];\n        } else if (axisid == \"Y/-Z\") {\n            planenormal = [-1, 0, 0];\n            rightvector = [0, 1, 0];\n        } else if (axisid == \"Z/Y\") {\n            planenormal = [-1, 0, 0];\n            rightvector = [0, 0, 1];\n        } else {\n            throw new Error(\"CSG.OrthoNormalBasis.GetCartesian: invalid combination of axis identifiers. Should pass two string arguments from [X,Y,Z,-X,-Y,-Z], being two different axes.\");\n        }\n        return new CSG.OrthoNormalBasis(new CSG.Plane(new CSG.Vector3D(planenormal), 0), new CSG.Vector3D(rightvector));\n    };\n\n    /*\n    // test code for CSG.OrthoNormalBasis.GetCartesian()\n    CSG.OrthoNormalBasis.GetCartesian_Test=function() {\n      var axisnames=[\"X\",\"Y\",\"Z\",\"-X\",\"-Y\",\"-Z\"];\n      var axisvectors=[[1,0,0], [0,1,0], [0,0,1], [-1,0,0], [0,-1,0], [0,0,-1]];\n      for(var axis1=0; axis1 < 3; axis1++) {\n        for(var axis1inverted=0; axis1inverted < 2; axis1inverted++) {\n          var axis1name=axisnames[axis1+3*axis1inverted];\n          var axis1vector=axisvectors[axis1+3*axis1inverted];\n          for(var axis2=0; axis2 < 3; axis2++) {\n            if(axis2 != axis1) {\n              for(var axis2inverted=0; axis2inverted < 2; axis2inverted++) {\n                var axis2name=axisnames[axis2+3*axis2inverted];\n                var axis2vector=axisvectors[axis2+3*axis2inverted];\n                var orthobasis=CSG.OrthoNormalBasis.GetCartesian(axis1name, axis2name);\n                var test1=orthobasis.to3D(new CSG.Vector2D([1,0]));\n                var test2=orthobasis.to3D(new CSG.Vector2D([0,1]));\n                var expected1=new CSG.Vector3D(axis1vector);\n                var expected2=new CSG.Vector3D(axis2vector);\n                var d1=test1.distanceTo(expected1);\n                var d2=test2.distanceTo(expected2);\n                if( (d1 > 0.01) || (d2 > 0.01) ) {\n                  throw new Error(\"Wrong!\");\n      }}}}}}\n      throw new Error(\"OK\");\n    };\n    */\n\n    // The z=0 plane, with the 3D x and y vectors mapped to the 2D x and y vector\n    CSG.OrthoNormalBasis.Z0Plane = function() {\n        var plane = new CSG.Plane(new CSG.Vector3D([0, 0, 1]), 0);\n        return new CSG.OrthoNormalBasis(plane, new CSG.Vector3D([1, 0, 0]));\n    };\n\n    CSG.OrthoNormalBasis.prototype = {\n        getProjectionMatrix: function() {\n            return new CSG.Matrix4x4([\n                this.u.x, this.v.x, this.plane.normal.x, 0,\n                this.u.y, this.v.y, this.plane.normal.y, 0,\n                this.u.z, this.v.z, this.plane.normal.z, 0,\n                0, 0, -this.plane.w, 1\n            ]);\n        },\n\n        getInverseProjectionMatrix: function() {\n            var p = this.plane.normal.times(this.plane.w);\n            return new CSG.Matrix4x4([\n                this.u.x, this.u.y, this.u.z, 0,\n                this.v.x, this.v.y, this.v.z, 0,\n                this.plane.normal.x, this.plane.normal.y, this.plane.normal.z, 0,\n                p.x, p.y, p.z, 1\n            ]);\n        },\n\n        to2D: function(vec3) {\n            return new CSG.Vector2D(vec3.dot(this.u), vec3.dot(this.v));\n        },\n\n        to3D: function(vec2) {\n            return this.planeorigin.plus(this.u.times(vec2.x)).plus(this.v.times(vec2.y));\n        },\n\n        line3Dto2D: function(line3d) {\n            var a = line3d.point;\n            var b = line3d.direction.plus(a);\n            var a2d = this.to2D(a);\n            var b2d = this.to2D(b);\n            return CSG.Line2D.fromPoints(a2d, b2d);\n        },\n\n        line2Dto3D: function(line2d) {\n            var a = line2d.origin();\n            var b = line2d.direction().plus(a);\n            var a3d = this.to3D(a);\n            var b3d = this.to3D(b);\n            return CSG.Line3D.fromPoints(a3d, b3d);\n        },\n\n        transform: function(matrix4x4) {\n            // todo: this may not work properly in case of mirroring\n            var newplane = this.plane.transform(matrix4x4);\n            var rightpoint_transformed = this.u.transform(matrix4x4);\n            var origin_transformed = new CSG.Vector3D(0, 0, 0).transform(matrix4x4);\n            var newrighthandvector = rightpoint_transformed.minus(origin_transformed);\n            var newbasis = new CSG.OrthoNormalBasis(newplane, newrighthandvector);\n            return newbasis;\n        }\n    };\n\n    function insertSorted(array, element, comparefunc) {\n        var leftbound = 0;\n        var rightbound = array.length;\n        while (rightbound > leftbound) {\n            var testindex = Math.floor((leftbound + rightbound) / 2);\n            var testelement = array[testindex];\n            var compareresult = comparefunc(element, testelement);\n            if (compareresult > 0) // element > testelement\n            {\n                leftbound = testindex + 1;\n            } else {\n                rightbound = testindex;\n            }\n        }\n        array.splice(leftbound, 0, element);\n    }\n\n    // Get the x coordinate of a point with a certain y coordinate, interpolated between two\n    // points (CSG.Vector2D).\n    // Interpolation is robust even if the points have the same y coordinate\n    CSG.interpolateBetween2DPointsForY = function(point1, point2, y) {\n        var f1 = y - point1.y;\n        var f2 = point2.y - point1.y;\n        if (f2 < 0) {\n            f1 = -f1;\n            f2 = -f2;\n        }\n        var t;\n        if (f1 <= 0) {\n            t = 0.0;\n        } else if (f1 >= f2) {\n            t = 1.0;\n        } else if (f2 < 1e-10) {\n            t = 0.5;\n        } else {\n            t = f1 / f2;\n        }\n        var result = point1.x + t * (point2.x - point1.x);\n        return result;\n    };\n\n    // Retesselation function for a set of coplanar polygons. See the introduction at the top of\n    // this file.\n    CSG.reTesselateCoplanarPolygons = function(sourcepolygons, destpolygons) {\n        var EPS = 1e-5;\n\n        var numpolygons = sourcepolygons.length;\n        if (numpolygons > 0) {\n            var plane = sourcepolygons[0].plane;\n            var shared = sourcepolygons[0].shared;\n            var orthobasis = new CSG.OrthoNormalBasis(plane);\n            var polygonvertices2d = []; // array of array of CSG.Vector2D\n            var polygontopvertexindexes = []; // array of indexes of topmost vertex per polygon\n            var topy2polygonindexes = {};\n            var ycoordinatetopolygonindexes = {};\n\n            var xcoordinatebins = {};\n            var ycoordinatebins = {};\n\n            // convert all polygon vertices to 2D\n            // Make a list of all encountered y coordinates\n            // And build a map of all polygons that have a vertex at a certain y coordinate:\n            var ycoordinateBinningFactor = 1.0 / EPS * 10;\n            for (var polygonindex = 0; polygonindex < numpolygons; polygonindex++) {\n                var poly3d = sourcepolygons[polygonindex];\n                var vertices2d = [];\n                var numvertices = poly3d.vertices.length;\n                var minindex = -1;\n                if (numvertices > 0) {\n                    var miny, maxy, maxindex;\n                    for (var i = 0; i < numvertices; i++) {\n                        var pos2d = orthobasis.to2D(poly3d.vertices[i].pos);\n                        // perform binning of y coordinates: If we have multiple vertices very\n                        // close to each other, give them the same y coordinate:\n                        var ycoordinatebin = Math.floor(pos2d.y * ycoordinateBinningFactor);\n                        var newy;\n                        if (ycoordinatebin in ycoordinatebins) {\n                            newy = ycoordinatebins[ycoordinatebin];\n                        } else if (ycoordinatebin + 1 in ycoordinatebins) {\n                            newy = ycoordinatebins[ycoordinatebin + 1];\n                        } else if (ycoordinatebin - 1 in ycoordinatebins) {\n                            newy = ycoordinatebins[ycoordinatebin - 1];\n                        } else {\n                            newy = pos2d.y;\n                            ycoordinatebins[ycoordinatebin] = pos2d.y;\n                        }\n                        pos2d = CSG.Vector2D.Create(pos2d.x, newy);\n                        vertices2d.push(pos2d);\n                        var y = pos2d.y;\n                        if ((i === 0) || (y < miny)) {\n                            miny = y;\n                            minindex = i;\n                        }\n                        if ((i === 0) || (y > maxy)) {\n                            maxy = y;\n                            maxindex = i;\n                        }\n                        if (!(y in ycoordinatetopolygonindexes)) {\n                            ycoordinatetopolygonindexes[y] = {};\n                        }\n                        ycoordinatetopolygonindexes[y][polygonindex] = true;\n                    }\n                    if (miny >= maxy) {\n                        // degenerate polygon, all vertices have same y coordinate. Just ignore it from now:\n                        vertices2d = [];\n                        numvertices = 0;\n                        minindex = -1;\n                    } else {\n                        if (!(miny in topy2polygonindexes)) {\n                            topy2polygonindexes[miny] = [];\n                        }\n                        topy2polygonindexes[miny].push(polygonindex);\n                    }\n                } // if(numvertices > 0)\n                // reverse the vertex order:\n                vertices2d.reverse();\n                minindex = numvertices - minindex - 1;\n                polygonvertices2d.push(vertices2d);\n                polygontopvertexindexes.push(minindex);\n            }\n            var ycoordinates = [];\n            for (var ycoordinate in ycoordinatetopolygonindexes) ycoordinates.push(ycoordinate);\n            ycoordinates.sort(fnNumberSort);\n\n            // Now we will iterate over all y coordinates, from lowest to highest y coordinate\n            // activepolygons: source polygons that are 'active', i.e. intersect with our y coordinate\n            //   Is sorted so the polygons are in left to right order\n            // Each element in activepolygons has these properties:\n            //        polygonindex: the index of the source polygon (i.e. an index into the sourcepolygons\n            //                      and polygonvertices2d arrays)\n            //        leftvertexindex: the index of the vertex at the left side of the polygon (lowest x)\n            //                         that is at or just above the current y coordinate\n            //        rightvertexindex: dito at right hand side of polygon\n            //        topleft, bottomleft: coordinates of the left side of the polygon crossing the current y coordinate\n            //        topright, bottomright: coordinates of the right hand side of the polygon crossing the current y coordinate\n            var activepolygons = [];\n            var prevoutpolygonrow = [];\n            for (var yindex = 0; yindex < ycoordinates.length; yindex++) {\n                var newoutpolygonrow = [];\n                var ycoordinate_as_string = ycoordinates[yindex];\n                var ycoordinate = Number(ycoordinate_as_string);\n\n                // update activepolygons for this y coordinate:\n                // - Remove any polygons that end at this y coordinate\n                // - update leftvertexindex and rightvertexindex (which point to the current vertex index\n                //   at the the left and right side of the polygon\n                // Iterate over all polygons that have a corner at this y coordinate:\n                var polygonindexeswithcorner = ycoordinatetopolygonindexes[ycoordinate_as_string];\n                for (var activepolygonindex = 0; activepolygonindex < activepolygons.length; ++activepolygonindex) {\n                    var activepolygon = activepolygons[activepolygonindex];\n                    var polygonindex = activepolygon.polygonindex;\n                    if (polygonindexeswithcorner[polygonindex]) {\n                        // this active polygon has a corner at this y coordinate:\n                        var vertices2d = polygonvertices2d[polygonindex];\n                        var numvertices = vertices2d.length;\n                        var newleftvertexindex = activepolygon.leftvertexindex;\n                        var newrightvertexindex = activepolygon.rightvertexindex;\n                        // See if we need to increase leftvertexindex or decrease rightvertexindex:\n                        while (true) {\n                            var nextleftvertexindex = newleftvertexindex + 1;\n                            if (nextleftvertexindex >= numvertices) nextleftvertexindex = 0;\n                            if (vertices2d[nextleftvertexindex].y != ycoordinate) break;\n                            newleftvertexindex = nextleftvertexindex;\n                        }\n                        var nextrightvertexindex = newrightvertexindex - 1;\n                        if (nextrightvertexindex < 0) nextrightvertexindex = numvertices - 1;\n                        if (vertices2d[nextrightvertexindex].y == ycoordinate) {\n                            newrightvertexindex = nextrightvertexindex;\n                        }\n                        if ((newleftvertexindex != activepolygon.leftvertexindex) && (newleftvertexindex == newrightvertexindex)) {\n                            // We have increased leftvertexindex or decreased rightvertexindex, and now they point to the same vertex\n                            // This means that this is the bottom point of the polygon. We'll remove it:\n                            activepolygons.splice(activepolygonindex, 1);\n                            --activepolygonindex;\n                        } else {\n                            activepolygon.leftvertexindex = newleftvertexindex;\n                            activepolygon.rightvertexindex = newrightvertexindex;\n                            activepolygon.topleft = vertices2d[newleftvertexindex];\n                            activepolygon.topright = vertices2d[newrightvertexindex];\n                            var nextleftvertexindex = newleftvertexindex + 1;\n                            if (nextleftvertexindex >= numvertices) nextleftvertexindex = 0;\n                            activepolygon.bottomleft = vertices2d[nextleftvertexindex];\n                            var nextrightvertexindex = newrightvertexindex - 1;\n                            if (nextrightvertexindex < 0) nextrightvertexindex = numvertices - 1;\n                            activepolygon.bottomright = vertices2d[nextrightvertexindex];\n                        }\n                    } // if polygon has corner here\n                } // for activepolygonindex\n                var nextycoordinate;\n                if (yindex >= ycoordinates.length - 1) {\n                    // last row, all polygons must be finished here:\n                    activepolygons = [];\n                    nextycoordinate = null;\n                } else // yindex < ycoordinates.length-1\n                {\n                    nextycoordinate = Number(ycoordinates[yindex + 1]);\n                    var middleycoordinate = 0.5 * (ycoordinate + nextycoordinate);\n                    // update activepolygons by adding any polygons that start here:\n                    var startingpolygonindexes = topy2polygonindexes[ycoordinate_as_string];\n                    for (var polygonindex_key in startingpolygonindexes) {\n                        var polygonindex = startingpolygonindexes[polygonindex_key];\n                        var vertices2d = polygonvertices2d[polygonindex];\n                        var numvertices = vertices2d.length;\n                        var topvertexindex = polygontopvertexindexes[polygonindex];\n                        // the top of the polygon may be a horizontal line. In that case topvertexindex can point to any point on this line.\n                        // Find the left and right topmost vertices which have the current y coordinate:\n                        var topleftvertexindex = topvertexindex;\n                        while (true) {\n                            var i = topleftvertexindex + 1;\n                            if (i >= numvertices) i = 0;\n                            if (vertices2d[i].y != ycoordinate) break;\n                            if (i == topvertexindex) break; // should not happen, but just to prevent endless loops\n                            topleftvertexindex = i;\n                        }\n                        var toprightvertexindex = topvertexindex;\n                        while (true) {\n                            var i = toprightvertexindex - 1;\n                            if (i < 0) i = numvertices - 1;\n                            if (vertices2d[i].y != ycoordinate) break;\n                            if (i == topleftvertexindex) break; // should not happen, but just to prevent endless loops\n                            toprightvertexindex = i;\n                        }\n                        var nextleftvertexindex = topleftvertexindex + 1;\n                        if (nextleftvertexindex >= numvertices) nextleftvertexindex = 0;\n                        var nextrightvertexindex = toprightvertexindex - 1;\n                        if (nextrightvertexindex < 0) nextrightvertexindex = numvertices - 1;\n                        var newactivepolygon = {\n                            polygonindex: polygonindex,\n                            leftvertexindex: topleftvertexindex,\n                            rightvertexindex: toprightvertexindex,\n                            topleft: vertices2d[topleftvertexindex],\n                            topright: vertices2d[toprightvertexindex],\n                            bottomleft: vertices2d[nextleftvertexindex],\n                            bottomright: vertices2d[nextrightvertexindex],\n                        };\n                        insertSorted(activepolygons, newactivepolygon, function(el1, el2) {\n                            var x1 = CSG.interpolateBetween2DPointsForY(\n                                el1.topleft, el1.bottomleft, middleycoordinate);\n                            var x2 = CSG.interpolateBetween2DPointsForY(\n                                el2.topleft, el2.bottomleft, middleycoordinate);\n                            if (x1 > x2) return 1;\n                            if (x1 < x2) return -1;\n                            return 0;\n                        });\n                    } // for(var polygonindex in startingpolygonindexes)\n                } //  yindex < ycoordinates.length-1\n                //if( (yindex == ycoordinates.length-1) || (nextycoordinate - ycoordinate > EPS) )\n                if (true) {\n                    // Now activepolygons is up to date\n                    // Build the output polygons for the next row in newoutpolygonrow:\n                    for (var activepolygon_key in activepolygons) {\n                        var activepolygon = activepolygons[activepolygon_key];\n                        var polygonindex = activepolygon.polygonindex;\n                        var vertices2d = polygonvertices2d[polygonindex];\n                        var numvertices = vertices2d.length;\n\n                        var x = CSG.interpolateBetween2DPointsForY(activepolygon.topleft, activepolygon.bottomleft, ycoordinate);\n                        var topleft = CSG.Vector2D.Create(x, ycoordinate);\n                        x = CSG.interpolateBetween2DPointsForY(activepolygon.topright, activepolygon.bottomright, ycoordinate);\n                        var topright = CSG.Vector2D.Create(x, ycoordinate);\n                        x = CSG.interpolateBetween2DPointsForY(activepolygon.topleft, activepolygon.bottomleft, nextycoordinate);\n                        var bottomleft = CSG.Vector2D.Create(x, nextycoordinate);\n                        x = CSG.interpolateBetween2DPointsForY(activepolygon.topright, activepolygon.bottomright, nextycoordinate);\n                        var bottomright = CSG.Vector2D.Create(x, nextycoordinate);\n                        var outpolygon = {\n                            topleft: topleft,\n                            topright: topright,\n                            bottomleft: bottomleft,\n                            bottomright: bottomright,\n                            leftline: CSG.Line2D.fromPoints(topleft, bottomleft),\n                            rightline: CSG.Line2D.fromPoints(bottomright, topright)\n                        };\n                        if (newoutpolygonrow.length > 0) {\n                            var prevoutpolygon = newoutpolygonrow[newoutpolygonrow.length - 1];\n                            var d1 = outpolygon.topleft.distanceTo(prevoutpolygon.topright);\n                            var d2 = outpolygon.bottomleft.distanceTo(prevoutpolygon.bottomright);\n                            if ((d1 < EPS) && (d2 < EPS)) {\n                                // we can join this polygon with the one to the left:\n                                outpolygon.topleft = prevoutpolygon.topleft;\n                                outpolygon.leftline = prevoutpolygon.leftline;\n                                outpolygon.bottomleft = prevoutpolygon.bottomleft;\n                                newoutpolygonrow.splice(newoutpolygonrow.length - 1, 1);\n                            }\n                        }\n                        newoutpolygonrow.push(outpolygon);\n                    } // for(activepolygon in activepolygons)\n                    if (yindex > 0) {\n                        // try to match the new polygons against the previous row:\n                        var prevcontinuedindexes = {};\n                        var matchedindexes = {};\n                        for (var i = 0; i < newoutpolygonrow.length; i++) {\n                            var thispolygon = newoutpolygonrow[i];\n                            for (var ii = 0; ii < prevoutpolygonrow.length; ii++) {\n                                if (!matchedindexes[ii]) // not already processed?\n                                {\n                                    // We have a match if the sidelines are equal or if the top coordinates\n                                    // are on the sidelines of the previous polygon\n                                    var prevpolygon = prevoutpolygonrow[ii];\n                                    if (prevpolygon.bottomleft.distanceTo(thispolygon.topleft) < EPS) {\n                                        if (prevpolygon.bottomright.distanceTo(thispolygon.topright) < EPS) {\n                                            // Yes, the top of this polygon matches the bottom of the previous:\n                                            matchedindexes[ii] = true;\n                                            // Now check if the joined polygon would remain convex:\n                                            var d1 = thispolygon.leftline.direction().x - prevpolygon.leftline.direction().x;\n                                            var d2 = thispolygon.rightline.direction().x - prevpolygon.rightline.direction().x;\n                                            var leftlinecontinues = Math.abs(d1) < EPS;\n                                            var rightlinecontinues = Math.abs(d2) < EPS;\n                                            var leftlineisconvex = leftlinecontinues || (d1 >= 0);\n                                            var rightlineisconvex = rightlinecontinues || (d2 >= 0);\n                                            if (leftlineisconvex && rightlineisconvex) {\n                                                // yes, both sides have convex corners:\n                                                // This polygon will continue the previous polygon\n                                                thispolygon.outpolygon = prevpolygon.outpolygon;\n                                                thispolygon.leftlinecontinues = leftlinecontinues;\n                                                thispolygon.rightlinecontinues = rightlinecontinues;\n                                                prevcontinuedindexes[ii] = true;\n                                            }\n                                            break;\n                                        }\n                                    }\n                                } // if(!prevcontinuedindexes[ii])\n                            } // for ii\n                        } // for i\n                        for (var ii = 0; ii < prevoutpolygonrow.length; ii++) {\n                            if (!prevcontinuedindexes[ii]) {\n                                // polygon ends here\n                                // Finish the polygon with the last point(s):\n                                var prevpolygon = prevoutpolygonrow[ii];\n                                prevpolygon.outpolygon.rightpoints.push(prevpolygon.bottomright);\n                                if (prevpolygon.bottomright.distanceTo(prevpolygon.bottomleft) > EPS) {\n                                    // polygon ends with a horizontal line:\n                                    prevpolygon.outpolygon.leftpoints.push(prevpolygon.bottomleft);\n                                }\n                                // reverse the left half so we get a counterclockwise circle:\n                                prevpolygon.outpolygon.leftpoints.reverse();\n                                var points2d = prevpolygon.outpolygon.rightpoints.concat(prevpolygon.outpolygon.leftpoints);\n                                var vertices3d = [];\n                                points2d.map(function(point2d) {\n                                    var point3d = orthobasis.to3D(point2d);\n                                    var vertex3d = new CSG.Vertex(point3d);\n                                    vertices3d.push(vertex3d);\n                                });\n                                var polygon = new CSG.Polygon(vertices3d, shared, plane);\n                                destpolygons.push(polygon);\n                            }\n                        }\n                    } // if(yindex > 0)\n                    for (var i = 0; i < newoutpolygonrow.length; i++) {\n                        var thispolygon = newoutpolygonrow[i];\n                        if (!thispolygon.outpolygon) {\n                            // polygon starts here:\n                            thispolygon.outpolygon = {\n                                leftpoints: [],\n                                rightpoints: []\n                            };\n                            thispolygon.outpolygon.leftpoints.push(thispolygon.topleft);\n                            if (thispolygon.topleft.distanceTo(thispolygon.topright) > EPS) {\n                                // we have a horizontal line at the top:\n                                thispolygon.outpolygon.rightpoints.push(thispolygon.topright);\n                            }\n                        } else {\n                            // continuation of a previous row\n                            if (!thispolygon.leftlinecontinues) {\n                                thispolygon.outpolygon.leftpoints.push(thispolygon.topleft);\n                            }\n                            if (!thispolygon.rightlinecontinues) {\n                                thispolygon.outpolygon.rightpoints.push(thispolygon.topright);\n                            }\n                        }\n                    }\n                    prevoutpolygonrow = newoutpolygonrow;\n                }\n            } // for yindex\n        } // if(numpolygons > 0)\n    };\n\n    ////////////////////////////////\n    // ## class fuzzyFactory\n    // This class acts as a factory for objects. We can search for an object with approximately\n    // the desired properties (say a rectangle with width 2 and height 1)\n    // The lookupOrCreate() method looks for an existing object (for example it may find an existing rectangle\n    // with width 2.0001 and height 0.999. If no object is found, the user supplied callback is\n    // called, which should generate a new object. The new object is inserted into the database\n    // so it can be found by future lookupOrCreate() calls.\n    // Constructor:\n    //   numdimensions: the number of parameters for each object\n    //     for example for a 2D rectangle this would be 2\n    //   tolerance: The maximum difference for each parameter allowed to be considered a match\n    CSG.fuzzyFactory = function(numdimensions, tolerance) {\n        this.lookuptable = {};\n        this.multiplier = 1.0 / tolerance;\n    };\n\n    CSG.fuzzyFactory.prototype = {\n        // var obj = f.lookupOrCreate([el1, el2, el3], function(elements) {/* create the new object */});\n        // Performs a fuzzy lookup of the object with the specified elements.\n        // If found, returns the existing object\n        // If not found, calls the supplied callback function which should create a new object with\n        // the specified properties. This object is inserted in the lookup database.\n        lookupOrCreate: function(els, creatorCallback) {\n            var hash = \"\";\n            var multiplier = this.multiplier;\n            els.forEach(function(el) {\n                var valueQuantized = Math.round(el * multiplier);\n                hash += valueQuantized + \"/\";\n            });\n            if (hash in this.lookuptable) {\n                return this.lookuptable[hash];\n            } else {\n                var object = creatorCallback(els);\n                var hashparts = els.map(function(el) {\n                    var q0 = Math.floor(el * multiplier);\n                    var q1 = q0 + 1;\n                    return [\"\" + q0 + \"/\", \"\" + q1 + \"/\"];\n                });\n                var numelements = els.length;\n                var numhashes = 1 << numelements;\n                for (var hashmask = 0; hashmask < numhashes; ++hashmask) {\n                    var hashmask_shifted = hashmask;\n                    hash = \"\";\n                    hashparts.forEach(function(hashpart) {\n                        hash += hashpart[hashmask_shifted & 1];\n                        hashmask_shifted >>= 1;\n                    });\n                    this.lookuptable[hash] = object;\n                }\n                return object;\n            }\n        },\n    };\n\n\n    //////////////////////////////////////\n    CSG.fuzzyCSGFactory = function() {\n        this.vertexfactory = new CSG.fuzzyFactory(3, 1e-5);\n        this.planefactory = new CSG.fuzzyFactory(4, 1e-5);\n        this.polygonsharedfactory = {};\n    };\n\n    CSG.fuzzyCSGFactory.prototype = {\n        getPolygonShared: function(sourceshared) {\n            var hash = sourceshared.getHash();\n            if (hash in this.polygonsharedfactory) {\n                return this.polygonsharedfactory[hash];\n            } else {\n                this.polygonsharedfactory[hash] = sourceshared;\n                return sourceshared;\n            }\n        },\n\n        getVertex: function(sourcevertex) {\n            var elements = [sourcevertex.pos._x, sourcevertex.pos._y, sourcevertex.pos._z];\n            var result = this.vertexfactory.lookupOrCreate(elements, function(els) {\n                return sourcevertex;\n            });\n            return result;\n        },\n\n        getPlane: function(sourceplane) {\n            var elements = [sourceplane.normal._x, sourceplane.normal._y, sourceplane.normal._z, sourceplane.w];\n            var result = this.planefactory.lookupOrCreate(elements, function(els) {\n                return sourceplane;\n            });\n            return result;\n        },\n\n        getPolygon: function(sourcepolygon) {\n            var newplane = this.getPlane(sourcepolygon.plane);\n            var newshared = this.getPolygonShared(sourcepolygon.shared);\n            var _this = this;\n            var newvertices = sourcepolygon.vertices.map(function(vertex) {\n                return _this.getVertex(vertex);\n            });\n            // two vertices that were originally very close may now have become\n            // truly identical (referring to the same CSG.Vertex object).\n            // Remove duplicate vertices:\n            var newvertices_dedup = [];\n            if(newvertices.length > 0) {\n                var prevvertextag = newvertices[newvertices.length-1].getTag();\n                newvertices.forEach(function(vertex) {\n                    var vertextag = vertex.getTag();\n                    if(vertextag != prevvertextag)\n                    {\n                        newvertices_dedup.push(vertex);\n                    }\n                    prevvertextag = vertextag;\n                });\n            }\n            // If it's degenerate, remove all vertices:\n            if(newvertices_dedup.length < 3) {\n                newvertices_dedup = [];\n            }\n            return new CSG.Polygon(newvertices_dedup, newshared, newplane);\n        },\n\n        getCSG: function(sourcecsg) {\n            var _this = this;\n            var newpolygons = [];\n            sourcecsg.polygons.forEach(function(polygon) {\n                var newpolygon = _this.getPolygon(polygon);\n                // see getPolygon above: we may get a polygon with no vertices, discard it:\n                if(newpolygon.vertices.length >= 3)\n                {\n                    newpolygons.push(newpolygon);\n                }\n            });\n            return CSG.fromPolygons(newpolygons);\n        }\n    };\n\n    //////////////////////////////////////\n    // Tag factory: we can request a unique tag through CSG.getTag()\n    CSG.staticTag = 1;\n\n    CSG.getTag = function() {\n        return CSG.staticTag++;\n    };\n\n    //////////////////////////////////////\n    // # Class Properties\n    // This class is used to store properties of a solid\n    // A property can for example be a CSG.Vertex, a CSG.Plane or a CSG.Line3D\n    // Whenever an affine transform is applied to the CSG solid, all its properties are\n    // transformed as well.\n    // The properties can be stored in a complex nested structure (using arrays and objects)\n    CSG.Properties = function() {};\n\n    CSG.Properties.prototype = {\n        _transform: function(matrix4x4) {\n            var result = new CSG.Properties();\n            CSG.Properties.transformObj(this, result, matrix4x4);\n            return result;\n        },\n        _merge: function(otherproperties) {\n            var result = new CSG.Properties();\n            CSG.Properties.cloneObj(this, result);\n            CSG.Properties.addFrom(result, otherproperties);\n            return result;\n        }\n    };\n\n    CSG.Properties.transformObj = function(source, result, matrix4x4) {\n        for (var propertyname in source) {\n            if (propertyname == \"_transform\") continue;\n            if (propertyname == \"_merge\") continue;\n            var propertyvalue = source[propertyname];\n            var transformed = propertyvalue;\n            if (typeof(propertyvalue) == \"object\") {\n                if (('transform' in propertyvalue) && (typeof(propertyvalue.transform) == \"function\")) {\n                    transformed = propertyvalue.transform(matrix4x4);\n                } else if (propertyvalue instanceof Array) {\n                    transformed = [];\n                    CSG.Properties.transformObj(propertyvalue, transformed, matrix4x4);\n                } else if (propertyvalue instanceof CSG.Properties) {\n                    transformed = new CSG.Properties();\n                    CSG.Properties.transformObj(propertyvalue, transformed, matrix4x4);\n                }\n            }\n            result[propertyname] = transformed;\n        }\n    };\n\n    CSG.Properties.cloneObj = function(source, result) {\n        for (var propertyname in source) {\n            if (propertyname == \"_transform\") continue;\n            if (propertyname == \"_merge\") continue;\n            var propertyvalue = source[propertyname];\n            var cloned = propertyvalue;\n            if (typeof(propertyvalue) == \"object\") {\n                if (propertyvalue instanceof Array) {\n                    cloned = [];\n                    for (var i = 0; i < propertyvalue.length; i++) {\n                        cloned.push(propertyvalue[i]);\n                    }\n                } else if (propertyvalue instanceof CSG.Properties) {\n                    cloned = new CSG.Properties();\n                    CSG.Properties.cloneObj(propertyvalue, cloned);\n                }\n            }\n            result[propertyname] = cloned;\n        }\n    };\n\n    CSG.Properties.addFrom = function(result, otherproperties) {\n        for (var propertyname in otherproperties) {\n            if (propertyname == \"_transform\") continue;\n            if (propertyname == \"_merge\") continue;\n            if ((propertyname in result) &&\n                (typeof(result[propertyname]) == \"object\") &&\n                (result[propertyname] instanceof CSG.Properties) &&\n                (typeof(otherproperties[propertyname]) == \"object\") &&\n                (otherproperties[propertyname] instanceof CSG.Properties)) {\n                CSG.Properties.addFrom(result[propertyname], otherproperties[propertyname]);\n            } else if (!(propertyname in result)) {\n                result[propertyname] = otherproperties[propertyname];\n            }\n        }\n    };\n\n    //////////////////////////////////////\n    // # class Connector\n    // A connector allows to attach two objects at predefined positions\n    // For example a servo motor and a servo horn:\n    // Both can have a Connector called 'shaft'\n    // The horn can be moved and rotated such that the two connectors match\n    // and the horn is attached to the servo motor at the proper position.\n    // Connectors are stored in the properties of a CSG solid so they are\n    // ge the same transformations applied as the solid\n    CSG.Connector = function(point, axisvector, normalvector) {\n        this.point = new CSG.Vector3D(point);\n        this.axisvector = new CSG.Vector3D(axisvector).unit();\n        this.normalvector = new CSG.Vector3D(normalvector).unit();\n    };\n\n    CSG.Connector.prototype = {\n        normalized: function() {\n            var axisvector = this.axisvector.unit();\n            // make the normal vector truly normal:\n            var n = this.normalvector.cross(axisvector).unit();\n            var normalvector = axisvector.cross(n);\n            return new CSG.Connector(this.point, axisvector, normalvector);\n        },\n\n        transform: function(matrix4x4) {\n            var point = this.point.multiply4x4(matrix4x4);\n            var axisvector = this.point.plus(this.axisvector).multiply4x4(matrix4x4).minus(point);\n            var normalvector = this.point.plus(this.normalvector).multiply4x4(matrix4x4).minus(point);\n            return new CSG.Connector(point, axisvector, normalvector);\n        },\n\n        // Get the transformation matrix to connect this Connector to another connector\n        //   other: a CSG.Connector to which this connector should be connected\n        //   mirror: false: the 'axis' vectors of the connectors should point in the same direction\n        //           true: the 'axis' vectors of the connectors should point in opposite direction\n        //   normalrotation: degrees of rotation between the 'normal' vectors of the two\n        //                   connectors\n        getTransformationTo: function(other, mirror, normalrotation) {\n            mirror = mirror ? true : false;\n            normalrotation = normalrotation ? Number(normalrotation) : 0;\n            var us = this.normalized();\n            other = other.normalized();\n            // shift to the origin:\n            var transformation = CSG.Matrix4x4.translation(this.point.negated());\n            // construct the plane crossing through the origin and the two axes:\n            var axesplane = CSG.Plane.anyPlaneFromVector3Ds(\n                new CSG.Vector3D(0, 0, 0), us.axisvector, other.axisvector);\n            var axesbasis = new CSG.OrthoNormalBasis(axesplane);\n            var angle1 = axesbasis.to2D(us.axisvector).angle();\n            var angle2 = axesbasis.to2D(other.axisvector).angle();\n            var rotation = 180.0 * (angle2 - angle1) / Math.PI;\n            if (mirror) rotation += 180.0;\n            transformation = transformation.multiply(axesbasis.getProjectionMatrix());\n            transformation = transformation.multiply(CSG.Matrix4x4.rotationZ(rotation));\n            transformation = transformation.multiply(axesbasis.getInverseProjectionMatrix());\n            var usAxesAligned = us.transform(transformation);\n            // Now we have done the transformation for aligning the axes.\n            // We still need to align the normals:\n            var normalsplane = CSG.Plane.fromNormalAndPoint(other.axisvector, new CSG.Vector3D(0, 0, 0));\n            var normalsbasis = new CSG.OrthoNormalBasis(normalsplane);\n            angle1 = normalsbasis.to2D(usAxesAligned.normalvector).angle();\n            angle2 = normalsbasis.to2D(other.normalvector).angle();\n            rotation = 180.0 * (angle2 - angle1) / Math.PI;\n            rotation += normalrotation;\n            transformation = transformation.multiply(normalsbasis.getProjectionMatrix());\n            transformation = transformation.multiply(CSG.Matrix4x4.rotationZ(rotation));\n            transformation = transformation.multiply(normalsbasis.getInverseProjectionMatrix());\n            // and translate to the destination point:\n            transformation = transformation.multiply(CSG.Matrix4x4.translation(other.point));\n            // var usAligned = us.transform(transformation);\n            return transformation;\n        },\n\n        axisLine: function() {\n            return new CSG.Line3D(this.point, this.axisvector);\n        },\n\n        // creates a new Connector, with the connection point moved in the direction of the axisvector\n        extend: function(distance) {\n            var newpoint = this.point.plus(this.axisvector.unit().times(distance));\n            return new CSG.Connector(newpoint, this.axisvector, this.normalvector);\n        }\n    };\n\n    CSG.ConnectorList = function(connectors) {\n        this.connectors_ = connectors ? connectors.slice() : [];\n    };\n\n    CSG.ConnectorList.defaultNormal = [0, 0, 1];\n\n    CSG.ConnectorList.fromPath2D = function(path2D, arg1, arg2) {\n        if (arguments.length === 3) {\n            return CSG.ConnectorList._fromPath2DTangents(path2D, arg1, arg2);\n        } else if (arguments.length == 2) {\n            return CSG.ConnectorList._fromPath2DExplicit(path2D, arg1);\n        } else {\n            throw(\"call with path2D and either 2 direction vectors, or a function returning direction vectors\");\n        }\n    };\n\n    /*\n     * calculate the connector axisvectors by calculating the \"tangent\" for path2D.\n     * This is undefined for start and end points, so axis for these have to be manually\n     * provided.\n     */\n    CSG.ConnectorList._fromPath2DTangents = function(path2D, start, end) {\n        // path2D\n        var axis;\n        var pathLen = path2D.points.length;\n        var result = new CSG.ConnectorList([new CSG.Connector(path2D.points[0],\n            start, CSG.ConnectorList.defaultNormal)]);\n        // middle points\n        path2D.points.slice(1, pathLen - 1).forEach(function(p2, i) {\n            axis = path2D.points[i + 2].minus(path2D.points[i]).toVector3D(0);\n            result.appendConnector(new CSG.Connector(p2.toVector3D(0), axis,\n              CSG.ConnectorList.defaultNormal));\n        }, this);\n        result.appendConnector(new CSG.Connector(path2D.points[pathLen - 1], end,\n          CSG.ConnectorList.defaultNormal));\n        result.closed = path2D.closed;\n        return result;\n    };\n\n    /*\n     * angleIsh: either a static angle, or a function(point) returning an angle\n     */\n    CSG.ConnectorList._fromPath2DExplicit = function(path2D, angleIsh) {\n        function getAngle(angleIsh, pt, i) {\n            if (typeof angleIsh == 'function') {\n                angleIsh = angleIsh(pt, i);\n            }\n            return angleIsh;\n        }\n        var result = new CSG.ConnectorList(\n            path2D.points.map(function(p2, i) {\n                return new CSG.Connector(p2.toVector3D(0),\n                    CSG.Vector3D.Create(1, 0, 0).rotateZ(getAngle(angleIsh, p2, i)),\n                      CSG.ConnectorList.defaultNormal);\n            }, this)\n        );\n        result.closed = path2D.closed;\n        return result;\n    };\n\n\n    CSG.ConnectorList.prototype = {\n        setClosed: function(bool) {\n            this.closed = !!closed;\n        },\n        appendConnector: function(conn) {\n            this.connectors_.push(conn);\n        },\n        /*\n         * arguments: cagish: a cag or a function(connector) returning a cag\n         *            closed: whether the 3d path defined by connectors location\n         *              should be closed or stay open\n         *              Note: don't duplicate connectors in the path\n         * TODO: consider an option \"maySelfIntersect\" to close & force union all single segments\n         */\n        followWith: function(cagish) {\n            this.verify();\n            function getCag(cagish, connector) {\n                if (typeof cagish == \"function\") {\n                    cagish = cagish(connector.point, connector.axisvector, connector.normalvector);\n                }\n                return cagish;\n            }\n\n            var polygons = [], currCag;\n            var prevConnector = this.connectors_[this.connectors_.length - 1];\n            var prevCag = getCag(cagish, prevConnector);\n            // add walls\n            this.connectors_.forEach(function(connector, notFirst) {\n                currCag = getCag(cagish, connector);\n                if (notFirst || this.closed) {\n                    polygons.push.apply(polygons, prevCag._toWallPolygons({\n                        toConnector1: prevConnector, toConnector2: connector, cag: currCag}));\n                } else {\n                    // it is the first, and shape not closed -> build start wall\n                    polygons.push.apply(polygons,\n                        currCag._toPlanePolygons({toConnector: connector, flipped: true}));\n                }\n                if (notFirst == this.connectors_.length - 1 && !this.closed) {\n                    // build end wall\n                    polygons.push.apply(polygons,\n                        currCag._toPlanePolygons({toConnector: connector}));\n                }\n                prevCag = currCag;\n                prevConnector = connector;\n            }, this);\n            return CSG.fromPolygons(polygons).reTesselated().canonicalized();\n        },\n        /*\n         * general idea behind these checks: connectors need to have smooth transition from one to another\n         * TODO: add a check that 2 follow-on CAGs are not intersecting\n         */\n        verify: function() {\n            var connI, connI1, dPosToAxis, axisToNextAxis;\n            for (var i = 0; i < this.connectors_.length - 1; i++) {\n                connI = this.connectors_[i], connI1 = this.connectors_[i + 1];\n                if (connI1.point.minus(connI.point).dot(connI.axisvector) <= 0) {\n                    throw(\"Invalid ConnectorList. Each connectors position needs to be within a <90deg range of previous connectors axisvector\");\n                }\n                if (connI.axisvector.dot(connI1.axisvector) <= 0) {\n                    throw(\"invalid ConnectorList. No neighboring connectors axisvectors may span a >=90deg angle\");\n                }\n            }\n        }\n    };\n\n    //////////////////////////////////////\n    // # Class Path2D\n    CSG.Path2D = function(points, closed) {\n        closed = !!closed;\n        points = points || [];\n        // re-parse the points into CSG.Vector2D\n        // and remove any duplicate points\n        var prevpoint = null;\n        if (closed && (points.length > 0)) {\n            prevpoint = new CSG.Vector2D(points[points.length - 1]);\n        }\n        var newpoints = [];\n        points.map(function(point) {\n            point = new CSG.Vector2D(point);\n            var skip = false;\n            if (prevpoint !== null) {\n                var distance = point.distanceTo(prevpoint);\n                skip = distance < 1e-5;\n            }\n            if (!skip) newpoints.push(point);\n            prevpoint = point;\n        });\n        this.points = newpoints;\n        this.closed = closed;\n    };\n\n    /*\n    Construct a (part of a) circle. Parameters:\n      options.center: the center point of the arc (CSG.Vector2D or array [x,y])\n      options.radius: the circle radius (float)\n      options.startangle: the starting angle of the arc, in degrees\n        0 degrees corresponds to [1,0]\n        90 degrees to [0,1]\n        and so on\n      options.endangle: the ending angle of the arc, in degrees\n      options.resolution: number of points per 360 degree of rotation\n      options.maketangent: adds two extra tiny line segments at both ends of the circle\n        this ensures that the gradients at the edges are tangent to the circle\n    Returns a CSG.Path2D. The path is not closed (even if it is a 360 degree arc).\n    close() the resulting path if you want to create a true circle.\n    */\n    CSG.Path2D.arc = function(options) {\n        var center = CSG.parseOptionAs2DVector(options, \"center\", 0);\n        var radius = CSG.parseOptionAsFloat(options, \"radius\", 1);\n        var startangle = CSG.parseOptionAsFloat(options, \"startangle\", 0);\n        var endangle = CSG.parseOptionAsFloat(options, \"endangle\", 360);\n        var resolution = CSG.parseOptionAsInt(options, \"resolution\", CSG.defaultResolution2D);\n        var maketangent = CSG.parseOptionAsBool(options, \"maketangent\", false);\n        // no need to make multiple turns:\n        while (endangle - startangle >= 720) {\n            endangle -= 360;\n        }\n        while (endangle - startangle <= -720) {\n            endangle += 360;\n        }\n        var points = [],\n            point;\n        var absangledif = Math.abs(endangle - startangle);\n        if (absangledif < 1e-5) {\n            point = CSG.Vector2D.fromAngle(startangle / 180.0 * Math.PI).times(radius);\n            points.push(point.plus(center));\n        } else {\n            var numsteps = Math.floor(resolution * absangledif / 360) + 1;\n            var edgestepsize = numsteps * 0.5 / absangledif; // step size for half a degree\n            if (edgestepsize > 0.25) edgestepsize = 0.25;\n            var numsteps_mod = maketangent ? (numsteps + 2) : numsteps;\n            for (var i = 0; i <= numsteps_mod; i++) {\n                var step = i;\n                if (maketangent) {\n                    step = (i - 1) * (numsteps - 2 * edgestepsize) / numsteps + edgestepsize;\n                    if (step < 0) step = 0;\n                    if (step > numsteps) step = numsteps;\n                }\n                var angle = startangle + step * (endangle - startangle) / numsteps;\n                point = CSG.Vector2D.fromAngle(angle / 180.0 * Math.PI).times(radius);\n                points.push(point.plus(center));\n            }\n        }\n        return new CSG.Path2D(points, false);\n    };\n\n    CSG.Path2D.prototype = {\n        concat: function(otherpath) {\n            if (this.closed || otherpath.closed) {\n                throw new Error(\"Paths must not be closed\");\n            }\n            var newpoints = this.points.concat(otherpath.points);\n            return new CSG.Path2D(newpoints);\n        },\n\n        appendPoint: function(point) {\n            if (this.closed) {\n                throw new Error(\"Path must not be closed\");\n            }\n            point = new CSG.Vector2D(point); // cast to Vector2D\n            var newpoints = this.points.concat([point]);\n            return new CSG.Path2D(newpoints);\n        },\n\n        appendPoints: function(points) {\n            if (this.closed) {\n                throw new Error(\"Path must not be closed\");\n            }\n            var newpoints = this.points;\n            points.forEach(function(point) {\n                newpoints.push(new CSG.Vector2D(point)); // cast to Vector2D\n            })\n            return new CSG.Path2D(newpoints);\n        },\n\n        close: function() {\n            return new CSG.Path2D(this.points, true);\n        },\n\n        // Extrude the path by following it with a rectangle (upright, perpendicular to the path direction)\n        // Returns a CSG solid\n        //   width: width of the extrusion, in the z=0 plane\n        //   height: height of the extrusion in the z direction\n        //   resolution: number of segments per 360 degrees for the curve in a corner\n        rectangularExtrude: function(width, height, resolution) {\n            var cag = this.expandToCAG(width / 2, resolution);\n            var result = cag.extrude({\n                offset: [0, 0, height]\n            });\n            return result;\n        },\n\n        // Expand the path to a CAG\n        // This traces the path with a circle with radius pathradius\n        expandToCAG: function(pathradius, resolution) {\n            var sides = [];\n            var numpoints = this.points.length;\n            var startindex = 0;\n            if (this.closed && (numpoints > 2)) startindex = -1;\n            var prevvertex;\n            for (var i = startindex; i < numpoints; i++) {\n                var pointindex = i;\n                if (pointindex < 0) pointindex = numpoints - 1;\n                var point = this.points[pointindex];\n                var vertex = new CAG.Vertex(point);\n                if (i > startindex) {\n                    var side = new CAG.Side(prevvertex, vertex);\n                    sides.push(side);\n                }\n                prevvertex = vertex;\n            }\n            var shellcag = CAG.fromSides(sides);\n            var expanded = shellcag.expandedShell(pathradius, resolution);\n            return expanded;\n        },\n\n        innerToCAG: function() {\n            if (!this.closed) throw new Error(\"The path should be closed!\");\n            return CAG.fromPoints(this.points);\n        },\n\n        transform: function(matrix4x4) {\n            var newpoints = this.points.map(function(point) {\n                return point.multiply4x4(matrix4x4);\n            });\n            return new CSG.Path2D(newpoints, this.closed);\n        },\n\n        appendBezier: function(controlpoints, options) {\n            if (arguments.length < 2) {\n                options = {};\n            }\n            if (this.closed) {\n                throw new Error(\"Path must not be closed\");\n            }\n            if (!(controlpoints instanceof Array)) {\n                throw new Error(\"appendBezier: should pass an array of control points\")\n            }\n            if (controlpoints.length < 1) {\n                throw new Error(\"appendBezier: need at least 1 control point\")\n            }\n            if (this.points.length < 1) {\n                throw new Error(\"appendBezier: path must already contain a point (the endpoint of the path is used as the starting point for the bezier curve)\");\n            }\n            var resolution = CSG.parseOptionAsInt(options, \"resolution\", CSG.defaultResolution2D);\n            if (resolution < 4) resolution = 4;\n            var factorials = [];\n            var controlpoints_parsed = [];\n            controlpoints_parsed.push(this.points[this.points.length - 1]); // start at the previous end point\n            for (var i = 0; i < controlpoints.length; ++i) {\n                var p = controlpoints[i];\n                if (p === null) {\n                    // we can pass null as the first control point. In that case a smooth gradient is ensured:\n                    if (i != 0) {\n                        throw new Error(\"appendBezier: null can only be passed as the first control point\");\n                    }\n                    if (controlpoints.length < 2) {\n                        throw new Error(\"appendBezier: null can only be passed if there is at least one more control point\");\n                    }\n                    var lastBezierControlPoint;\n                    if ('lastBezierControlPoint' in this) {\n                        lastBezierControlPoint = this.lastBezierControlPoint;\n                    } else {\n                        if (this.points.length < 2) {\n                            throw new Error(\"appendBezier: null is passed as a control point but this requires a previous bezier curve or at least two points in the existing path\");\n                        }\n                        lastBezierControlPoint = this.points[this.points.length - 2];\n                    }\n                    // mirror the last bezier control point:\n                    p = this.points[this.points.length - 1].times(2).minus(lastBezierControlPoint);\n                } else {\n                    p = new CSG.Vector2D(p); // cast to Vector2D\n                }\n                controlpoints_parsed.push(p);\n            }\n            var bezier_order = controlpoints_parsed.length - 1;\n            var fact = 1;\n            for (var i = 0; i <= bezier_order; ++i) {\n                if (i > 0) fact *= i;\n                factorials.push(fact);\n            }\n            var binomials = [];\n            for (var i = 0; i <= bezier_order; ++i) {\n                var binomial = factorials[bezier_order] / (factorials[i] * factorials[bezier_order - i]);\n                binomials.push(binomial);\n            }\n            var getPointForT = function(t) {\n                var t_k = 1; // = pow(t,k)\n                var one_minus_t_n_minus_k = Math.pow(1 - t, bezier_order); // = pow( 1-t, bezier_order - k)\n                var inv_1_minus_t = (t != 1) ? (1 / (1 - t)) : 1;\n                var point = new CSG.Vector2D(0, 0);\n                for (var k = 0; k <= bezier_order; ++k) {\n                    if (k == bezier_order) one_minus_t_n_minus_k = 1;\n                    var bernstein_coefficient = binomials[k] * t_k * one_minus_t_n_minus_k;\n                    point = point.plus(controlpoints_parsed[k].times(bernstein_coefficient));\n                    t_k *= t;\n                    one_minus_t_n_minus_k *= inv_1_minus_t;\n                }\n                return point;\n            };\n            var newpoints = [];\n            var newpoints_t = [];\n            var numsteps = bezier_order + 1;\n            for (var i = 0; i < numsteps; ++i) {\n                var t = i / (numsteps - 1);\n                var point = getPointForT(t);\n                newpoints.push(point);\n                newpoints_t.push(t);\n            }\n            // subdivide each segment until the angle at each vertex becomes small enough:\n            var subdivide_base = 1;\n            var maxangle = Math.PI * 2 / resolution; // segments may have differ no more in angle than this\n            var maxsinangle = Math.sin(maxangle);\n            while (subdivide_base < newpoints.length - 1) {\n                var dir1 = newpoints[subdivide_base].minus(newpoints[subdivide_base - 1]).unit();\n                var dir2 = newpoints[subdivide_base + 1].minus(newpoints[subdivide_base]).unit();\n                var sinangle = dir1.cross(dir2); // this is the sine of the angle\n                if (Math.abs(sinangle) > maxsinangle) {\n                    // angle is too big, we need to subdivide\n                    var t0 = newpoints_t[subdivide_base - 1];\n                    var t1 = newpoints_t[subdivide_base + 1];\n                    var t0_new = t0 + (t1 - t0) * 1 / 3;\n                    var t1_new = t0 + (t1 - t0) * 2 / 3;\n                    var point0_new = getPointForT(t0_new);\n                    var point1_new = getPointForT(t1_new);\n                    // remove the point at subdivide_base and replace with 2 new points:\n                    newpoints.splice(subdivide_base, 1, point0_new, point1_new);\n                    newpoints_t.splice(subdivide_base, 1, t0_new, t1_new);\n                    // re - evaluate the angles, starting at the previous junction since it has changed:\n                    subdivide_base--;\n                    if (subdivide_base < 1) subdivide_base = 1;\n                } else {\n                    ++subdivide_base;\n                }\n            }\n            // append to the previous points, but skip the first new point because it is identical to the last point:\n            newpoints = this.points.concat(newpoints.slice(1));\n            var result = new CSG.Path2D(newpoints);\n            result.lastBezierControlPoint = controlpoints_parsed[controlpoints_parsed.length - 2];\n            return result;\n        },\n\n        /*\n         options:\n         .resolution // smoothness of the arc (number of segments per 360 degree of rotation)\n         // to create a circular arc:\n         .radius\n         // to create an elliptical arc:\n         .xradius\n         .yradius\n         .xaxisrotation  // the rotation (in degrees) of the x axis of the ellipse with respect to the x axis of our coordinate system\n         // this still leaves 4 possible arcs between the two given points. The following two flags select which one we draw:\n         .clockwise // = true | false (default is false). Two of the 4 solutions draw clockwise with respect to the center point, the other 2 counterclockwise\n         .large     // = true | false (default is false). Two of the 4 solutions are an arc longer than 180 degrees, the other two are <= 180 degrees\n         This implementation follows the SVG arc specs. For the details see\n         http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands\n         */\n        appendArc: function(endpoint, options) {\n            var decimals = 100000;\n            if (arguments.length < 2) {\n                options = {};\n            }\n            if (this.closed) {\n                throw new Error(\"Path must not be closed\");\n            }\n            if (this.points.length < 1) {\n                throw new Error(\"appendArc: path must already contain a point (the endpoint of the path is used as the starting point for the arc)\");\n            }\n            var resolution = CSG.parseOptionAsInt(options, \"resolution\", CSG.defaultResolution2D);\n            if (resolution < 4) resolution = 4;\n            var xradius, yradius;\n            if (('xradius' in options) || ('yradius' in options)) {\n                if ('radius' in options) {\n                    throw new Error(\"Should either give an xradius and yradius parameter, or a radius parameter\");\n                }\n                xradius = CSG.parseOptionAsFloat(options, \"xradius\", 0);\n                yradius = CSG.parseOptionAsFloat(options, \"yradius\", 0);\n            } else {\n                xradius = CSG.parseOptionAsFloat(options, \"radius\", 0);\n                yradius = xradius;\n            }\n            var xaxisrotation = CSG.parseOptionAsFloat(options, \"xaxisrotation\", 0);\n            var clockwise = CSG.parseOptionAsBool(options, \"clockwise\", false);\n            var largearc = CSG.parseOptionAsBool(options, \"large\", false);\n            var startpoint = this.points[this.points.length - 1];\n            endpoint = new CSG.Vector2D(endpoint);\n            // round to precision in order to have determinate calculations\n            xradius = Math.round(xradius*decimals)/decimals;\n            yradius = Math.round(yradius*decimals)/decimals;\n            endpoint = new CSG.Vector2D(Math.round(endpoint.x*decimals)/decimals,Math.round(endpoint.y*decimals)/decimals);\n\n            var sweep_flag = !clockwise;\n            var newpoints = [];\n            if ((xradius == 0) || (yradius == 0)) {\n                // http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes:\n                // If rx = 0 or ry = 0, then treat this as a straight line from (x1, y1) to (x2, y2) and stop\n                newpoints.push(endpoint);\n            } else {\n                xradius = Math.abs(xradius);\n                yradius = Math.abs(yradius);\n\n                // see http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes :\n                var phi = xaxisrotation * Math.PI / 180.0;\n                var cosphi = Math.cos(phi);\n                var sinphi = Math.sin(phi);\n                var minushalfdistance = startpoint.minus(endpoint).times(0.5);\n                // F.6.5.1:\n                // round to precision in order to have determinate calculations\n                var x = Math.round((cosphi * minushalfdistance.x + sinphi * minushalfdistance.y)*decimals)/decimals;\n                var y = Math.round((-sinphi * minushalfdistance.x + cosphi * minushalfdistance.y)*decimals)/decimals;\n                var start_translated = new CSG.Vector2D(x,y);\n                // F.6.6.2:\n                var biglambda = (start_translated.x * start_translated.x) / (xradius * xradius) + (start_translated.y * start_translated.y) / (yradius * yradius);\n                if (biglambda > 1.0) {\n                    // F.6.6.3:\n                    var sqrtbiglambda = Math.sqrt(biglambda);\n                    xradius *= sqrtbiglambda;\n                    yradius *= sqrtbiglambda;\n                    // round to precision in order to have determinate calculations\n                    xradius = Math.round(xradius*decimals)/decimals;\n                    yradius = Math.round(yradius*decimals)/decimals;\n                }\n                // F.6.5.2:\n                var multiplier1 = Math.sqrt((xradius * xradius * yradius * yradius - xradius * xradius * start_translated.y * start_translated.y - yradius * yradius * start_translated.x * start_translated.x) / (xradius * xradius * start_translated.y * start_translated.y + yradius * yradius * start_translated.x * start_translated.x));\n                if (sweep_flag == largearc) multiplier1 = -multiplier1;\n                var center_translated = new CSG.Vector2D(xradius * start_translated.y / yradius, -yradius * start_translated.x / xradius).times(multiplier1);\n                // F.6.5.3:\n                var center = new CSG.Vector2D(cosphi * center_translated.x - sinphi * center_translated.y, sinphi * center_translated.x + cosphi * center_translated.y).plus((startpoint.plus(endpoint)).times(0.5));\n                // F.6.5.5:\n                var vec1 = new CSG.Vector2D((start_translated.x - center_translated.x) / xradius, (start_translated.y - center_translated.y) / yradius);\n                var vec2 = new CSG.Vector2D((-start_translated.x - center_translated.x) / xradius, (-start_translated.y - center_translated.y) / yradius);\n                var theta1 = vec1.angleRadians();\n                var theta2 = vec2.angleRadians();\n                var deltatheta = theta2 - theta1;\n                deltatheta = deltatheta % (2 * Math.PI);\n                if ((!sweep_flag) && (deltatheta > 0)) {\n                    deltatheta -= 2 * Math.PI;\n                } else if ((sweep_flag) && (deltatheta < 0)) {\n                    deltatheta += 2 * Math.PI;\n                }\n\n                // Ok, we have the center point and angle range (from theta1, deltatheta radians) so we can create the ellipse\n                var numsteps = Math.ceil(Math.abs(deltatheta) / (2 * Math.PI) * resolution) + 1;\n                if (numsteps < 1) numsteps = 1;\n                for (var step = 1; step <= numsteps; step++) {\n                    var theta = theta1 + step / numsteps * deltatheta;\n                    var costheta = Math.cos(theta);\n                    var sintheta = Math.sin(theta);\n                    // F.6.3.1:\n                    var point = new CSG.Vector2D(cosphi * xradius * costheta - sinphi * yradius * sintheta, sinphi * xradius * costheta + cosphi * yradius * sintheta).plus(center);\n                    newpoints.push(point);\n                }\n            }\n            newpoints = this.points.concat(newpoints);\n            var result = new CSG.Path2D(newpoints);\n            return result;\n        },\n    };\n\n    // Add several convenience methods to the classes that support a transform() method:\n    CSG.addTransformationMethodsToPrototype = function(prot) {\n        prot.mirrored = function(plane) {\n            return this.transform(CSG.Matrix4x4.mirroring(plane));\n        };\n\n        prot.mirroredX = function() {\n            var plane = new CSG.Plane(CSG.Vector3D.Create(1, 0, 0), 0);\n            return this.mirrored(plane);\n        };\n\n        prot.mirroredY = function() {\n            var plane = new CSG.Plane(CSG.Vector3D.Create(0, 1, 0), 0);\n            return this.mirrored(plane);\n        };\n\n        prot.mirroredZ = function() {\n            var plane = new CSG.Plane(CSG.Vector3D.Create(0, 0, 1), 0);\n            return this.mirrored(plane);\n        };\n\n        prot.translate = function(v) {\n            return this.transform(CSG.Matrix4x4.translation(v));\n        };\n\n        prot.scale = function(f) {\n            return this.transform(CSG.Matrix4x4.scaling(f));\n        };\n\n        prot.rotateX = function(deg) {\n            return this.transform(CSG.Matrix4x4.rotationX(deg));\n        };\n\n        prot.rotateY = function(deg) {\n            return this.transform(CSG.Matrix4x4.rotationY(deg));\n        };\n\n        prot.rotateZ = function(deg) {\n            return this.transform(CSG.Matrix4x4.rotationZ(deg));\n        };\n\n        prot.rotate = function(rotationCenter, rotationAxis, degrees) {\n            return this.transform(CSG.Matrix4x4.rotation(rotationCenter, rotationAxis, degrees));\n        };\n\n        prot.rotateEulerAngles = function(alpha, beta, gamma, position) {\n            position = position || [0,0,0];\n\n            var Rz1 = CSG.Matrix4x4.rotationZ(alpha);\n            var Rx  = CSG.Matrix4x4.rotationX(beta);\n            var Rz2 = CSG.Matrix4x4.rotationZ(gamma);\n            var T   = CSG.Matrix4x4.translation(new CSG.Vector3D(position));\n\n            return this.transform(Rz2.multiply(Rx).multiply(Rz1).multiply(T));\n        };\n    };\n\n    // TODO: consider generalization and adding to addTransformationMethodsToPrototype\n    CSG.addCenteringToPrototype = function(prot, axes) {\n        prot.center = function(cAxes) {\n            cAxes = Array.prototype.map.call(arguments, function(a) {\n                return a; //.toLowerCase();\n            });\n            // no args: center on all axes\n            if (!cAxes.length) {\n                cAxes = axes.slice();\n            }\n            var b = this.getBounds();\n            return this.translate(axes.map(function(a) {\n                return cAxes.indexOf(a) > -1 ?\n                    -(b[0][a] + b[1][a])/2 : 0;\n            }));\n        };\n    };\n\n    //////////////////\n    // CAG: solid area geometry: like CSG but 2D\n    // Each area consists of a number of sides\n    // Each side is a line between 2 points\n    var CAG = function() {\n        this.sides = [];\n        this.isCanonicalized = false;\n    };\n\n    // create from an untyped object with identical property names:\n    CAG.fromObject = function(obj) {\n        var sides = obj.sides.map(function(s) {\n            return CAG.Side.fromObject(s);\n        });\n        var cag = CAG.fromSides(sides);\n        return cag;\n    }\n\n    // Construct a CAG from a list of `CAG.Side` instances.\n    CAG.fromSides = function(sides) {\n        var cag = new CAG();\n        cag.sides = sides;\n        return cag;\n    };\n\n    // Construct a CAG from a list of points (a polygon)\n    // Rotation direction of the points is not relevant. Points can be a convex or concave polygon.\n    // Polygon must not self intersect\n    CAG.fromPoints = function(points) {\n        var numpoints = points.length;\n        if (numpoints < 3) throw new Error(\"CAG shape needs at least 3 points\");\n        var sides = [];\n        var prevpoint = new CSG.Vector2D(points[numpoints - 1]);\n        var prevvertex = new CAG.Vertex(prevpoint);\n        points.map(function(p) {\n            var point = new CSG.Vector2D(p);\n            var vertex = new CAG.Vertex(point);\n            var side = new CAG.Side(prevvertex, vertex);\n            sides.push(side);\n            prevvertex = vertex;\n        });\n        var result = CAG.fromSides(sides);\n        if (result.isSelfIntersecting()) {\n            throw new Error(\"Polygon is self intersecting!\");\n        }\n        var area = result.area();\n        if (Math.abs(area) < 1e-5) {\n            throw new Error(\"Degenerate polygon!\");\n        }\n        if (area < 0) {\n            result = result.flipped();\n        }\n        result = result.canonicalized();\n        return result;\n    };\n\n    // Like CAG.fromPoints but does not check if it's a valid polygon.\n    // Points should rotate counter clockwise\n    CAG.fromPointsNoCheck = function(points) {\n        var sides = [];\n        var prevpoint = new CSG.Vector2D(points[points.length - 1]);\n        var prevvertex = new CAG.Vertex(prevpoint);\n        points.map(function(p) {\n            var point = new CSG.Vector2D(p);\n            var vertex = new CAG.Vertex(point);\n            var side = new CAG.Side(prevvertex, vertex);\n            sides.push(side);\n            prevvertex = vertex;\n        });\n        return CAG.fromSides(sides);\n    };\n\n    // Converts a CSG to a CAG. The CSG must consist of polygons with only z coordinates +1 and -1\n    // as constructed by CAG._toCSGWall(-1, 1). This is so we can use the 3D union(), intersect() etc\n    CAG.fromFakeCSG = function(csg) {\n        var sides = csg.polygons.map(function(p) {\n            return CAG.Side._fromFakePolygon(p);\n            })\n            .filter(function(s) {\n                return s !== null;\n        });\n        return CAG.fromSides(sides);\n    };\n\n    // see if the line between p0start and p0end intersects with the line between p1start and p1end\n    // returns true if the lines strictly intersect, the end points are not counted!\n    CAG.linesIntersect = function(p0start, p0end, p1start, p1end) {\n        if (p0end.equals(p1start) || p1end.equals(p0start)) {\n            var d = p1end.minus(p1start).unit().plus(p0end.minus(p0start).unit()).length();\n            if (d < 1e-5) {\n                return true;\n            }\n        } else {\n            var d0 = p0end.minus(p0start);\n            var d1 = p1end.minus(p1start);\n            if (Math.abs(d0.cross(d1)) < 1e-9) return false; // lines are parallel\n            var alphas = CSG.solve2Linear(-d0.x, d1.x, -d0.y, d1.y, p0start.x - p1start.x, p0start.y - p1start.y);\n            if ((alphas[0] > 1e-6) && (alphas[0] < 0.999999) && (alphas[1] > 1e-5) && (alphas[1] < 0.999999)) return true;\n            //    if( (alphas[0] >= 0) && (alphas[0] <= 1) && (alphas[1] >= 0) && (alphas[1] <= 1) ) return true;\n        }\n        return false;\n    };\n\n    /* Construct a circle\n    options:\n      center: a 2D center point\n      radius: a scalar\n      resolution: number of sides per 360 degree rotation\n    returns a CAG object\n    */\n    CAG.circle = function(options) {\n        options = options || {};\n        var center = CSG.parseOptionAs2DVector(options, \"center\", [0, 0]);\n        var radius = CSG.parseOptionAsFloat(options, \"radius\", 1);\n        var resolution = CSG.parseOptionAsInt(options, \"resolution\", CSG.defaultResolution2D);\n        var sides = [];\n        var prevvertex;\n        for (var i = 0; i <= resolution; i++) {\n            var radians = 2 * Math.PI * i / resolution;\n            var point = CSG.Vector2D.fromAngleRadians(radians).times(radius).plus(center);\n            var vertex = new CAG.Vertex(point);\n            if (i > 0) {\n                sides.push(new CAG.Side(prevvertex, vertex));\n            }\n            prevvertex = vertex;\n        }\n        return CAG.fromSides(sides);\n    };\n\n    /* Construct an ellispe\n    options:\n      center: a 2D center point\n      radius: a 2D vector with width and height\n      resolution: number of sides per 360 degree rotation\n    returns a CAG object\n    */\n    CAG.ellipse = function(options) {\n        options = options || {};\n        var c = CSG.parseOptionAs2DVector(options, \"center\", [0, 0]);\n        var r = CSG.parseOptionAs2DVector(options, \"radius\", [1, 1]);\n        r = r.abs(); // negative radii make no sense\n        var res = CSG.parseOptionAsInt(options, \"resolution\", CSG.defaultResolution2D);\n\n        var e2 = new CSG.Path2D([[c.x,c.y + r.y]]);\n        e2 = e2.appendArc([c.x,c.y - r.y], {\n            xradius: r.x,\n            yradius: r.y,\n            xaxisrotation: 0,\n            resolution: res,\n            clockwise: true,\n            large: false,\n        });\n        e2 = e2.appendArc([c.x,c.y + r.y], {\n            xradius: r.x,\n            yradius: r.y,\n            xaxisrotation: 0,\n            resolution: res,\n            clockwise: true,\n            large: false,\n        });\n        e2 = e2.close();\n        return e2.innerToCAG();\n    };\n\n    /* Construct a rectangle\n    options:\n      center: a 2D center point\n      radius: a 2D vector with width and height\n      returns a CAG object\n    */\n    CAG.rectangle = function(options) {\n        options = options || {};\n        var c, r;\n        if (('corner1' in options) || ('corner2' in options)) {\n            if (('center' in options) || ('radius' in options)) {\n                throw new Error(\"rectangle: should either give a radius and center parameter, or a corner1 and corner2 parameter\")\n            }\n            corner1 = CSG.parseOptionAs2DVector(options, \"corner1\", [0, 0]);\n            corner2 = CSG.parseOptionAs2DVector(options, \"corner2\", [1, 1]);\n            c = corner1.plus(corner2).times(0.5);\n            r = corner2.minus(corner1).times(0.5);\n        } else {\n            c = CSG.parseOptionAs2DVector(options, \"center\", [0, 0]);\n            r = CSG.parseOptionAs2DVector(options, \"radius\", [1, 1]);\n        }\n        r = r.abs(); // negative radii make no sense\n        var rswap = new CSG.Vector2D(r.x, -r.y);\n        var points = [\n            c.plus(r), c.plus(rswap), c.minus(r), c.minus(rswap)\n        ];\n        return CAG.fromPoints(points);\n    };\n\n    //     var r = CSG.roundedRectangle({\n    //       center: [0, 0],\n    //       radius: [2, 1],\n    //       roundradius: 0.2,\n    //       resolution: 8,\n    //     });\n    CAG.roundedRectangle = function(options) {\n        options = options || {};\n        var center, radius;\n        if (('corner1' in options) || ('corner2' in options)) {\n            if (('center' in options) || ('radius' in options)) {\n                throw new Error(\"roundedRectangle: should either give a radius and center parameter, or a corner1 and corner2 parameter\")\n            }\n            corner1 = CSG.parseOptionAs2DVector(options, \"corner1\", [0, 0]);\n            corner2 = CSG.parseOptionAs2DVector(options, \"corner2\", [1, 1]);\n            center = corner1.plus(corner2).times(0.5);\n            radius = corner2.minus(corner1).times(0.5);\n        } else {\n            center = CSG.parseOptionAs2DVector(options, \"center\", [0, 0]);\n            radius = CSG.parseOptionAs2DVector(options, \"radius\", [1, 1]);\n        }\n        radius = radius.abs(); // negative radii make no sense\n        var roundradius = CSG.parseOptionAsFloat(options, \"roundradius\", 0.2);\n        var resolution = CSG.parseOptionAsInt(options, \"resolution\", CSG.defaultResolution2D);\n        var maxroundradius = Math.min(radius.x, radius.y);\n        maxroundradius -= 0.1;\n        roundradius = Math.min(roundradius, maxroundradius);\n        roundradius = Math.max(0, roundradius);\n        radius = new CSG.Vector2D(radius.x - roundradius, radius.y - roundradius);\n        var rect = CAG.rectangle({\n            center: center,\n            radius: radius\n        });\n        if (roundradius > 0) {\n            rect = rect.expand(roundradius, resolution);\n        }\n        return rect;\n    };\n\n    // Reconstruct a CAG from the output of toCompactBinary()\n    CAG.fromCompactBinary = function(bin) {\n        if (bin['class'] != \"CAG\") throw new Error(\"Not a CAG\");\n        var vertices = [];\n        var vertexData = bin.vertexData;\n        var numvertices = vertexData.length / 2;\n        var arrayindex = 0;\n        for (var vertexindex = 0; vertexindex < numvertices; vertexindex++) {\n            var x = vertexData[arrayindex++];\n            var y = vertexData[arrayindex++];\n            var pos = new CSG.Vector2D(x, y);\n            var vertex = new CAG.Vertex(pos);\n            vertices.push(vertex);\n        }\n\n        var sides = [];\n        var numsides = bin.sideVertexIndices.length / 2;\n        arrayindex = 0;\n        for (var sideindex = 0; sideindex < numsides; sideindex++) {\n            var vertexindex0 = bin.sideVertexIndices[arrayindex++];\n            var vertexindex1 = bin.sideVertexIndices[arrayindex++];\n            var side = new CAG.Side(vertices[vertexindex0], vertices[vertexindex1]);\n            sides.push(side);\n        }\n        var cag = CAG.fromSides(sides);\n        cag.isCanonicalized = true;\n        return cag;\n    };\n\n    function fnSortByIndex(a, b) {\n        return a.index - b.index;\n    }\n\n    CAG.prototype = {\n        toString: function() {\n            var result = \"CAG (\" + this.sides.length + \" sides):\\n\";\n            this.sides.map(function(side) {\n                result += \"  \" + side.toString() + \"\\n\";\n            });\n            return result;\n        },\n\n        _toCSGWall: function(z0, z1) {\n            var polygons = this.sides.map(function(side) {\n                return side.toPolygon3D(z0, z1);\n            });\n            return CSG.fromPolygons(polygons);\n        },\n\n        _toVector3DPairs: function(m) {\n            // transform m\n            var pairs = this.sides.map(function(side) {\n                var p0 = side.vertex0.pos, p1 = side.vertex1.pos;\n                return [CSG.Vector3D.Create(p0.x, p0.y, 0),\n                    CSG.Vector3D.Create(p1.x, p1.y, 0)];\n            });\n            if (typeof m != 'undefined') {\n                pairs = pairs.map(function(pair) {\n                    return pair.map(function(v) {\n                        return v.transform(m);\n                    });\n                });\n            }\n            return pairs;\n        },\n\n        /*\n         * transform a cag into the polygons of a corresponding 3d plane, positioned per options\n         * Accepts a connector for plane positioning, or optionally\n         * single translation, axisVector, normalVector arguments\n         * (toConnector has precedence over single arguments if provided)\n         */\n        _toPlanePolygons: function(options) {\n            var flipped = options.flipped || false;\n            // reference connector for transformation\n            var origin = [0, 0, 0], defaultAxis = [0, 0, 1], defaultNormal = [0, 1, 0];\n            var thisConnector = new CSG.Connector(origin, defaultAxis, defaultNormal);\n            // translated connector per options\n            var translation = options.translation || origin;\n            var axisVector = options.axisVector || defaultAxis;\n            var normalVector = options.normalVector || defaultNormal;\n            // will override above if options has toConnector\n            var toConnector = options.toConnector ||\n                new CSG.Connector(translation, axisVector, normalVector);\n            // resulting transform\n            var m = thisConnector.getTransformationTo(toConnector, false, 0);\n            // create plane as a (partial non-closed) CSG in XY plane\n            var bounds = this.getBounds();\n            bounds[0] = bounds[0].minus(new CSG.Vector2D(1, 1));\n            bounds[1] = bounds[1].plus(new CSG.Vector2D(1, 1));\n            var csgshell = this._toCSGWall(-1, 1);\n            var csgplane = CSG.fromPolygons([new CSG.Polygon([\n                new CSG.Vertex(new CSG.Vector3D(bounds[0].x, bounds[0].y, 0)),\n                new CSG.Vertex(new CSG.Vector3D(bounds[1].x, bounds[0].y, 0)),\n                new CSG.Vertex(new CSG.Vector3D(bounds[1].x, bounds[1].y, 0)),\n                new CSG.Vertex(new CSG.Vector3D(bounds[0].x, bounds[1].y, 0))\n            ])]);\n            if (flipped) {\n                csgplane = csgplane.invert();\n            }\n            // intersectSub -> prevent premature retesselate/canonicalize\n            csgplane = csgplane.intersectSub(csgshell);\n            // only keep the polygons in the z plane:\n            var polys = csgplane.polygons.filter(function(polygon) {\n                return Math.abs(polygon.plane.normal.z) > 0.99;\n            });\n            // finally, position the plane per passed transformations\n            return polys.map(function(poly) {\n                return poly.transform(m);\n            });\n        },\n\n\n        /*\n         * given 2 connectors, this returns all polygons of a \"wall\" between 2\n         * copies of this cag, positioned in 3d space as \"bottom\" and\n         * \"top\" plane per connectors toConnector1, and toConnector2, respectively \n         */\n        _toWallPolygons: function(options) {\n            // normals are going to be correct as long as toConn2.point - toConn1.point\n            // points into cag normal direction (check in caller)\n            // arguments: options.toConnector1, options.toConnector2, options.cag\n            //     walls go from toConnector1 to toConnector2\n            //     optionally, target cag to point to - cag needs to have same number of sides as this!\n            var origin = [0, 0, 0], defaultAxis = [0, 0, 1], defaultNormal = [0, 1, 0];\n            var thisConnector = new CSG.Connector(origin, defaultAxis, defaultNormal);\n            // arguments:\n            var toConnector1 = options.toConnector1;\n            // var toConnector2 = new CSG.Connector([0, 0, -30], defaultAxis, defaultNormal);\n            var toConnector2 = options.toConnector2;\n            if (!(toConnector1 instanceof CSG.Connector && toConnector2 instanceof CSG.Connector)) {\n                throw('could not parse CSG.Connector arguments toConnector1 or toConnector2');\n            }\n            if (options.cag) {\n                if (options.cag.sides.length != this.sides.length) {\n                    throw('target cag needs same sides count as start cag');\n                }\n            }\n            // target cag is same as this unless specified\n            var toCag = options.cag || this;\n            var m1 = thisConnector.getTransformationTo(toConnector1, false, 0);\n            var m2 = thisConnector.getTransformationTo(toConnector2, false, 0);\n            var vps1 = this._toVector3DPairs(m1);\n            var vps2 = toCag._toVector3DPairs(m2);\n\n            var polygons = [];\n            vps1.forEach(function(vp1, i) {\n                polygons.push(new CSG.Polygon([\n                    new CSG.Vertex(vps2[i][1]), new CSG.Vertex(vps2[i][0]), new CSG.Vertex(vp1[0])]));\n                polygons.push(new CSG.Polygon([\n                    new CSG.Vertex(vps2[i][1]), new CSG.Vertex(vp1[0]), new CSG.Vertex(vp1[1])]));\n            });\n            return polygons;\n        },\n\n        union: function(cag) {\n            var cags;\n            if (cag instanceof Array) {\n                cags = cag;\n            } else {\n                cags = [cag];\n            }\n            var r = this._toCSGWall(-1, 1);\n            var r = r.union(\n                cags.map(function(cag) {\n                    return cag._toCSGWall(-1, 1).reTesselated();\n                }), false, false)\n            return CAG.fromFakeCSG(r).canonicalized();\n        },\n\n        subtract: function(cag) {\n            var cags;\n            if (cag instanceof Array) {\n                cags = cag;\n            } else {\n                cags = [cag];\n            }\n            var r = this._toCSGWall(-1, 1);\n            cags.map(function(cag) {\n                r = r.subtractSub(cag._toCSGWall(-1, 1), false, false);\n            });\n            r = r.reTesselated();\n            r = r.canonicalized();\n            r = CAG.fromFakeCSG(r);\n            r = r.canonicalized();\n            return r;\n        },\n\n        intersect: function(cag) {\n            var cags;\n            if (cag instanceof Array) {\n                cags = cag;\n            } else {\n                cags = [cag];\n            }\n            var r = this._toCSGWall(-1, 1);\n            cags.map(function(cag) {\n                r = r.intersectSub(cag._toCSGWall(-1, 1), false, false);\n            });\n            r = r.reTesselated();\n            r = r.canonicalized();\n            r = CAG.fromFakeCSG(r);\n            r = r.canonicalized();\n            return r;\n        },\n\n        transform: function(matrix4x4) {\n            var ismirror = matrix4x4.isMirroring();\n            var newsides = this.sides.map(function(side) {\n                return side.transform(matrix4x4);\n            });\n            var result = CAG.fromSides(newsides);\n            if (ismirror) {\n                result = result.flipped();\n            }\n            return result;\n        },\n\n        // see http://local.wasp.uwa.edu.au/~pbourke/geometry/polyarea/ :\n        // Area of the polygon. For a counter clockwise rotating polygon the area is positive, otherwise negative\n        // Note(bebbi): this looks wrong. See polygon getArea()\n        area: function() {\n            var polygonArea = 0;\n            this.sides.map(function(side) {\n                polygonArea += side.vertex0.pos.cross(side.vertex1.pos);\n            });\n            polygonArea *= 0.5;\n            return polygonArea;\n        },\n\n        flipped: function() {\n            var newsides = this.sides.map(function(side) {\n                return side.flipped();\n            });\n            newsides.reverse();\n            return CAG.fromSides(newsides);\n        },\n\n        getBounds: function() {\n            var minpoint;\n            if (this.sides.length === 0) {\n                minpoint = new CSG.Vector2D(0, 0);\n            } else {\n                minpoint = this.sides[0].vertex0.pos;\n            }\n            var maxpoint = minpoint;\n            this.sides.map(function(side) {\n                minpoint = minpoint.min(side.vertex0.pos);\n                minpoint = minpoint.min(side.vertex1.pos);\n                maxpoint = maxpoint.max(side.vertex0.pos);\n                maxpoint = maxpoint.max(side.vertex1.pos);\n            });\n            return [minpoint, maxpoint];\n        },\n\n        isSelfIntersecting: function(debug) {\n            var numsides = this.sides.length;\n            for (var i = 0; i < numsides; i++) {\n                var side0 = this.sides[i];\n                for (var ii = i + 1; ii < numsides; ii++) {\n                    var side1 = this.sides[ii];\n                    if (CAG.linesIntersect(side0.vertex0.pos, side0.vertex1.pos, side1.vertex0.pos, side1.vertex1.pos)) {\n                        if (debug) { OpenJsCad.log(side0); OpenJsCad.log(side1);}\n                        return true;\n                    }\n                }\n            }\n            return false;\n        },\n\n        expandedShell: function(radius, resolution) {\n            resolution = resolution || 8;\n            if (resolution < 4) resolution = 4;\n            var cags = [];\n            var pointmap = {};\n            var cag = this.canonicalized();\n            cag.sides.map(function(side) {\n                var d = side.vertex1.pos.minus(side.vertex0.pos);\n                var dl = d.length();\n                if (dl > 1e-5) {\n                    d = d.times(1.0 / dl);\n                    var normal = d.normal().times(radius);\n                    var shellpoints = [\n                        side.vertex1.pos.plus(normal),\n                        side.vertex1.pos.minus(normal),\n                        side.vertex0.pos.minus(normal),\n                        side.vertex0.pos.plus(normal)\n                    ];\n                    //      var newcag = CAG.fromPointsNoCheck(shellpoints);\n                    var newcag = CAG.fromPoints(shellpoints);\n                    cags.push(newcag);\n                    for (var step = 0; step < 2; step++) {\n                        var p1 = (step === 0) ? side.vertex0.pos : side.vertex1.pos;\n                        var p2 = (step === 0) ? side.vertex1.pos : side.vertex0.pos;\n                        var tag = p1.x + \" \" + p1.y;\n                        if (!(tag in pointmap)) {\n                            pointmap[tag] = [];\n                        }\n                        pointmap[tag].push({\n                            \"p1\": p1,\n                            \"p2\": p2\n                        });\n                    }\n                }\n            });\n            for (var tag in pointmap) {\n                var m = pointmap[tag];\n                var angle1, angle2;\n                var pcenter = m[0].p1;\n                if (m.length == 2) {\n                    var end1 = m[0].p2;\n                    var end2 = m[1].p2;\n                    angle1 = end1.minus(pcenter).angleDegrees();\n                    angle2 = end2.minus(pcenter).angleDegrees();\n                    if (angle2 < angle1) angle2 += 360;\n                    if (angle2 >= (angle1 + 360)) angle2 -= 360;\n                    if (angle2 < angle1 + 180) {\n                        var t = angle2;\n                        angle2 = angle1 + 360;\n                        angle1 = t;\n                    }\n                    angle1 += 90;\n                    angle2 -= 90;\n                } else {\n                    angle1 = 0;\n                    angle2 = 360;\n                }\n                var fullcircle = (angle2 > angle1 + 359.999);\n                if (fullcircle) {\n                    angle1 = 0;\n                    angle2 = 360;\n                }\n                if (angle2 > (angle1 + 1e-5)) {\n                    var points = [];\n                    if (!fullcircle) {\n                        points.push(pcenter);\n                    }\n                    var numsteps = Math.round(resolution * (angle2 - angle1) / 360);\n                    if (numsteps < 1) numsteps = 1;\n                    for (var step = 0; step <= numsteps; step++) {\n                        var angle = angle1 + step / numsteps * (angle2 - angle1);\n                        if (step == numsteps) angle = angle2; // prevent rounding errors\n                        var point = pcenter.plus(CSG.Vector2D.fromAngleDegrees(angle).times(radius));\n                        if ((!fullcircle) || (step > 0)) {\n                            points.push(point);\n                        }\n                    }\n                    var newcag = CAG.fromPointsNoCheck(points);\n                    cags.push(newcag);\n                }\n            }\n            var result = new CAG();\n            result = result.union(cags);\n            return result;\n        },\n\n        expand: function(radius, resolution) {\n            var result = this.union(this.expandedShell(radius, resolution));\n            return result;\n        },\n\n        contract: function(radius, resolution) {\n            var result = this.subtract(this.expandedShell(radius, resolution));\n            return result;\n        },\n\n        // extrude the CAG in a certain plane. \n        // Giving just a plane is not enough, multiple different extrusions in the same plane would be possible\n        // by rotating around the plane's origin. An additional right-hand vector should be specified as well,\n        // and this is exactly a CSG.OrthoNormalBasis.\n        // orthonormalbasis: characterizes the plane in which to extrude\n        // depth: thickness of the extruded shape. Extrusion is done symmetrically above and below the plane.\n        extrudeInOrthonormalBasis: function(orthonormalbasis, depth) {\n            // first extrude in the regular Z plane:\n            if (!(orthonormalbasis instanceof CSG.OrthoNormalBasis)) {\n                throw new Error(\"extrudeInPlane: the first parameter should be a CSG.OrthoNormalBasis\");\n            }\n            var extruded = this.extrude({\n                offset: [0, 0, depth]\n            });\n            var matrix = orthonormalbasis.getInverseProjectionMatrix();\n            extruded = extruded.transform(matrix);\n            return extruded;\n        },\n\n        // Extrude in a standard cartesian plane, specified by two axis identifiers. Each identifier can be\n        // one of [\"X\",\"Y\",\"Z\",\"-X\",\"-Y\",\"-Z\"]\n        // The 2d x axis will map to the first given 3D axis, the 2d y axis will map to the second.\n        // See CSG.OrthoNormalBasis.GetCartesian for details.\n        extrudeInPlane: function(axis1, axis2, depth) {\n            return this.extrudeInOrthonormalBasis(CSG.OrthoNormalBasis.GetCartesian(axis1, axis2), depth);\n        },\n\n        // extruded=cag.extrude({offset: [0,0,10], twistangle: 360, twiststeps: 100});\n        // linear extrusion of 2D shape, with optional twist\n        // The 2d shape is placed in in z=0 plane and extruded into direction <offset> (a CSG.Vector3D)\n        // The final face is rotated <twistangle> degrees. Rotation is done around the origin of the 2d shape (i.e. x=0, y=0)\n        // twiststeps determines the resolution of the twist (should be >= 1)\n        // returns a CSG object\n        extrude: function(options) {\n            if (this.sides.length == 0) {\n                // empty!\n                return new CSG();\n            }\n            var offsetVector = CSG.parseOptionAs3DVector(options, \"offset\", [0, 0, 1]);\n            var twistangle = CSG.parseOptionAsFloat(options, \"twistangle\", 0);\n            var twiststeps = CSG.parseOptionAsInt(options, \"twiststeps\", CSG.defaultResolution3D);\n            if (offsetVector.z == 0) {\n                throw('offset cannot be orthogonal to Z axis');\n            }\n            if (twistangle == 0 || twiststeps < 1) {\n                twiststeps = 1;\n            }\n            var normalVector = CSG.Vector3D.Create(0, 1, 0);\n\n            var polygons = [];\n            // bottom and top\n            polygons = polygons.concat(this._toPlanePolygons({translation: [0, 0, 0],\n                normalVector: normalVector, flipped: !(offsetVector.z < 0)}));\n            polygons = polygons.concat(this._toPlanePolygons({translation: offsetVector,\n                normalVector: normalVector.rotateZ(twistangle), flipped: offsetVector.z < 0}));\n            // walls\n            for (var i = 0; i < twiststeps; i++) {\n                var c1 = new CSG.Connector(offsetVector.times(i / twiststeps), [0, 0, offsetVector.z],\n                    normalVector.rotateZ(i * twistangle/twiststeps));\n                var c2 = new CSG.Connector(offsetVector.times((i + 1) / twiststeps), [0, 0, offsetVector.z],\n                    normalVector.rotateZ((i + 1) * twistangle/twiststeps));\n                polygons = polygons.concat(this._toWallPolygons({toConnector1: c1, toConnector2: c2}));\n            }\n\n            return CSG.fromPolygons(polygons);\n        },\n\n        /*\n         * extrude CAG to 3d object by rotating the origin around the y axis\n         * (and turning everything into XY plane)\n         * arguments: options dict with angle and resolution, both optional\n         */\n        rotateExtrude: function(options) {\n            var alpha = CSG.parseOptionAsFloat(options, \"angle\", 360);\n            var resolution = CSG.parseOptionAsInt(options, \"resolution\", CSG.defaultResolution3D);\n\n            var EPS = 1e-5;\n\n            alpha = alpha > 360 ? alpha % 360 : alpha;\n            var origin = [0, 0, 0];\n            var axisV = CSG.Vector3D.Create(0, 1, 0);\n            var normalV = [0, 0, 1];\n            var polygons = [];\n            // planes only needed if alpha > 0\n            var connS = new CSG.Connector(origin, axisV, normalV);\n            if (alpha > 0 && alpha < 360) {\n                // we need to rotate negative to satisfy wall function condition of\n                // building in the direction of axis vector\n                var connE = new CSG.Connector(origin, axisV.rotateZ(-alpha), normalV);\n                polygons = polygons.concat(\n                    this._toPlanePolygons({toConnector: connS, flipped: true}));\n                polygons = polygons.concat(\n                    this._toPlanePolygons({toConnector: connE}));\n            }\n            var connT1 = connS, connT2;\n            var step = alpha/resolution;\n            for (var a = step; a <= alpha + EPS; a += step) {\n                connT2 = new CSG.Connector(origin, axisV.rotateZ(-a), normalV);\n                polygons = polygons.concat(this._toWallPolygons(\n                    {toConnector1: connT1, toConnector2: connT2}));\n                connT1 = connT2;\n            }\n            return CSG.fromPolygons(polygons).reTesselated();\n        },\n\n        // check if we are a valid CAG (for debugging)\n        // NOTE(bebbi) uneven side count doesn't work because rounding with EPS isn't taken into account\n        check: function() {\n            var EPS = 1e-5;\n            var errors = [];\n            if (this.isSelfIntersecting(true)) {\n                errors.push(\"Self intersects\");\n            }\n            var pointcount = {};\n            this.sides.map(function(side) {\n                function mappoint(p) {\n                    var tag = p.x + \" \" + p.y;\n                    if (!(tag in pointcount)) pointcount[tag] = 0;\n                    pointcount[tag] ++;\n                }\n                mappoint(side.vertex0.pos);\n                mappoint(side.vertex1.pos);\n            });\n            for (var tag in pointcount) {\n                var count = pointcount[tag];\n                if (count & 1) {\n                    errors.push(\"Uneven number of sides (\" + count + \") for point \" + tag);\n                }\n            }\n            var area = this.area();\n            if (area < EPS*EPS) {\n                errors.push(\"Area is \" + area);\n            }\n            if (errors.length > 0) {\n                var ertxt = \"\";\n                errors.map(function(err) {\n                    ertxt += err + \"\\n\";\n                });\n                throw new Error(ertxt);\n            }\n        },\n\n        canonicalized: function() {\n            if (this.isCanonicalized) {\n                return this;\n            } else {\n                var factory = new CAG.fuzzyCAGFactory();\n                var result = factory.getCAG(this);\n                result.isCanonicalized = true;\n                return result;\n            }\n        },\n\n        toCompactBinary: function() {\n            var cag = this.canonicalized();\n            var numsides = cag.sides.length;\n            var vertexmap = {};\n            var vertices = [];\n            var numvertices = 0;\n            var sideVertexIndices = new Uint32Array(2 * numsides);\n            var sidevertexindicesindex = 0;\n            cag.sides.map(function(side) {\n                [side.vertex0, side.vertex1].map(function(v) {\n                    var vertextag = v.getTag();\n                    var vertexindex;\n                    if (!(vertextag in vertexmap)) {\n                        vertexindex = numvertices++;\n                        vertexmap[vertextag] = vertexindex;\n                        vertices.push(v);\n                    } else {\n                        vertexindex = vertexmap[vertextag];\n                    }\n                    sideVertexIndices[sidevertexindicesindex++] = vertexindex;\n                });\n            });\n            var vertexData = new Float64Array(numvertices * 2);\n            var verticesArrayIndex = 0;\n            vertices.map(function(v) {\n                var pos = v.pos;\n                vertexData[verticesArrayIndex++] = pos._x;\n                vertexData[verticesArrayIndex++] = pos._y;\n            });\n            var result = {\n                'class': \"CAG\",\n                sideVertexIndices: sideVertexIndices,\n                vertexData: vertexData\n            };\n            return result;\n        },\n\n        getOutlinePaths: function() {\n            var cag = this.canonicalized();\n            var sideTagToSideMap = {};\n            var startVertexTagToSideTagMap = {};\n            cag.sides.map(function(side) {\n                var sidetag = side.getTag();\n                sideTagToSideMap[sidetag] = side;\n                var startvertextag = side.vertex0.getTag();\n                if (!(startvertextag in startVertexTagToSideTagMap)) {\n                    startVertexTagToSideTagMap[startvertextag] = [];\n                }\n                startVertexTagToSideTagMap[startvertextag].push(sidetag);\n            });\n            var paths = [];\n            while (true) {\n                var startsidetag = null;\n                for (var aVertexTag in startVertexTagToSideTagMap) {\n                    var sidesForThisVertex = startVertexTagToSideTagMap[aVertexTag];\n                    startsidetag = sidesForThisVertex[0];\n                    sidesForThisVertex.splice(0, 1);\n                    if (sidesForThisVertex.length === 0) {\n                        delete startVertexTagToSideTagMap[aVertexTag];\n                    }\n                    break;\n                }\n                if (startsidetag === null) break; // we've had all sides\n                var connectedVertexPoints = [];\n                var sidetag = startsidetag;\n                var thisside = sideTagToSideMap[sidetag];\n                var startvertextag = thisside.vertex0.getTag();\n                while (true) {\n                    connectedVertexPoints.push(thisside.vertex0.pos);\n                    var nextvertextag = thisside.vertex1.getTag();\n                    if (nextvertextag == startvertextag) break; // we've closed the polygon\n                    if (!(nextvertextag in startVertexTagToSideTagMap)) {\n                        throw new Error(\"Area is not closed!\");\n                    }\n                    var nextpossiblesidetags = startVertexTagToSideTagMap[nextvertextag];\n                    var nextsideindex = -1;\n                    if (nextpossiblesidetags.length == 1) {\n                        nextsideindex = 0;\n                    } else {\n                        // more than one side starting at the same vertex. This means we have\n                        // two shapes touching at the same corner\n                        var bestangle = null;\n                        var thisangle = thisside.direction().angleDegrees();\n                        for (var sideindex = 0; sideindex < nextpossiblesidetags.length; sideindex++) {\n                            var nextpossiblesidetag = nextpossiblesidetags[sideindex];\n                            var possibleside = sideTagToSideMap[nextpossiblesidetag];\n                            var angle = possibleside.direction().angleDegrees();\n                            var angledif = angle - thisangle;\n                            if (angledif < -180) angledif += 360;\n                            if (angledif >= 180) angledif -= 360;\n                            if ((nextsideindex < 0) || (angledif > bestangle)) {\n                                nextsideindex = sideindex;\n                                bestangle = angledif;\n                            }\n                        }\n                    }\n                    var nextsidetag = nextpossiblesidetags[nextsideindex];\n                    nextpossiblesidetags.splice(nextsideindex, 1);\n                    if (nextpossiblesidetags.length === 0) {\n                        delete startVertexTagToSideTagMap[nextvertextag];\n                    }\n                    thisside = sideTagToSideMap[nextsidetag];\n                } // inner loop\n                var path = new CSG.Path2D(connectedVertexPoints, true);\n                paths.push(path);\n            } // outer loop\n            return paths;\n        },\n\n        /*\n        cag = cag.overCutInsideCorners(cutterradius);\n\n        Using a CNC router it's impossible to cut out a true sharp inside corner. The inside corner\n        will be rounded due to the radius of the cutter. This function compensates for this by creating\n        an extra cutout at each inner corner so that the actual cut out shape will be at least as large\n        as needed.\n        */\n        overCutInsideCorners: function(cutterradius) {\n            var cag = this.canonicalized();\n            // for each vertex determine the 'incoming' side and 'outgoing' side:\n            var pointmap = {}; // tag => {pos: coord, from: [], to: []}\n            cag.sides.map(function(side) {\n                if (!(side.vertex0.getTag() in pointmap)) {\n                    pointmap[side.vertex0.getTag()] = {\n                        pos: side.vertex0.pos,\n                        from: [],\n                        to: []\n                    };\n                }\n                pointmap[side.vertex0.getTag()].to.push(side.vertex1.pos);\n                if (!(side.vertex1.getTag() in pointmap)) {\n                    pointmap[side.vertex1.getTag()] = {\n                        pos: side.vertex1.pos,\n                        from: [],\n                        to: []\n                    };\n                }\n                pointmap[side.vertex1.getTag()].from.push(side.vertex0.pos);\n            });\n            // overcut all sharp corners:\n            var cutouts = [];\n            for (var pointtag in pointmap) {\n                var pointobj = pointmap[pointtag];\n                if ((pointobj.from.length == 1) && (pointobj.to.length == 1)) {\n                    // ok, 1 incoming side and 1 outgoing side:\n                    var fromcoord = pointobj.from[0];\n                    var pointcoord = pointobj.pos;\n                    var tocoord = pointobj.to[0];\n                    var v1 = pointcoord.minus(fromcoord).unit();\n                    var v2 = tocoord.minus(pointcoord).unit();\n                    var crossproduct = v1.cross(v2);\n                    var isInnerCorner = (crossproduct < 0.001);\n                    if (isInnerCorner) {\n                        // yes it's a sharp corner:\n                        var alpha = v2.angleRadians() - v1.angleRadians() + Math.PI;\n                        if (alpha < 0) {\n                            alpha += 2 * Math.PI;\n                        } else if (alpha >= 2 * Math.PI) {\n                            alpha -= 2 * Math.PI;\n                        }\n                        var midvector = v2.minus(v1).unit();\n                        var circlesegmentangle = 30 / 180 * Math.PI; // resolution of the circle: segments of 30 degrees\n                        // we need to increase the radius slightly so that our imperfect circle will contain a perfect circle of cutterradius\n                        var radiuscorrected = cutterradius / Math.cos(circlesegmentangle / 2);\n                        var circlecenter = pointcoord.plus(midvector.times(radiuscorrected));\n                        // we don't need to create a full circle; a pie is enough. Find the angles for the pie:\n                        var startangle = alpha + midvector.angleRadians();\n                        var deltaangle = 2 * (Math.PI - alpha);\n                        var numsteps = 2 * Math.ceil(deltaangle / circlesegmentangle / 2); // should be even\n                        // build the pie:\n                        var points = [circlecenter];\n                        for (var i = 0; i <= numsteps; i++) {\n                            var angle = startangle + i / numsteps * deltaangle;\n                            var p = CSG.Vector2D.fromAngleRadians(angle).times(radiuscorrected).plus(circlecenter);\n                            points.push(p);\n                        }\n                        cutouts.push(CAG.fromPoints(points));\n                    }\n                }\n            }\n            var result = cag.subtract(cutouts);\n            return result;\n        }\n    };\n\n    CAG.Vertex = function(pos) {\n        this.pos = pos;\n    };\n\n    CAG.Vertex.fromObject = function(obj) {\n        return new CAG.Vertex(new CSG.Vector2D(obj.pos._x,obj.pos._y));\n    };\n\n    CAG.Vertex.prototype = {\n        toString: function() {\n            return \"(\" + this.pos.x.toFixed(2) + \",\" + this.pos.y.toFixed(2) + \")\";\n        },\n        getTag: function() {\n            var result = this.tag;\n            if (!result) {\n                result = CSG.getTag();\n                this.tag = result;\n            }\n            return result;\n        }\n    };\n\n    CAG.Side = function(vertex0, vertex1) {\n        if (!(vertex0 instanceof CAG.Vertex)) throw new Error(\"Assertion failed\");\n        if (!(vertex1 instanceof CAG.Vertex)) throw new Error(\"Assertion failed\");\n        this.vertex0 = vertex0;\n        this.vertex1 = vertex1;\n    };\n\n    CAG.Side.fromObject = function(obj) {\n        var vertex0 = CAG.Vertex.fromObject(obj.vertex0);\n        var vertex1 = CAG.Vertex.fromObject(obj.vertex1);\n        return new CAG.Side(vertex0,vertex1);\n    };\n\n    CAG.Side._fromFakePolygon = function(polygon) {\n        polygon.vertices.forEach(function(v) {\n            if (!((v.pos.z >= -1.001) && (v.pos.z < -0.999)) && !((v.pos.z >= 0.999) && (v.pos.z < 1.001))) {\n                throw(\"Assertion failed: _fromFakePolygon expects abs z values of 1\");\n            }\n        })\n        // this can happen based on union, seems to be residuals -\n        // return null and handle in caller\n        if (polygon.vertices.length < 4) {\n            return null;\n        }\n        var reverse = false;\n        var vert1Indices = [];\n        var pts2d = polygon.vertices.filter(function(v, i) {\n            if (v.pos.z > 0) {\n                vert1Indices.push(i);\n                return true;\n            }\n        })\n        .map(function(v) {\n            return new CSG.Vector2D(v.pos.x, v.pos.y);\n        });\n        if (pts2d.length != 2) {\n            throw('Assertion failed: _fromFakePolygon: not enough points found')\n        }\n        var d = vert1Indices[1] - vert1Indices[0];\n        if (d == 1 || d == 3) {\n            if (d == 1) {\n                pts2d.reverse();\n            }\n        } else {\n            throw('Assertion failed: _fromFakePolygon: unknown index ordering');\n        }\n        var result = new CAG.Side(new CAG.Vertex(pts2d[0]), new CAG.Vertex(pts2d[1]));\n        return result;\n    };\n\n    CAG.Side.prototype = {\n        toString: function() {\n            return this.vertex0 + \" -> \" + this.vertex1;\n        },\n\n        toPolygon3D: function(z0, z1) {\n            var vertices = [\n                new CSG.Vertex(this.vertex0.pos.toVector3D(z0)),\n                new CSG.Vertex(this.vertex1.pos.toVector3D(z0)),\n                new CSG.Vertex(this.vertex1.pos.toVector3D(z1)),\n                new CSG.Vertex(this.vertex0.pos.toVector3D(z1))\n            ];\n            return new CSG.Polygon(vertices);\n        },\n\n        transform: function(matrix4x4) {\n            var newp1 = this.vertex0.pos.transform(matrix4x4);\n            var newp2 = this.vertex1.pos.transform(matrix4x4);\n            return new CAG.Side(new CAG.Vertex(newp1), new CAG.Vertex(newp2));\n        },\n\n        flipped: function() {\n            return new CAG.Side(this.vertex1, this.vertex0);\n        },\n\n        direction: function() {\n            return this.vertex1.pos.minus(this.vertex0.pos);\n        },\n\n        getTag: function() {\n            var result = this.tag;\n            if (!result) {\n                result = CSG.getTag();\n                this.tag = result;\n            }\n            return result;\n        },\n\n        lengthSquared: function() {\n            var x = this.vertex1.pos.x - this.vertex0.pos.x,\n                y = this.vertex1.pos.y - this.vertex0.pos.y;\n            return x * x + y * y;\n        },\n\n        length: function() {\n            return Math.sqrt(this.lengthSquared());\n        }\n    };\n\n    //////////////////////////////////////\n    CAG.fuzzyCAGFactory = function() {\n        this.vertexfactory = new CSG.fuzzyFactory(2, 1e-5);\n    };\n\n    CAG.fuzzyCAGFactory.prototype = {\n        getVertex: function(sourcevertex) {\n            var elements = [sourcevertex.pos._x, sourcevertex.pos._y];\n            var result = this.vertexfactory.lookupOrCreate(elements, function(els) {\n                return sourcevertex;\n            });\n            return result;\n        },\n\n        getSide: function(sourceside) {\n            var vertex0 = this.getVertex(sourceside.vertex0);\n            var vertex1 = this.getVertex(sourceside.vertex1);\n            return new CAG.Side(vertex0, vertex1);\n        },\n\n        getCAG: function(sourcecag) {\n            var _this = this;\n            var newsides = sourcecag.sides.map(function(side) {\n                return _this.getSide(side);\n            })\n            // remove bad sides (mostly a user input issue)\n            .filter(function(side) {\n                return side.length() > 1e-5;\n            });\n            return CAG.fromSides(newsides);\n        }\n    };\n\n    //////////////////////////////////////\n    CSG.addTransformationMethodsToPrototype(CSG.prototype);\n    CSG.addTransformationMethodsToPrototype(CSG.Vector2D.prototype);\n    CSG.addTransformationMethodsToPrototype(CSG.Vector3D.prototype);\n    CSG.addTransformationMethodsToPrototype(CSG.Vertex.prototype);\n    CSG.addTransformationMethodsToPrototype(CSG.Plane.prototype);\n    CSG.addTransformationMethodsToPrototype(CSG.Polygon.prototype);\n    CSG.addTransformationMethodsToPrototype(CSG.Line3D.prototype);\n    CSG.addTransformationMethodsToPrototype(CSG.Connector.prototype);\n    CSG.addTransformationMethodsToPrototype(CSG.Path2D.prototype);\n    CSG.addTransformationMethodsToPrototype(CSG.Line2D.prototype);\n    CSG.addTransformationMethodsToPrototype(CAG.prototype);\n    CSG.addTransformationMethodsToPrototype(CAG.Side.prototype);\n    CSG.addTransformationMethodsToPrototype(CSG.OrthoNormalBasis.prototype);\n\n    CSG.addCenteringToPrototype(CSG.prototype, ['x', 'y', 'z']);\n    CSG.addCenteringToPrototype(CAG.prototype, ['x', 'y']);\n\n    /*\n    2D polygons are now supported through the CAG class.\n    With many improvements (see documentation):\n      - shapes do no longer have to be convex\n      - union/intersect/subtract is supported\n      - expand / contract are supported\n\n    But we'll keep CSG.Polygon2D as a stub for backwards compatibility\n    */\n    \n    CSG.Polygon2D = function(points) {\n        var cag = CAG.fromPoints(points);\n        this.sides = cag.sides;\n    };\n    CSG.Polygon2D.prototype = CAG.prototype;\n\n\n    //console.log('module', module)\n    //module.CSG = CSG;\n    //module.CAG = CAG;\n//})(this); //module to export to\n\nmodule.exports = {CSG,CAG}//({})(module)\n","/* converts input data to array if it is not already an array*/\nexport function toArray (data) {\n  if (!data) return []\n  if (data.constructor !== Array) return [data]\n  return data\n}\n","import { CSG, CAG } from '@jscad/csg'\nimport { makeBlob } from '@jscad/io'\n\n/*import CSGToStla from '@jscad/io/writers/CSGToStla'\nimport CSGToStlb from '@jscad/io/writers/CSGToStlb'\nimport CSGToAMF from '@jscad/io/writers/CSGToAMF'\nimport CSGToX3D from '@jscad/io/writers/CSGToX3D'\nimport CAGToSvg from '@jscad/io/writers/CAGToSvg'\nimport CAGToJson from '@jscad/io/writers/CAGToJson'\nimport CAGToDxf from '@jscad/io/writers/CAGToDxf'*/\nimport {CSGToStla} from '@jscad/io'\nimport {CSGToStlb} from '@jscad/io'\nimport {CSGToAMF} from '@jscad/io'\nimport {CSGToX3D} from '@jscad/io'\nimport {CAGToSvg} from '@jscad/io'\nimport {CAGToJson} from '@jscad/io'\nimport {CAGToDxf} from '@jscad/io'\n\nimport {toArray} from '../utils/misc'\nconst Blob = makeBlob()\n\nexport function convertToBlob (objects, params) {\n  const {format, formatInfo, version = '0.0.0'} = params\n\n  let object\n\n  if (format === 'jscad') {\n    object = objects\n  } else {\n    objects = toArray(objects)\n    // console.log('convertToBlob', objects, format)\n    // console.log('object', objects[0], objects[0] instanceof CSG)\n\n    // review the given objects\n    let foundCSG = false\n    let foundCAG = false\n    for (let i = 0; i < objects.length; i++) {\n      if (objects[i] instanceof CSG) { foundCSG = true }\n      if (objects[i] instanceof CAG) { foundCAG = true }\n    }\n    // convert based on the given format\n    foundCSG = foundCSG && formatInfo.convertCSG\n    foundCAG = foundCAG && formatInfo.convertCAG\n    if (foundCSG && foundCAG) { foundCAG = false } // use 3D conversion\n\n    object = !foundCSG ? new CAG() : new CSG()\n\n    for (let i = 0; i < objects.length; i++) {\n      if (foundCSG === true && objects[i] instanceof CAG) {\n        object = object.union(objects[i].extrude({offset: [0, 0, 0.1]})) // convert CAG to a thin solid CSG\n        continue\n      }\n      if (foundCAG === true && objects[i] instanceof CSG) {\n        continue\n      }\n      object = object.union(objects[i])\n    }\n  }\n\n  const meta = {\n    producer: 'OpenJSCAD.org ' + version,\n    date: new Date()\n  }\n\n  const outputFormatHandlers = {\n    amf: (object) => CSGToAMF(object, meta), // CSG to AMF\n    stl: (object) => CSGToStla(object, {version}), // CSG to STL ASCII\n    stla: (object) => CSGToStla(object, {version}), // CSG to STL ASCII\n    stlb: (object) => CSGToStlb(object, {webBlob: true, version}), // CSG to STL BINARY\n    dxf: (object) => CAGToDxf(object, {version}), // CAG to DXF\n    svg: (object) => CAGToSvg(object, {version}), // CAG to SVG\n    x3d: (object) => CSGToX3D(object.fixTJunctions(), {version}),\n    json: (object) => CAGToJson(object, {version}), // CSG or CAG to JSON\n    js: (object) => object, // js , pass through\n    jscad: (object) => object, // jscad, pass through\n    undefined: () => {\n      throw new Error('Not supported : only jscad, stl, amf, dxf, svg or json as output format')\n    }\n  }\n\n  let blob = outputFormatHandlers[format](object)\n\n  if (format === 'jscad') {\n    blob = new Blob([blob], { type: formatInfo.mimetype })\n  }\n  return blob\n}\n","/**\n * Create an function for processing the JSCAD script into CSG/CAG objects\n * @param {String} script the script\n * @param {Object} globals the globals to use when evaluating the script: these are not ..\n * ...ACTUAL globals, merely functions/ variable accessible AS IF they were globals !\n */\nexport default function createJscadFunction (script, globals) {\n  // console.log('globals', globals)\n  // not a fan of this, we have way too many explicit api elements\n  let globalsList = ''\n  // each top key is a library ie : openscad helpers etc\n  // one level below that is the list of libs\n  // last level is the actual function we want to export to 'local' scope\n  Object.keys(globals).forEach(function (libKey) {\n    const lib = globals[libKey]\n    // console.log(`lib:${libKey}: ${lib}`)\n    Object.keys(lib).forEach(function (libItemKey) {\n      const libItems = lib[libItemKey]\n      // console.log('libItems', libItems)\n      Object.keys(libItems).forEach(function (toExposeKey) {\n        // console.log('toExpose',toExpose )\n        const text = `const ${toExposeKey} = globals['${libKey}']['${libItemKey}']['${toExposeKey}']\n`\n        globalsList += text\n      })\n    })\n  })\n\n  const source = `// SYNC WORKER\n    ${globalsList}\n\n    //user defined script(s)\n    ${script}\n\n    if (typeof (main) !== 'function') {\n      throw new Error('The JSCAD script must contain a function main() which returns one or more CSG or CAG solids.')\n    }\n\n    return main(params)\n  `\n\n  var f = new Function('params', 'include', 'globals', source)\n  return f\n}\n","const esprima = require('esprima')\nconst estraverse = require('estraverse')\nconst astring = require('astring')\n\n/**\n * helper function that finds include() statements in files,\n * fetches their code & returns it (recursively) returning the whole code with\n * inlined includes\n * this is more reliable than async xhr + eval()\n * but is still just a temporary solution until using actual modules & loaders (commonjs , es6 etc)\n * @param {String} source the original script (with include statements)\n * @param {String} relpath relative path, for xhr resolution\n * @param {String} memFs memFs cache object\n * @returns {String} the full script, with inlined\n */\nexport function replaceIncludes (source, relpath, memFs, includeResolver) {\n  return new Promise(function (resolve, reject) {\n    const moduleAst = astFromSource(source)\n    const foundIncludes = findIncludes(moduleAst).map(x => x.value)\n    const withoutIncludes = replaceIncludesInAst(moduleAst)\n\n    const modulePromises = foundIncludes.map(function (uri, index) {\n      return includeResolver(relpath, uri, memFs)\n        .then(\n          includedScript => replaceIncludes(includedScript, relpath, memFs, includeResolver),\n          err => console.error('fail', err))\n    })\n    Promise.all(modulePromises).then(function (resolvedModules) {\n      const resolvedScript = resolvedModules.concat(withoutIncludes).join('\\n')\n      resolve(resolvedScript)\n    })\n  })\n}\n\nfunction isInclude (node) {\n  return (node.type === 'CallExpression' && node.callee && node.callee.name && node.callee.name === 'include')\n}\n\nfunction astFromSource (source, options) {\n  const defaults = {\n    loc: true, range: true, tolerant: true\n  }\n  options = Object.assign({}, defaults, options)\n\n  let ast\n  try {\n    ast = esprima.parse(source, options)\n    // console.log(\"ast\",ast,\"scope\", scope);\n  } catch (error) {\n    console.error('failed to generate ast:', error)\n    ast = {}\n  }\n  return ast\n}\n\nfunction findIncludes (ast) {\n  let includes = []\n  estraverse.traverse(ast, {\n    enter: function (node, parent) {\n      if (isInclude(node)) {\n        if (node.arguments && arguments.length > 0) {\n          const includePath = node.arguments[0]\n          const {raw, value} = includePath\n          includes.push({raw, value})\n        }\n        return estraverse.VisitorOption.Skip\n      }\n    }\n  })\n  return includes\n}\n\nfunction replaceIncludesInAst (ast, replacement = '') {\n  const result = estraverse.replace(ast, {\n    enter: function (node, parent) {\n      if (isInclude(node)) {\n        if (node.arguments && arguments.length > 0) {\n          return {type: 'Literal', value: replacement}\n        }\n        return estraverse.VisitorOption.Skip\n      }\n    }\n  })\n\n  return astring.generate(result, {indent: '  ', lineEnd: '\\n'})\n}\n","/**\n * fetch the requested script either via MemFs or HTTP Request\n * (Note: The resolved modules are prepepended in front of the calling script\n * @param {String} relpath the relative path\n * @param {String} scriptPath the path to the script\n * @param {Object} memFs local cache (optional)\n */\nexport function resolveIncludes (relpath, scriptPath, memFs) {\n  // include the requested script via MemFs if possible\n  return new Promise(function (resolve, reject) {\n    if (typeof (memFs) === 'object') {\n      for (var fs in memFs) {\n        if (memFs[fs].fullpath === scriptPath || './' + memFs[fs].fullpath === scriptPath || memFs[fs].name === scriptPath) {\n          resolve(memFs[fs].source)\n          return\n        }\n      }\n    }\n    // include the requested script via webserver access\n    const xhr = new XMLHttpRequest()\n    let url = relpath + scriptPath\n    if (scriptPath.match(/^(https:|http:)/i)) {\n      url = scriptPath\n    }\n    xhr.open('GET', url, true)\n    xhr.onload = function (event) {\n      const status = '' + event.currentTarget.status\n      if (status.length > 0 && status[0] === '2') {\n        resolve(this.responseText)\n      } else {\n        reject(this.responseText)\n      }\n    }\n    xhr.onerror = err => { reject(err) }\n    xhr.send()\n  })\n}\n","import WebWorkify from 'webworkify'\nimport { CAG, CSG } from '@jscad/csg'\nimport oscad from '@jscad/scad-api'\nimport createJscadFunction from './jscad-function'\nimport { replaceIncludes } from './replaceIncludes'\nimport { resolveIncludes } from './resolveIncludes'\nimport { toArray } from '../utils/misc'\n\n/**\n * evaluate script & rebuild solids, in main thread\n * @param {String} script the script\n * @param {String} fullurl full url of current script\n * @param {Object} parameters the parameters to use with the script\n * @param {Object} callback the callback to call once evaluation is done /failed\n * @param {Object} options the settings to use when rebuilding the solid\n */\nexport function rebuildSolid (script, fullurl, parameters, callback, options) {\n  let relpath = fullurl\n  if (relpath.lastIndexOf('/') >= 0) {\n    relpath = relpath.substring(0, relpath.lastIndexOf('/') + 1)\n  }\n  const defaults = {\n    implicitGlobals: true,\n    memFs: undefined,\n    includeResolver: resolveIncludes // default function to retrieve 'includes'\n  }\n  options = Object.assign({}, defaults, options)\n\n  replaceIncludes(script, relpath, options.memFs, options.includeResolver).then(function (fullScript) {\n    const globals = options.implicitGlobals ? (options.globals ? options.globals : {oscad}) : {}\n    const func = createJscadFunction(fullScript, globals)\n    // stand-in for the include function(no-op)\n    const include = (x) => x\n    try {\n      let objects = func(parameters, include, globals)\n      objects = toArray(objects)\n      if (objects.length === 0) {\n        throw new Error('The JSCAD script must return one or more CSG or CAG solids.')\n      }\n      callback(undefined, objects)\n    } catch(error) {\n      callback(error, undefined)\n    }\n  }).catch(error => callback(error, undefined))\n\n  // have we been asked to stop our work?\n  return {\n    cancel: () => {\n      console.log('cannot stop work in main thread, sorry')\n    }\n  }\n}\n\n/**\n * evaluate script & rebuild solids, in seperate thread/webworker\n * @param {String} script the script\n * @param {String} fullurl full url of current script\n * @param {Object} parameters the parameters to use with the script\n * @param {Object} callback the callback to call once evaluation is done /failed\n * @param {Object} options the settings to use when rebuilding the solid\n */\nexport function rebuildSolidInWorker (script, fullurl, parameters, callback, options) {\n  if (!parameters) { throw new Error(\"JSCAD: missing 'parameters'\") }\n  if (!window.Worker) throw new Error('Worker threads are unsupported.')\n  const defaults = {\n    implicitGlobals: true,\n    memFs: undefined,\n    includeResolver: resolveIncludes // default function to retrieve 'includes'\n  }\n  options = Object.assign({}, defaults, options)\n\n  let relpath = fullurl\n  if (relpath.lastIndexOf('/') >= 0) {\n    relpath = relpath.substring(0, relpath.lastIndexOf('/') + 1)\n  }\n\n  let worker\n  replaceIncludes(script, relpath, options.memFs, options.includeResolver).then(function (script) {\n    worker = WebWorkify(require('./jscad-worker.js'))\n    worker.onmessage = function (e) {\n      if (e.data instanceof Object) {\n        const data = e.data.objects.map(function (object) {\n          if (object['class'] === 'CSG') { return CSG.fromCompactBinary(object) }\n          if (object['class'] === 'CAG') { return CAG.fromCompactBinary(object) }\n        })\n        callback(undefined, data)\n      }\n    }\n    worker.onerror = function (e) {\n      callback(`Error in line ${e.lineno} : ${e.message}`, undefined)\n    }\n    worker.postMessage({cmd: 'render', fullurl, script, parameters, options})\n  }).catch(error => callback(error, undefined))\n\n  // have we been asked to stop our work?\n  return {\n    cancel: () => {\n      if(worker) worker.terminate()\n    }\n  }\n}\n","import fs from 'fs'\nimport path from 'path'\n/**\n * fetch the requested script either via MemFs or HTTP Request\n * (Note: The resolved modules are prepepended in front of the calling script\n * @param {String} relpath the relative path\n * @param {String} scriptPath the path to the script\n * @param {Object} memFs local cache (optional)\n */\nexport function resolveIncludesFs (relpath, scriptPath, memFs) {\n  // include the requested script via MemFs if possible\n  return new Promise(function (resolve, reject) {\n    const fullPath = path.resolve(relpath, scriptPath)\n    fs.readFile(fullPath, 'UTF8', (err, data) => err ? reject(err) : resolve(data))\n  })\n}\n","export default function getParameterDefinitionsCLI (getParameterDefinitions, param) { // used for openjscad CLI only\n  if (typeof getParameterDefinitions !== 'undefined') {\n    var p = {}\n    var pa = getParameterDefinitions()\n    for (var a in pa) { // defaults, given by getParameterDefinitions()\n      var x = pa[a]\n      if ('default' in x) {\n        p[pa[a].name] = pa[a].default\n      } else if ('initial' in x) {\n        p[pa[a].name] = pa[a].initial\n      } else if ('checked' in x) {\n        p[pa[a].name] = pa[a].checked\n      }\n    }\n    for (var a in param) { // given by command-line\n      p[a] = param[a]\n    }\n    if (0) {\n      for (var a in p) {\n        echo('param=', a, p[a])\n      }\n    }\n    return p\n  } else\n    return param\n}\n","import oscad from '@jscad/scad-api'\nimport { convertToBlob } from '../io/convertToBlob'\nimport { formats } from '../io/formats'\nimport { rebuildSolid } from '../core/rebuildSolid'\nimport { resolveIncludesFs } from '../utils/resolveIncludesFs'\nimport getParameterDefinitionsCLI from './getParameterDefinitionsCLI'\n\n/**\n * generate output data from source\n * @param {String} source the original source\n * @param {Object} params hash of parameters to pass to main function\n * @param {String} options\n * @return a Promise with the output data\n */\nexport default function generateOutputData (source, params, options) {\n  const defaults = {\n    implicitGlobals: true,\n    outputFormat: 'stl',\n    inputFile: ''\n  }\n  options = Object.assign({}, defaults, options)\n  const {implicitGlobals, outputFormat, inputFile} = options\n\n  const inputPath = inputFile // path.dirname(inputFile)\n\n  let globals = {}\n  if (implicitGlobals) {\n    globals.oscad = oscad\n  }\n  globals.extras = {cli: {getParameterDefinitionsCLI}}\n\n  // modify main to adapt parameters\n  const mainFunction = `var wrappedMain = main\n  main = function(){\n    var paramsDefinition = (typeof getParameterDefinitions !== 'undefined') ? getParameterDefinitions : undefined\n    return wrappedMain(getParameterDefinitionsCLI(paramsDefinition, ${JSON.stringify(params)}))\n  }`\n  source = `${source}\n  ${mainFunction}\n  `\n\n  // objects = rebuildSolid(source, '', params, globals, callback)\n  return new Promise(function (resolve, reject) {\n    const callback = (err, result) => {\n      if (!err) {\n        return resolve(result)\n      }\n      return reject(err)\n    }\n\n    if (outputFormat === 'jscad' || outputFormat === 'js') {\n      resolve(source)\n    } else {\n      rebuildSolid(source, inputPath, params, callback, {implicitGlobals, globals, includeResolver: resolveIncludesFs})\n    }\n  })\n    .then(function (objects) {\n      const formatInfo = {\n        convertCAG: true, convertCSG: true, mimetype: formats[outputFormat].mimetype\n      }\n      return convertToBlob(objects, {format: outputFormat, formatInfo})\n    })\n\n// return convertToBlob(objects, {format: outputFormat, formatInfo: {convertCAG: true, convertCSG: true}})\n}\n","// shebang gets auto added here\n//--log_all\n\n// NOTE: this will only run on Node > 6 or needs to be transpiled, or launched via launch-cli\n\n// == OpenJSCAD.org CLI interface, written by Rene K. Mueller <spiritdude@gmail.com>, Licensed under MIT License\n//\n// Description:\n//   openjscad <file> [-of <format>] [-o <output>]\n// e.g.\n//   openjscad test.jscad\n//   openjscad test.jscad -o test.stl\n//   openjscad test.jscad -o test.amf\n//   openjscad test.jscad -o test.dxf\n//   openjscad test.scad -o testFromSCAD.jscad\n//   openjscad test.scad -o test.stl\n//   openjscad test.stl -o test2.stl      # reprocessed: stl -> jscad -> stl\n//   openjscad test.amf -o test2.jscad\n//   openjscad test.jscad -of amf\n//   openjscad test.jscad -of dxf\n//   openjscad test.jscad -of stl\n//   openjscad name_plate.jscad --name \"Just Me\" --title \"CEO\" -o amf test.amf\n//\n// History:\n// 2016/10/01: 0.5.2: changes for libraries\n// 2016/06/27: 0.5.1: refactored AMF import and export by Z3 Dev\n//                    enhanced STL import, adding support for MM colors by Z3 Dev\n// 2016/02/02: 0.4.0: GUI refactored, functionality split up into more files, mostly done by Z3 Dev\n// 2015/07/02: 0.3.0: node 0.10.x support, /usr/bin/nodejs, new files involved: formats.js (Stefan Baumann) and Blob.js (Z3 Dev)\n// 2014/12/09: 0.019: support of DXF output for 2D objects (laser cutter)\n// 2013/04/25: 0.010: support of params passed to main()\n// 2013/04/12: 0.008: reimplement parseAMF without jquery\n// 2013/04/11: 0.007: support of alpha for AMF addded, bumping version\n// 2013/04/05: 0.006: support of AMF added, requires node 0.8.1+\n// 2013/03/25: 0.005: more sanity check on input and local installation support\n// 2013/03/18: 0.004: STL .stl (binary & ascii) support (experimental via openscad.js)\n// 2013/03/18: 0.003: OpenSCAD .scad support by Gary Hodgson's openscad-openjscad-translator module\n// 2013/03/02: 0.002: proper installation of the dependencies (csg.js & openscad.js) so openjscad can be used properly\n// 2013/03/01: 0.001: initial version, with base function from openscad.jscad\n//\nimport fs from 'fs'\n\nimport {version} from './jscad/version'\nimport env from './cli/env'\nimport generateOutputData from './cli/generateOutputData'\nimport { formats } from './io/formats'\n\n// var csg = sphere(1);          // -- basic test\n// var csg = require(file).main; // -- treating .jscad as module? later perhaps\n\nconst args = process.argv.splice(2)\n\n// -- main code\n\n// handle arguments\n// inputs, outputs\nlet {inputFile, inputFormat, outputFile, outputFormat, params} = parseArgs(args)\n\n// outputs\nconst output = determineOutputNameAndFormat(outputFormat, outputFile)\noutputFormat = output.outputFormat\noutputFile = output.outputFile\n\nconsole.log(`converting ${inputFile} -> ${outputFile} (${formats[outputFormat].description})`)\n\nlet src = fs.readFileSync(inputFile, inputFile.match(/\\.stl$/i) ? 'binary' : 'UTF8')\n\nif(inputFormat === 'scad')\n{\n  var scadParser = require('openscad-openjscad-translator') // hardcoded is bad, but works\n  src = scadParser.parse(src) //    doing the magick\n  src = '// producer: OpenJSCAD ' + version + '\\n' + src\n  src = '// source: ' + outputFile + '\\n\\n' + src\n}\n\n// -- convert from JSCAD script into the desired output format\n// const outputData = generateOutputData(src, params, {outputFormat})\n// -- and write it to disk\n// writeOutputDataToFile(outputFile, outputData)\ngenerateOutputData(src, params, {outputFormat, inputFile})\n  .then(function (outputData) {\n    writeOutputDataToFile(outputFile, outputData)\n  }).catch(error=>console.error(error))\n\n// -- helper functions ---------------------------------------------------------------------------------------\nfunction parseArgs (args) {\n  // hint: https://github.com/substack/node-optimist\n  //       https://github.com/visionmedia/commander.js\n  //\n  // process.argv.forEach(function (val, index, array) {\n  //  console.log(index + ': ' + val)\n  // })\n  if (args.length < 1) {\n    console.log('USAGE:\\n\\nopenjscad [-v] <file> [-of <format>] [-o <output>]')\n    console.log('\\t<file>  :\\tinput file (Supported types: .jscad, .js, .scad, .stl, .amf, .obj, .gcode, .svg, .json)')\n    console.log('\\t<output>:\\toutput file (Supported types: .jscad, .stl, .amf, .dxf, .svg, .json)')\n    console.log(\"\\t<format>:\\t'jscad', 'stla' (STL ASCII, default), 'stlb' (STL Binary), 'amf', 'dxf', 'svg', 'json'\")\n    process.exit(1)\n  }\n\n  let inputFile\n  let inputFormat\n  let outputFile\n  let outputFormat\n  let params = {}\n\n  for (var i = 0; i < args.length; i++) {\n    if (args[i] === '-of') { // -of <format>\n      outputFormat = args[++i]\n    } else if (args[i].match(/^-o(\\S.+)/)) { // -o<output>\n      outputFile = args[i]\n      outputFile = outputFile.replace(/^\\-o(\\S+)$/, '$1')\n    } else if (args[i] === '-o') { // -o <output>\n      outputFile = args[++i]\n    } else if (args[i].match(/^--(\\w+)=(.*)/)) { // params for main()\n      params[RegExp.$1] = RegExp.$2\n    } else if (args[i].match(/^--(\\w+)$/)) { // params for main()\n      params[RegExp.$1] = args[++i]\n    } else if (args[i].match(/^--(\\w+)$/)) { // params for main()\n      params[RegExp.$1] = args[++i]\n    } else if (args[i].match(/.+\\.(jscad|js|scad|stl|amf|obj|gcode|svg|json)$/i)) {\n      inputFile = args[i]\n      inputFormat = RegExp.$1\n      if (!fs.statSync(inputFile).isFile()) {\n        console.log('ERROR: cannot open file <' + inputFile + '>')\n        process.exit(1)\n      }\n    } else if (args[i].match(/^-v$/)) { // show the version and the environment information\n      env()\n      console.log('OpenSCAD Compatibility (' + version + ')')\n    } else {\n      console.log('ERROR: invalid file name or argument <' + args[i] + '>')\n      console.log(\"Type 'openjscad' for help\")\n      process.exit(1)\n    }\n  }\n  // exit if a input file was not provided\n  if (inputFile === null) process.exit(1)\n\n  if (!outputFormat && !outputFile) {\n    outputFormat = 'stla'\n  }\n\n  return {\n    inputFile,\n    inputFormat,\n    outputFile,\n    outputFormat,\n  params}\n}\n\nfunction determineOutputNameAndFormat (outputFormat, outputFile) {\n  if (!outputFormat && outputFile && outputFile.length && outputFile.match(/\\.(jscad|js|stl|amf|dxf|svg)$/)) { // output filename set\n    outputFormat = RegExp.$1\n  } else if (!outputFormat && outputFile && outputFile.length) { // output filename isn't valid\n    console.log('ERROR: invalid output file <' + outputFile + '>')\n    process.exit(1)\n  } else if (outputFormat.match(/(jscad|js|stl|stla|stlb|amf|dxf|svg)/i)) { // output format defined?\n    var ext = RegExp.$1\n    if (!outputFile) { // unless output filename not set, compose it\n      ext = ext.replace(/stl[ab]/, 'stl') // drop [ab] from stl\n      outputFile = inputFile\n      outputFile = outputFile.replace(/\\.([^\\.]+)$/, '.' + ext) // compose output filename\n    }\n  } else {\n    console.log(`ERROR: invalid output format <${outputFormat}`)\n    process.exit(1)\n  }\n  return {outputFormat, outputFile}\n}\n\nfunction writeOutputDataToFile (outputFile, outputData) {\n  fs.writeFile(outputFile, outputData.asBuffer(),\n    function (err) {\n      if (err) {\n        console.log('err', err)\n      } else {\n        //console.log('success')\n      }\n    }\n  )\n}\n","const json = require('../../package.json')\nexport const version = json.version // TODO/ add version date ?\n","import * as primitives3d from './primitives3d'\nimport * as primitives2d from './primitives2d'\nimport * as booleanOps from './ops-booleans'\nimport * as transformations from './ops-transformations'\nimport * as extrusions from './ops-extrusions'\nimport * as color from './color'\nimport * as maths from './maths'\nimport * as text from './text'\nimport { echo } from './debug'\n\n// these are 'external' to this folder ...needs to be reviewed\nimport { CAG, CSG } from '@jscad/csg'\nimport { log } from './log' // FIXME: this is a duplicate of the one in openjscad itself,\n// mostly likely needs to be removed since it is in the OpenJsCad namespace anyway, leaving here\n// for now\n\nconst exportedApi = {\n  csg: {CAG, CSG},\n  primitives2d,\n  primitives3d,\n  booleanOps,\n  transformations,\n  extrusions,\n  color,\n  maths,\n  text,\n  OpenJsCad: {OpenJsCad: {log}},\n  debug: {echo}\n}\n\nexport default exportedApi\n",";(function (sax) { // wrapper for non-node envs\n  sax.parser = function (strict, opt) { return new SAXParser(strict, opt) }\n  sax.SAXParser = SAXParser\n  sax.SAXStream = SAXStream\n  sax.createStream = createStream\n\n  // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n  // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n  // since that's the earliest that a buffer overrun could occur.  This way, checks are\n  // as rare as required, but as often as necessary to ensure never crossing this bound.\n  // Furthermore, buffers are only tested at most once per write(), so passing a very\n  // large string into write() might have undesirable effects, but this is manageable by\n  // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n  // edge case, result in creating at most one complete copy of the string passed in.\n  // Set to Infinity to have unlimited buffers.\n  sax.MAX_BUFFER_LENGTH = 64 * 1024\n\n  var buffers = [\n    'comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype',\n    'procInstName', 'procInstBody', 'entity', 'attribName',\n    'attribValue', 'cdata', 'script'\n  ]\n\n  sax.EVENTS = [\n    'text',\n    'processinginstruction',\n    'sgmldeclaration',\n    'doctype',\n    'comment',\n    'opentagstart',\n    'attribute',\n    'opentag',\n    'closetag',\n    'opencdata',\n    'cdata',\n    'closecdata',\n    'error',\n    'end',\n    'ready',\n    'script',\n    'opennamespace',\n    'closenamespace'\n  ]\n\n  function SAXParser (strict, opt) {\n    if (!(this instanceof SAXParser)) {\n      return new SAXParser(strict, opt)\n    }\n\n    var parser = this\n    clearBuffers(parser)\n    parser.q = parser.c = ''\n    parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH\n    parser.opt = opt || {}\n    parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags\n    parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase'\n    parser.tags = []\n    parser.closed = parser.closedRoot = parser.sawRoot = false\n    parser.tag = parser.error = null\n    parser.strict = !!strict\n    parser.noscript = !!(strict || parser.opt.noscript)\n    parser.state = S.BEGIN\n    parser.strictEntities = parser.opt.strictEntities\n    parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES)\n    parser.attribList = []\n\n    // namespaces form a prototype chain.\n    // it always points at the current tag,\n    // which protos to its parent tag.\n    if (parser.opt.xmlns) {\n      parser.ns = Object.create(rootNS)\n    }\n\n    // mostly just for error reporting\n    parser.trackPosition = parser.opt.position !== false\n    if (parser.trackPosition) {\n      parser.position = parser.line = parser.column = 0\n    }\n    emit(parser, 'onready')\n  }\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function F () {}\n      F.prototype = o\n      var newf = new F()\n      return newf\n    }\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = []\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i)\n      return a\n    }\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)\n    var maxActual = 0\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      var len = parser[buffers[i]].length\n      if (len > maxAllowed) {\n        // Text/cdata nodes can get big, and since they're buffered,\n        // we can get here under normal conditions.\n        // Avoid issues by emitting the text node now,\n        // so at least it won't get any bigger.\n        switch (buffers[i]) {\n          case 'textNode':\n            closeText(parser)\n            break\n\n          case 'cdata':\n            emitNode(parser, 'oncdata', parser.cdata)\n            parser.cdata = ''\n            break\n\n          case 'script':\n            emitNode(parser, 'onscript', parser.script)\n            parser.script = ''\n            break\n\n          default:\n            error(parser, 'Max buffer length exceeded: ' + buffers[i])\n        }\n      }\n      maxActual = Math.max(maxActual, len)\n    }\n    // schedule the next check for the earliest possible buffer overrun.\n    var m = sax.MAX_BUFFER_LENGTH - maxActual\n    parser.bufferCheckPosition = m + parser.position\n  }\n\n  function clearBuffers (parser) {\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      parser[buffers[i]] = ''\n    }\n  }\n\n  function flushBuffers (parser) {\n    closeText(parser)\n    if (parser.cdata !== '') {\n      emitNode(parser, 'oncdata', parser.cdata)\n      parser.cdata = ''\n    }\n    if (parser.script !== '') {\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n  }\n\n  SAXParser.prototype = {\n    end: function () { end(this) },\n    write: write,\n    resume: function () { this.error = null; return this },\n    close: function () { return this.write(null) },\n    flush: function () { flushBuffers(this) }\n  }\n\n  var Stream\n  try {\n    Stream = require('stream').Stream\n  } catch (ex) {\n    Stream = function () {}\n  }\n\n  var streamWraps = sax.EVENTS.filter(function (ev) {\n    return ev !== 'error' && ev !== 'end'\n  })\n\n  function createStream (strict, opt) {\n    return new SAXStream(strict, opt)\n  }\n\n  function SAXStream (strict, opt) {\n    if (!(this instanceof SAXStream)) {\n      return new SAXStream(strict, opt)\n    }\n\n    Stream.apply(this)\n\n    this._parser = new SAXParser(strict, opt)\n    this.writable = true\n    this.readable = true\n\n    var me = this\n\n    this._parser.onend = function () {\n      me.emit('end')\n    }\n\n    this._parser.onerror = function (er) {\n      me.emit('error', er)\n\n      // if didn't throw, then means error was handled.\n      // go ahead and clear error, so we can write again.\n      me._parser.error = null\n    }\n\n    this._decoder = null\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, 'on' + ev, {\n        get: function () {\n          return me._parser['on' + ev]\n        },\n        set: function (h) {\n          if (!h) {\n            me.removeAllListeners(ev)\n            me._parser['on' + ev] = h\n            return h\n          }\n          me.on(ev, h)\n        },\n        enumerable: true,\n        configurable: false\n      })\n    })\n  }\n\n  SAXStream.prototype = Object.create(Stream.prototype, {\n    constructor: {\n      value: SAXStream\n    }\n  })\n\n  SAXStream.prototype.write = function (data) {\n    if (typeof Buffer === 'function' &&\n      typeof Buffer.isBuffer === 'function' &&\n      Buffer.isBuffer(data)) {\n      if (!this._decoder) {\n        var SD = require('string_decoder').StringDecoder\n        this._decoder = new SD('utf8')\n      }\n      data = this._decoder.write(data)\n    }\n\n    this._parser.write(data.toString())\n    this.emit('data', data)\n    return true\n  }\n\n  SAXStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) {\n      this.write(chunk)\n    }\n    this._parser.end()\n    return true\n  }\n\n  SAXStream.prototype.on = function (ev, handler) {\n    var me = this\n    if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser['on' + ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments)\n        args.splice(0, 0, ev)\n        me.emit.apply(me, args)\n      }\n    }\n\n    return Stream.prototype.on.call(me, ev, handler)\n  }\n\n  // character classes and tokens\n  var whitespace = '\\r\\n\\t '\n\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n\n  // (Letter | \"_\" | \":\")\n  var quote = '\\'\"'\n  var attribEnd = whitespace + '>'\n  var CDATA = '[CDATA['\n  var DOCTYPE = 'DOCTYPE'\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace'\n  var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/'\n  var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }\n\n  // turn all the string character sets into character class objects.\n  whitespace = charClass(whitespace)\n\n  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n  // This implementation works on strings, a single character at a time\n  // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n  // without a significant breaking change to either this  parser, or the\n  // JavaScript language.  Implementation of an emoji-capable xml parser\n  // is left as an exercise for the reader.\n  var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n\n  var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n  var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  quote = charClass(quote)\n  attribEnd = charClass(attribEnd)\n\n  function charClass (str) {\n    return str.split('').reduce(function (s, c) {\n      s[c] = true\n      return s\n    }, {})\n  }\n\n  function isMatch (regex, c) {\n    return regex.test(c)\n  }\n\n  function is (charclass, c) {\n    return charclass[c]\n  }\n\n  function notMatch (regex, c) {\n    return !isMatch(regex, c)\n  }\n\n  function not (charclass, c) {\n    return !is(charclass, c)\n  }\n\n  var S = 0\n  sax.STATE = {\n    BEGIN: S++, // leading byte order mark or whitespace\n    BEGIN_WHITESPACE: S++, // leading whitespace\n    TEXT: S++, // general stuff\n    TEXT_ENTITY: S++, // &amp and such.\n    OPEN_WAKA: S++, // <\n    SGML_DECL: S++, // <!BLARG\n    SGML_DECL_QUOTED: S++, // <!BLARG foo \"bar\n    DOCTYPE: S++, // <!DOCTYPE\n    DOCTYPE_QUOTED: S++, // <!DOCTYPE \"//blah\n    DOCTYPE_DTD: S++, // <!DOCTYPE \"//blah\" [ ...\n    DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE \"//blah\" [ \"foo\n    COMMENT_STARTING: S++, // <!-\n    COMMENT: S++, // <!--\n    COMMENT_ENDING: S++, // <!-- blah -\n    COMMENT_ENDED: S++, // <!-- blah --\n    CDATA: S++, // <![CDATA[ something\n    CDATA_ENDING: S++, // ]\n    CDATA_ENDING_2: S++, // ]]\n    PROC_INST: S++, // <?hi\n    PROC_INST_BODY: S++, // <?hi there\n    PROC_INST_ENDING: S++, // <?hi \"there\" ?\n    OPEN_TAG: S++, // <strong\n    OPEN_TAG_SLASH: S++, // <strong /\n    ATTRIB: S++, // <a\n    ATTRIB_NAME: S++, // <a foo\n    ATTRIB_NAME_SAW_WHITE: S++, // <a foo _\n    ATTRIB_VALUE: S++, // <a foo=\n    ATTRIB_VALUE_QUOTED: S++, // <a foo=\"bar\n    ATTRIB_VALUE_CLOSED: S++, // <a foo=\"bar\"\n    ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar\n    ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar=\"&quot;\"\n    ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot\n    CLOSE_TAG: S++, // </a\n    CLOSE_TAG_SAW_WHITE: S++, // </a   >\n    SCRIPT: S++, // <script> ...\n    SCRIPT_ENDING: S++ // <script> ... <\n  }\n\n  sax.XML_ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\"\n  }\n\n  sax.ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\",\n    'AElig': 198,\n    'Aacute': 193,\n    'Acirc': 194,\n    'Agrave': 192,\n    'Aring': 197,\n    'Atilde': 195,\n    'Auml': 196,\n    'Ccedil': 199,\n    'ETH': 208,\n    'Eacute': 201,\n    'Ecirc': 202,\n    'Egrave': 200,\n    'Euml': 203,\n    'Iacute': 205,\n    'Icirc': 206,\n    'Igrave': 204,\n    'Iuml': 207,\n    'Ntilde': 209,\n    'Oacute': 211,\n    'Ocirc': 212,\n    'Ograve': 210,\n    'Oslash': 216,\n    'Otilde': 213,\n    'Ouml': 214,\n    'THORN': 222,\n    'Uacute': 218,\n    'Ucirc': 219,\n    'Ugrave': 217,\n    'Uuml': 220,\n    'Yacute': 221,\n    'aacute': 225,\n    'acirc': 226,\n    'aelig': 230,\n    'agrave': 224,\n    'aring': 229,\n    'atilde': 227,\n    'auml': 228,\n    'ccedil': 231,\n    'eacute': 233,\n    'ecirc': 234,\n    'egrave': 232,\n    'eth': 240,\n    'euml': 235,\n    'iacute': 237,\n    'icirc': 238,\n    'igrave': 236,\n    'iuml': 239,\n    'ntilde': 241,\n    'oacute': 243,\n    'ocirc': 244,\n    'ograve': 242,\n    'oslash': 248,\n    'otilde': 245,\n    'ouml': 246,\n    'szlig': 223,\n    'thorn': 254,\n    'uacute': 250,\n    'ucirc': 251,\n    'ugrave': 249,\n    'uuml': 252,\n    'yacute': 253,\n    'yuml': 255,\n    'copy': 169,\n    'reg': 174,\n    'nbsp': 160,\n    'iexcl': 161,\n    'cent': 162,\n    'pound': 163,\n    'curren': 164,\n    'yen': 165,\n    'brvbar': 166,\n    'sect': 167,\n    'uml': 168,\n    'ordf': 170,\n    'laquo': 171,\n    'not': 172,\n    'shy': 173,\n    'macr': 175,\n    'deg': 176,\n    'plusmn': 177,\n    'sup1': 185,\n    'sup2': 178,\n    'sup3': 179,\n    'acute': 180,\n    'micro': 181,\n    'para': 182,\n    'middot': 183,\n    'cedil': 184,\n    'ordm': 186,\n    'raquo': 187,\n    'frac14': 188,\n    'frac12': 189,\n    'frac34': 190,\n    'iquest': 191,\n    'times': 215,\n    'divide': 247,\n    'OElig': 338,\n    'oelig': 339,\n    'Scaron': 352,\n    'scaron': 353,\n    'Yuml': 376,\n    'fnof': 402,\n    'circ': 710,\n    'tilde': 732,\n    'Alpha': 913,\n    'Beta': 914,\n    'Gamma': 915,\n    'Delta': 916,\n    'Epsilon': 917,\n    'Zeta': 918,\n    'Eta': 919,\n    'Theta': 920,\n    'Iota': 921,\n    'Kappa': 922,\n    'Lambda': 923,\n    'Mu': 924,\n    'Nu': 925,\n    'Xi': 926,\n    'Omicron': 927,\n    'Pi': 928,\n    'Rho': 929,\n    'Sigma': 931,\n    'Tau': 932,\n    'Upsilon': 933,\n    'Phi': 934,\n    'Chi': 935,\n    'Psi': 936,\n    'Omega': 937,\n    'alpha': 945,\n    'beta': 946,\n    'gamma': 947,\n    'delta': 948,\n    'epsilon': 949,\n    'zeta': 950,\n    'eta': 951,\n    'theta': 952,\n    'iota': 953,\n    'kappa': 954,\n    'lambda': 955,\n    'mu': 956,\n    'nu': 957,\n    'xi': 958,\n    'omicron': 959,\n    'pi': 960,\n    'rho': 961,\n    'sigmaf': 962,\n    'sigma': 963,\n    'tau': 964,\n    'upsilon': 965,\n    'phi': 966,\n    'chi': 967,\n    'psi': 968,\n    'omega': 969,\n    'thetasym': 977,\n    'upsih': 978,\n    'piv': 982,\n    'ensp': 8194,\n    'emsp': 8195,\n    'thinsp': 8201,\n    'zwnj': 8204,\n    'zwj': 8205,\n    'lrm': 8206,\n    'rlm': 8207,\n    'ndash': 8211,\n    'mdash': 8212,\n    'lsquo': 8216,\n    'rsquo': 8217,\n    'sbquo': 8218,\n    'ldquo': 8220,\n    'rdquo': 8221,\n    'bdquo': 8222,\n    'dagger': 8224,\n    'Dagger': 8225,\n    'bull': 8226,\n    'hellip': 8230,\n    'permil': 8240,\n    'prime': 8242,\n    'Prime': 8243,\n    'lsaquo': 8249,\n    'rsaquo': 8250,\n    'oline': 8254,\n    'frasl': 8260,\n    'euro': 8364,\n    'image': 8465,\n    'weierp': 8472,\n    'real': 8476,\n    'trade': 8482,\n    'alefsym': 8501,\n    'larr': 8592,\n    'uarr': 8593,\n    'rarr': 8594,\n    'darr': 8595,\n    'harr': 8596,\n    'crarr': 8629,\n    'lArr': 8656,\n    'uArr': 8657,\n    'rArr': 8658,\n    'dArr': 8659,\n    'hArr': 8660,\n    'forall': 8704,\n    'part': 8706,\n    'exist': 8707,\n    'empty': 8709,\n    'nabla': 8711,\n    'isin': 8712,\n    'notin': 8713,\n    'ni': 8715,\n    'prod': 8719,\n    'sum': 8721,\n    'minus': 8722,\n    'lowast': 8727,\n    'radic': 8730,\n    'prop': 8733,\n    'infin': 8734,\n    'ang': 8736,\n    'and': 8743,\n    'or': 8744,\n    'cap': 8745,\n    'cup': 8746,\n    'int': 8747,\n    'there4': 8756,\n    'sim': 8764,\n    'cong': 8773,\n    'asymp': 8776,\n    'ne': 8800,\n    'equiv': 8801,\n    'le': 8804,\n    'ge': 8805,\n    'sub': 8834,\n    'sup': 8835,\n    'nsub': 8836,\n    'sube': 8838,\n    'supe': 8839,\n    'oplus': 8853,\n    'otimes': 8855,\n    'perp': 8869,\n    'sdot': 8901,\n    'lceil': 8968,\n    'rceil': 8969,\n    'lfloor': 8970,\n    'rfloor': 8971,\n    'lang': 9001,\n    'rang': 9002,\n    'loz': 9674,\n    'spades': 9824,\n    'clubs': 9827,\n    'hearts': 9829,\n    'diams': 9830\n  }\n\n  Object.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key]\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e\n    sax.ENTITIES[key] = s\n  })\n\n  for (var s in sax.STATE) {\n    sax.STATE[sax.STATE[s]] = s\n  }\n\n  // shorthand\n  S = sax.STATE\n\n  function emit (parser, event, data) {\n    parser[event] && parser[event](data)\n  }\n\n  function emitNode (parser, nodeType, data) {\n    if (parser.textNode) closeText(parser)\n    emit(parser, nodeType, data)\n  }\n\n  function closeText (parser) {\n    parser.textNode = textopts(parser.opt, parser.textNode)\n    if (parser.textNode) emit(parser, 'ontext', parser.textNode)\n    parser.textNode = ''\n  }\n\n  function textopts (opt, text) {\n    if (opt.trim) text = text.trim()\n    if (opt.normalize) text = text.replace(/\\s+/g, ' ')\n    return text\n  }\n\n  function error (parser, er) {\n    closeText(parser)\n    if (parser.trackPosition) {\n      er += '\\nLine: ' + parser.line +\n        '\\nColumn: ' + parser.column +\n        '\\nChar: ' + parser.c\n    }\n    er = new Error(er)\n    parser.error = er\n    emit(parser, 'onerror', er)\n    return parser\n  }\n\n  function end (parser) {\n    if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag')\n    if ((parser.state !== S.BEGIN) &&\n      (parser.state !== S.BEGIN_WHITESPACE) &&\n      (parser.state !== S.TEXT)) {\n      error(parser, 'Unexpected end')\n    }\n    closeText(parser)\n    parser.c = ''\n    parser.closed = true\n    emit(parser, 'onend')\n    SAXParser.call(parser, parser.strict, parser.opt)\n    return parser\n  }\n\n  function strictFail (parser, message) {\n    if (typeof parser !== 'object' || !(parser instanceof SAXParser)) {\n      throw new Error('bad call to strictFail')\n    }\n    if (parser.strict) {\n      error(parser, message)\n    }\n  }\n\n  function newTag (parser) {\n    if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    var tag = parser.tag = { name: parser.tagName, attributes: {} }\n\n    // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n    if (parser.opt.xmlns) {\n      tag.ns = parent.ns\n    }\n    parser.attribList.length = 0\n    emitNode(parser, 'onopentagstart', tag)\n  }\n\n  function qname (name, attribute) {\n    var i = name.indexOf(':')\n    var qualName = i < 0 ? [ '', name ] : name.split(':')\n    var prefix = qualName[0]\n    var local = qualName[1]\n\n    // <x \"xmlns\"=\"http://foo\">\n    if (attribute && name === 'xmlns') {\n      prefix = 'xmlns'\n      local = ''\n    }\n\n    return { prefix: prefix, local: local }\n  }\n\n  function attrib (parser) {\n    if (!parser.strict) {\n      parser.attribName = parser.attribName[parser.looseCase]()\n    }\n\n    if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n      parser.attribName = parser.attribValue = ''\n      return\n    }\n\n    if (parser.opt.xmlns) {\n      var qn = qname(parser.attribName, true)\n      var prefix = qn.prefix\n      var local = qn.local\n\n      if (prefix === 'xmlns') {\n        // namespace binding attribute. push the binding into scope\n        if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {\n          strictFail(parser,\n            'xml: prefix must be bound to ' + XML_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {\n          strictFail(parser,\n            'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else {\n          var tag = parser.tag\n          var parent = parser.tags[parser.tags.length - 1] || parser\n          if (tag.ns === parent.ns) {\n            tag.ns = Object.create(parent.ns)\n          }\n          tag.ns[local] = parser.attribValue\n        }\n      }\n\n      // defer onattribute events until all attributes have been seen\n      // so any new bindings can take effect. preserve attribute order\n      // so deferred events can be emitted in document order\n      parser.attribList.push([parser.attribName, parser.attribValue])\n    } else {\n      // in non-xmlns mode, we can emit the event right away\n      parser.tag.attributes[parser.attribName] = parser.attribValue\n      emitNode(parser, 'onattribute', {\n        name: parser.attribName,\n        value: parser.attribValue\n      })\n    }\n\n    parser.attribName = parser.attribValue = ''\n  }\n\n  function openTag (parser, selfClosing) {\n    if (parser.opt.xmlns) {\n      // emit namespace binding events\n      var tag = parser.tag\n\n      // add namespace info to tag\n      var qn = qname(parser.tagName)\n      tag.prefix = qn.prefix\n      tag.local = qn.local\n      tag.uri = tag.ns[qn.prefix] || ''\n\n      if (tag.prefix && !tag.uri) {\n        strictFail(parser, 'Unbound namespace prefix: ' +\n          JSON.stringify(parser.tagName))\n        tag.uri = qn.prefix\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (tag.ns && parent.ns !== tag.ns) {\n        Object.keys(tag.ns).forEach(function (p) {\n          emitNode(parser, 'onopennamespace', {\n            prefix: p,\n            uri: tag.ns[p]\n          })\n        })\n      }\n\n      // handle deferred onattribute events\n      // Note: do not apply default ns to attributes:\n      //   http://www.w3.org/TR/REC-xml-names/#defaulting\n      for (var i = 0, l = parser.attribList.length; i < l; i++) {\n        var nv = parser.attribList[i]\n        var name = nv[0]\n        var value = nv[1]\n        var qualName = qname(name, true)\n        var prefix = qualName.prefix\n        var local = qualName.local\n        var uri = prefix === '' ? '' : (tag.ns[prefix] || '')\n        var a = {\n          name: name,\n          value: value,\n          prefix: prefix,\n          local: local,\n          uri: uri\n        }\n\n        // if there's any attributes with an undefined namespace,\n        // then fail on them now.\n        if (prefix && prefix !== 'xmlns' && !uri) {\n          strictFail(parser, 'Unbound namespace prefix: ' +\n            JSON.stringify(prefix))\n          a.uri = prefix\n        }\n        parser.tag.attributes[name] = a\n        emitNode(parser, 'onattribute', a)\n      }\n      parser.attribList.length = 0\n    }\n\n    parser.tag.isSelfClosing = !!selfClosing\n\n    // process the tag\n    parser.sawRoot = true\n    parser.tags.push(parser.tag)\n    emitNode(parser, 'onopentag', parser.tag)\n    if (!selfClosing) {\n      // special case for <script> in non-strict mode.\n      if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {\n        parser.state = S.SCRIPT\n      } else {\n        parser.state = S.TEXT\n      }\n      parser.tag = null\n      parser.tagName = ''\n    }\n    parser.attribName = parser.attribValue = ''\n    parser.attribList.length = 0\n  }\n\n  function closeTag (parser) {\n    if (!parser.tagName) {\n      strictFail(parser, 'Weird empty close tag.')\n      parser.textNode += '</>'\n      parser.state = S.TEXT\n      return\n    }\n\n    if (parser.script) {\n      if (parser.tagName !== 'script') {\n        parser.script += '</' + parser.tagName + '>'\n        parser.tagName = ''\n        parser.state = S.SCRIPT\n        return\n      }\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n\n    // first make sure that the closing tag actually exists.\n    // <a><b></c></b></a> will close everything, otherwise.\n    var t = parser.tags.length\n    var tagName = parser.tagName\n    if (!parser.strict) {\n      tagName = tagName[parser.looseCase]()\n    }\n    var closeTo = tagName\n    while (t--) {\n      var close = parser.tags[t]\n      if (close.name !== closeTo) {\n        // fail the first time in strict mode\n        strictFail(parser, 'Unexpected close tag')\n      } else {\n        break\n      }\n    }\n\n    // didn't find it.  we already failed for strict, so just abort.\n    if (t < 0) {\n      strictFail(parser, 'Unmatched closing tag: ' + parser.tagName)\n      parser.textNode += '</' + parser.tagName + '>'\n      parser.state = S.TEXT\n      return\n    }\n    parser.tagName = tagName\n    var s = parser.tags.length\n    while (s-- > t) {\n      var tag = parser.tag = parser.tags.pop()\n      parser.tagName = parser.tag.name\n      emitNode(parser, 'onclosetag', parser.tagName)\n\n      var x = {}\n      for (var i in tag.ns) {\n        x[i] = tag.ns[i]\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (parser.opt.xmlns && tag.ns !== parent.ns) {\n        // remove namespace bindings introduced by tag\n        Object.keys(tag.ns).forEach(function (p) {\n          var n = tag.ns[p]\n          emitNode(parser, 'onclosenamespace', { prefix: p, uri: n })\n        })\n      }\n    }\n    if (t === 0) parser.closedRoot = true\n    parser.tagName = parser.attribValue = parser.attribName = ''\n    parser.attribList.length = 0\n    parser.state = S.TEXT\n  }\n\n  function parseEntity (parser) {\n    var entity = parser.entity\n    var entityLC = entity.toLowerCase()\n    var num\n    var numStr = ''\n\n    if (parser.ENTITIES[entity]) {\n      return parser.ENTITIES[entity]\n    }\n    if (parser.ENTITIES[entityLC]) {\n      return parser.ENTITIES[entityLC]\n    }\n    entity = entityLC\n    if (entity.charAt(0) === '#') {\n      if (entity.charAt(1) === 'x') {\n        entity = entity.slice(2)\n        num = parseInt(entity, 16)\n        numStr = num.toString(16)\n      } else {\n        entity = entity.slice(1)\n        num = parseInt(entity, 10)\n        numStr = num.toString(10)\n      }\n    }\n    entity = entity.replace(/^0+/, '')\n    if (numStr.toLowerCase() !== entity) {\n      strictFail(parser, 'Invalid character entity')\n      return '&' + parser.entity + ';'\n    }\n\n    return String.fromCodePoint(num)\n  }\n\n  function beginWhiteSpace (parser, c) {\n    if (c === '<') {\n      parser.state = S.OPEN_WAKA\n      parser.startTagPosition = parser.position\n    } else if (not(whitespace, c)) {\n      // have to process this as a text node.\n      // weird, but happens.\n      strictFail(parser, 'Non-whitespace before first tag.')\n      parser.textNode = c\n      parser.state = S.TEXT\n    }\n  }\n\n  function charAt (chunk, i) {\n    var result = ''\n    if (i < chunk.length) {\n      result = chunk.charAt(i)\n    }\n    return result\n  }\n\n  function write (chunk) {\n    var parser = this\n    if (this.error) {\n      throw this.error\n    }\n    if (parser.closed) {\n      return error(parser,\n        'Cannot write after close. Assign an onready handler.')\n    }\n    if (chunk === null) {\n      return end(parser)\n    }\n    if (typeof chunk === 'object') {\n      chunk = chunk.toString()\n    }\n    var i = 0\n    var c = ''\n    while (true) {\n      c = charAt(chunk, i++)\n      parser.c = c\n\n      if (!c) {\n        break\n      }\n\n      if (parser.trackPosition) {\n        parser.position++\n        if (c === '\\n') {\n          parser.line++\n          parser.column = 0\n        } else {\n          parser.column++\n        }\n      }\n\n      switch (parser.state) {\n        case S.BEGIN:\n          parser.state = S.BEGIN_WHITESPACE\n          if (c === '\\uFEFF') {\n            continue\n          }\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.BEGIN_WHITESPACE:\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.TEXT:\n          if (parser.sawRoot && !parser.closedRoot) {\n            var starti = i - 1\n            while (c && c !== '<' && c !== '&') {\n              c = charAt(chunk, i++)\n              if (c && parser.trackPosition) {\n                parser.position++\n                if (c === '\\n') {\n                  parser.line++\n                  parser.column = 0\n                } else {\n                  parser.column++\n                }\n              }\n            }\n            parser.textNode += chunk.substring(starti, i - 1)\n          }\n          if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n            parser.state = S.OPEN_WAKA\n            parser.startTagPosition = parser.position\n          } else {\n            if (not(whitespace, c) && (!parser.sawRoot || parser.closedRoot)) {\n              strictFail(parser, 'Text data outside of root node.')\n            }\n            if (c === '&') {\n              parser.state = S.TEXT_ENTITY\n            } else {\n              parser.textNode += c\n            }\n          }\n          continue\n\n        case S.SCRIPT:\n          // only non-strict\n          if (c === '<') {\n            parser.state = S.SCRIPT_ENDING\n          } else {\n            parser.script += c\n          }\n          continue\n\n        case S.SCRIPT_ENDING:\n          if (c === '/') {\n            parser.state = S.CLOSE_TAG\n          } else {\n            parser.script += '<' + c\n            parser.state = S.SCRIPT\n          }\n          continue\n\n        case S.OPEN_WAKA:\n          // either a /, ?, !, or text is coming next.\n          if (c === '!') {\n            parser.state = S.SGML_DECL\n            parser.sgmlDecl = ''\n          } else if (is(whitespace, c)) {\n            // wait for it...\n          } else if (isMatch(nameStart, c)) {\n            parser.state = S.OPEN_TAG\n            parser.tagName = c\n          } else if (c === '/') {\n            parser.state = S.CLOSE_TAG\n            parser.tagName = ''\n          } else if (c === '?') {\n            parser.state = S.PROC_INST\n            parser.procInstName = parser.procInstBody = ''\n          } else {\n            strictFail(parser, 'Unencoded <')\n            // if there was some whitespace, then add that in.\n            if (parser.startTagPosition + 1 < parser.position) {\n              var pad = parser.position - parser.startTagPosition\n              c = new Array(pad).join(' ') + c\n            }\n            parser.textNode += '<' + c\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.SGML_DECL:\n          if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n            emitNode(parser, 'onopencdata')\n            parser.state = S.CDATA\n            parser.sgmlDecl = ''\n            parser.cdata = ''\n          } else if (parser.sgmlDecl + c === '--') {\n            parser.state = S.COMMENT\n            parser.comment = ''\n            parser.sgmlDecl = ''\n          } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n            parser.state = S.DOCTYPE\n            if (parser.doctype || parser.sawRoot) {\n              strictFail(parser,\n                'Inappropriately located doctype declaration')\n            }\n            parser.doctype = ''\n            parser.sgmlDecl = ''\n          } else if (c === '>') {\n            emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl)\n            parser.sgmlDecl = ''\n            parser.state = S.TEXT\n          } else if (is(quote, c)) {\n            parser.state = S.SGML_DECL_QUOTED\n            parser.sgmlDecl += c\n          } else {\n            parser.sgmlDecl += c\n          }\n          continue\n\n        case S.SGML_DECL_QUOTED:\n          if (c === parser.q) {\n            parser.state = S.SGML_DECL\n            parser.q = ''\n          }\n          parser.sgmlDecl += c\n          continue\n\n        case S.DOCTYPE:\n          if (c === '>') {\n            parser.state = S.TEXT\n            emitNode(parser, 'ondoctype', parser.doctype)\n            parser.doctype = true // just remember that we saw it.\n          } else {\n            parser.doctype += c\n            if (c === '[') {\n              parser.state = S.DOCTYPE_DTD\n            } else if (is(quote, c)) {\n              parser.state = S.DOCTYPE_QUOTED\n              parser.q = c\n            }\n          }\n          continue\n\n        case S.DOCTYPE_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.q = ''\n            parser.state = S.DOCTYPE\n          }\n          continue\n\n        case S.DOCTYPE_DTD:\n          parser.doctype += c\n          if (c === ']') {\n            parser.state = S.DOCTYPE\n          } else if (is(quote, c)) {\n            parser.state = S.DOCTYPE_DTD_QUOTED\n            parser.q = c\n          }\n          continue\n\n        case S.DOCTYPE_DTD_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.state = S.DOCTYPE_DTD\n            parser.q = ''\n          }\n          continue\n\n        case S.COMMENT:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDING\n          } else {\n            parser.comment += c\n          }\n          continue\n\n        case S.COMMENT_ENDING:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDED\n            parser.comment = textopts(parser.opt, parser.comment)\n            if (parser.comment) {\n              emitNode(parser, 'oncomment', parser.comment)\n            }\n            parser.comment = ''\n          } else {\n            parser.comment += '-' + c\n            parser.state = S.COMMENT\n          }\n          continue\n\n        case S.COMMENT_ENDED:\n          if (c !== '>') {\n            strictFail(parser, 'Malformed comment')\n            // allow <!-- blah -- bloo --> in non-strict mode,\n            // which is a comment of \" blah -- bloo \"\n            parser.comment += '--' + c\n            parser.state = S.COMMENT\n          } else {\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.CDATA:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING\n          } else {\n            parser.cdata += c\n          }\n          continue\n\n        case S.CDATA_ENDING:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING_2\n          } else {\n            parser.cdata += ']' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.CDATA_ENDING_2:\n          if (c === '>') {\n            if (parser.cdata) {\n              emitNode(parser, 'oncdata', parser.cdata)\n            }\n            emitNode(parser, 'onclosecdata')\n            parser.cdata = ''\n            parser.state = S.TEXT\n          } else if (c === ']') {\n            parser.cdata += ']'\n          } else {\n            parser.cdata += ']]' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.PROC_INST:\n          if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else if (is(whitespace, c)) {\n            parser.state = S.PROC_INST_BODY\n          } else {\n            parser.procInstName += c\n          }\n          continue\n\n        case S.PROC_INST_BODY:\n          if (!parser.procInstBody && is(whitespace, c)) {\n            continue\n          } else if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else {\n            parser.procInstBody += c\n          }\n          continue\n\n        case S.PROC_INST_ENDING:\n          if (c === '>') {\n            emitNode(parser, 'onprocessinginstruction', {\n              name: parser.procInstName,\n              body: parser.procInstBody\n            })\n            parser.procInstName = parser.procInstBody = ''\n            parser.state = S.TEXT\n          } else {\n            parser.procInstBody += '?' + c\n            parser.state = S.PROC_INST_BODY\n          }\n          continue\n\n        case S.OPEN_TAG:\n          if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else {\n            newTag(parser)\n            if (c === '>') {\n              openTag(parser)\n            } else if (c === '/') {\n              parser.state = S.OPEN_TAG_SLASH\n            } else {\n              if (not(whitespace, c)) {\n                strictFail(parser, 'Invalid character in tag name')\n              }\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.OPEN_TAG_SLASH:\n          if (c === '>') {\n            openTag(parser, true)\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Forward-slash in opening tag not followed by >')\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.ATTRIB:\n          // haven't read the attribute name yet.\n          if (is(whitespace, c)) {\n            continue\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (c === '>') {\n            strictFail(parser, 'Attribute without value')\n            parser.attribValue = parser.attribName\n            attrib(parser)\n            openTag(parser)\n          } else if (is(whitespace, c)) {\n            parser.state = S.ATTRIB_NAME_SAW_WHITE\n          } else if (isMatch(nameBody, c)) {\n            parser.attribName += c\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME_SAW_WHITE:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (is(whitespace, c)) {\n            continue\n          } else {\n            strictFail(parser, 'Attribute without value')\n            parser.tag.attributes[parser.attribName] = ''\n            parser.attribValue = ''\n            emitNode(parser, 'onattribute', {\n              name: parser.attribName,\n              value: ''\n            })\n            parser.attribName = ''\n            if (c === '>') {\n              openTag(parser)\n            } else if (isMatch(nameStart, c)) {\n              parser.attribName = c\n              parser.state = S.ATTRIB_NAME\n            } else {\n              strictFail(parser, 'Invalid attribute name')\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.ATTRIB_VALUE:\n          if (is(whitespace, c)) {\n            continue\n          } else if (is(quote, c)) {\n            parser.q = c\n            parser.state = S.ATTRIB_VALUE_QUOTED\n          } else {\n            strictFail(parser, 'Unquoted attribute value')\n            parser.state = S.ATTRIB_VALUE_UNQUOTED\n            parser.attribValue = c\n          }\n          continue\n\n        case S.ATTRIB_VALUE_QUOTED:\n          if (c !== parser.q) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_Q\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          parser.q = ''\n          parser.state = S.ATTRIB_VALUE_CLOSED\n          continue\n\n        case S.ATTRIB_VALUE_CLOSED:\n          if (is(whitespace, c)) {\n            parser.state = S.ATTRIB\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            strictFail(parser, 'No whitespace between attributes')\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_VALUE_UNQUOTED:\n          if (not(attribEnd, c)) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_U\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          if (c === '>') {\n            openTag(parser)\n          } else {\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.CLOSE_TAG:\n          if (!parser.tagName) {\n            if (is(whitespace, c)) {\n              continue\n            } else if (notMatch(nameStart, c)) {\n              if (parser.script) {\n                parser.script += '</' + c\n                parser.state = S.SCRIPT\n              } else {\n                strictFail(parser, 'Invalid tagname in closing tag.')\n              }\n            } else {\n              parser.tagName = c\n            }\n          } else if (c === '>') {\n            closeTag(parser)\n          } else if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else if (parser.script) {\n            parser.script += '</' + parser.tagName\n            parser.tagName = ''\n            parser.state = S.SCRIPT\n          } else {\n            if (not(whitespace, c)) {\n              strictFail(parser, 'Invalid tagname in closing tag')\n            }\n            parser.state = S.CLOSE_TAG_SAW_WHITE\n          }\n          continue\n\n        case S.CLOSE_TAG_SAW_WHITE:\n          if (is(whitespace, c)) {\n            continue\n          }\n          if (c === '>') {\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Invalid characters in closing tag')\n          }\n          continue\n\n        case S.TEXT_ENTITY:\n        case S.ATTRIB_VALUE_ENTITY_Q:\n        case S.ATTRIB_VALUE_ENTITY_U:\n          var returnState\n          var buffer\n          switch (parser.state) {\n            case S.TEXT_ENTITY:\n              returnState = S.TEXT\n              buffer = 'textNode'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_Q:\n              returnState = S.ATTRIB_VALUE_QUOTED\n              buffer = 'attribValue'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_U:\n              returnState = S.ATTRIB_VALUE_UNQUOTED\n              buffer = 'attribValue'\n              break\n          }\n\n          if (c === ';') {\n            parser[buffer] += parseEntity(parser)\n            parser.entity = ''\n            parser.state = returnState\n          } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n            parser.entity += c\n          } else {\n            strictFail(parser, 'Invalid character in entity name')\n            parser[buffer] += '&' + parser.entity + c\n            parser.entity = ''\n            parser.state = returnState\n          }\n\n          continue\n\n        default:\n          throw new Error(parser, 'Unknown state: ' + parser.state)\n      }\n    } // while\n\n    if (parser.position >= parser.bufferCheckPosition) {\n      checkBufferLength(parser)\n    }\n    return parser\n  }\n\n  /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n  /* istanbul ignore next */\n  if (!String.fromCodePoint) {\n    (function () {\n      var stringFromCharCode = String.fromCharCode\n      var floor = Math.floor\n      var fromCodePoint = function () {\n        var MAX_SIZE = 0x4000\n        var codeUnits = []\n        var highSurrogate\n        var lowSurrogate\n        var index = -1\n        var length = arguments.length\n        if (!length) {\n          return ''\n        }\n        var result = ''\n        while (++index < length) {\n          var codePoint = Number(arguments[index])\n          if (\n            !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n            codePoint < 0 || // not a valid Unicode code point\n            codePoint > 0x10FFFF || // not a valid Unicode code point\n            floor(codePoint) !== codePoint // not an integer\n          ) {\n            throw RangeError('Invalid code point: ' + codePoint)\n          }\n          if (codePoint <= 0xFFFF) { // BMP code point\n            codeUnits.push(codePoint)\n          } else { // Astral code point; split in surrogate halves\n            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n            codePoint -= 0x10000\n            highSurrogate = (codePoint >> 10) + 0xD800\n            lowSurrogate = (codePoint % 0x400) + 0xDC00\n            codeUnits.push(highSurrogate, lowSurrogate)\n          }\n          if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n            result += stringFromCharCode.apply(null, codeUnits)\n            codeUnits.length = 0\n          }\n        }\n        return result\n      }\n      /* istanbul ignore next */\n      if (Object.defineProperty) {\n        Object.defineProperty(String, 'fromCodePoint', {\n          value: fromCodePoint,\n          configurable: true,\n          writable: true\n        })\n      } else {\n        String.fromCodePoint = fromCodePoint\n      }\n    }())\n  }\n})(typeof exports === 'undefined' ? this.sax = {} : exports)\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar _jscad_csg = require('@jscad/csg');\n\n/*\n * Blob.js\n * See https://developer.mozilla.org/en-US/docs/Web/API/Blob\n *\n * Node and Browserify Compatible\n *\n * Copyright (c) 2015 by Z3 Dev (@zdev/www.z3dev.jp)\n * License: MIT License\n *\n * This implementation uses the Buffer class for all storage.\n * See https://nodejs.org/api/buffer.html\n *\n * URL.createObjectURL(blob)\n *\n * History:\n * 2015/07/02: 0.0.1: contributed to OpenJSCAD.org CLI openjscad\n */\n\nfunction makeBlob (contents, options) {\n  var blob = typeof window !== 'undefined' ? window.Blob : Blob;\n  return blob\n}\n\nfunction Blob (contents, options) {\n  var this$1 = this;\n\n  // make the optional options non-optional\n  options = options || {};\n  // number of bytes\n  this.size = 0; // contents, not allocation\n  // media type\n  this.type = '';\n  // readability state (CLOSED: true, OPENED: false)\n  this.isClosed = false;\n  // encoding of given strings\n  this.encoding = 'utf8';\n  // storage\n  this.buffer = null;\n  this.length = 32e+6; // allocation, not contents\n\n  if (!contents) { return }\n  if (!Array.isArray(contents)) { return }\n\n  // process options if any\n  if (options.type) {\n    // TBD if type contains any chars outside range U+0020 to U+007E, then set type to the empty string\n    // Convert every character in type to lowercase\n    this.type = options.type.toLowerCase();\n  }\n  if (options.endings) {\n    // convert the EOL on strings\n  }\n  if (options.encoding) {\n    this.encoding = options.encoding.toLowerCase();\n  }\n  if (options.length) {\n    this.length = options.length;\n  }\n\n  var wbytes;\n  var object;\n  // convert the contents (String, ArrayBufferView, ArrayBuffer, Blob)\n  this.buffer = new Buffer(this.length);\n  var index = 0;\n  for (index = 0; index < contents.length; index++) {\n    switch (typeof (contents[index])) {\n      case 'string':\n        wbytes = this$1.buffer.write(contents[index], this$1.size, this$1.encoding);\n        this$1.size = this$1.size + wbytes;\n        break\n      case 'object':\n        object = contents[index]; // this should be a reference to an object\n        if (Buffer.isBuffer(object)) {\n        }\n        if (object instanceof ArrayBuffer) {\n          var view = new DataView(object);\n          var bindex = 0;\n          for (bindex = 0; bindex < object.byteLength; bindex++) {\n            var xbyte = view.getUint8(bindex);\n            wbytes = this$1.buffer.writeUInt8(xbyte, this$1.size, false);\n            this$1.size++;\n          }\n        }\n        break\n      default:\n        break\n    }\n  }\n  return this\n}\n\nBlob.prototype = {\n  asBuffer: function () {\n    return this.buffer.slice(0, this.size)\n  },\n\n  slice: function (start, end, type) {\n    start = start || 0;\n    end = end || this.size;\n    type = type || '';\n    return new Blob()\n  },\n\n  close: function () {\n    // if state of context objext is already CLOSED then return\n    if (this.isClosed) { return }\n    // set the readbility state of the context object to CLOSED and remove storage\n    this.isClosed = true;\n  },\n\n  toString: function () {\n    return 'blob blob blob'\n  }\n};\n\nfunction revokeBlobUrl (url) {\n  if (window.URL) { window.URL.revokeObjectURL(url); }\n  else if (window.webkitURL) { window.webkitURL.revokeObjectURL(url); }\n  else { throw new Error(\"Your browser doesn't support window.URL\") }\n}\n\nvar Blob$1 = makeBlob();\n\nfunction CAGToDxf (cagObject) {\n  var paths = cagObject.getOutlinePaths();\n  return PathsToDxf(paths)\n}\n\nfunction PathsToDxf (paths) {\n  var str = '999\\nDXF generated by OpenJsCad\\n';\n  str += '  0\\nSECTION\\n  2\\nHEADER\\n';\n  str += '  0\\nENDSEC\\n';\n  str += '  0\\nSECTION\\n  2\\nTABLES\\n';\n  str += '  0\\nTABLE\\n  2\\nLTYPE\\n  70\\n1\\n';\n  str += '  0\\nLTYPE\\n  2\\nCONTINUOUS\\n  3\\nSolid Line\\n  72\\n65\\n  73\\n0\\n  40\\n0.0\\n';\n  str += '  0\\nENDTAB\\n';\n  str += '  0\\nTABLE\\n  2\\nLAYER\\n  70\\n1\\n';\n  str += '  0\\nLAYER\\n  2\\nOpenJsCad\\n  62\\n7\\n  6\\ncontinuous\\n';\n  str += '  0\\nENDTAB\\n';\n  str += '  0\\nTABLE\\n  2\\nSTYLE\\n  70\\n0\\n  0\\nENDTAB\\n';\n  str += '  0\\nTABLE\\n  2\\nVIEW\\n  70\\n0\\n  0\\nENDTAB\\n';\n  str += '  0\\nENDSEC\\n';\n  str += '  0\\nSECTION\\n  2\\nBLOCKS\\n';\n  str += '  0\\nENDSEC\\n';\n  str += '  0\\nSECTION\\n  2\\nENTITIES\\n';\n  paths.map(function (path) {\n    var numpoints_closed = path.points.length + (path.closed ? 1 : 0);\n    str += '  0\\nLWPOLYLINE\\n  8\\nOpenJsCad\\n  90\\n' + numpoints_closed + '\\n  70\\n' + (path.closed ? 1 : 0) + '\\n';\n    for (var pointindex = 0; pointindex < numpoints_closed; pointindex++) {\n      var pointindexwrapped = pointindex;\n      if (pointindexwrapped >= path.points.length) { pointindexwrapped -= path.points.length; }\n      var point = path.points[pointindexwrapped];\n      str += ' 10\\n' + point.x + '\\n 20\\n' + point.y + '\\n 30\\n0.0\\n';\n    }\n  });\n  str += '  0\\nENDSEC\\n  0\\nEOF\\n';\n  return new Blob$1([str], {\n    type: 'application/dxf'\n  })\n}\n\nvar Blob$2 = makeBlob();\n\nfunction CAGToJson (CAG) {\n  var str = '{ \"type\": \"cag\",\"sides\": [';\n  var comma = '';\n  CAG.sides.map(\n    function (side) {\n      str += comma;\n      str += JSON.stringify(side);\n      comma = ',';\n    }\n  );\n  str += '] }';\n  return new Blob$2([str], {\n    type: 'application/json'\n  })\n}\n\nvar Blob$3 = makeBlob();\n\nfunction CAGToSvg (cagObject) {\n  var decimals = 1000;\n\n  // mirror the CAG about the X axis in order to generate paths into the POSITIVE direction\n  var plane = new _jscad_csg.CSG.Plane(_jscad_csg.CSG.Vector3D.Create(0, 1, 0), 0);\n  var cag = cagObject.transform(_jscad_csg.CSG.Matrix4x4.mirroring(plane));\n\n  var bounds = cag.getBounds();\n  var paths = cag.getOutlinePaths();\n  var width = Math.round((bounds[1].x - bounds[0].x) * decimals) / decimals;\n  var height = Math.round((bounds[1].y - bounds[0].y) * decimals) / decimals;\n  var svg = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n';\n  svg += '<!-- Generated by OpenJSCAD.org -->\\n';\n  svg += '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1 Tiny//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11-tiny.dtd\">\\n';\n  svg += '<svg width=\"' + width + 'mm\" height=\"' + height + 'mm\" viewBox=\"0 0 ' + width + ' ' + height + '\" version=\"1.1\" baseProfile=\"tiny\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n';\n  svg += PathsToSvg(paths, bounds);\n  svg += '</svg>';\n  return new Blob$3([svg], {\n    type: 'image/svg+xml'\n  })\n}\n\nfunction PathsToSvg (paths, bounds) {\n  // calculate offsets in order to create paths orientated from the 0,0 axis\n  var xoffset = 0 - bounds[0].x;\n  var yoffset = 0 - bounds[0].y;\n  var str = '<g>\\n';\n  paths.map(function (path) {\n    str += '<path d=\"';\n    // FIXME add fill color when CAG has support for colors\n    var numpoints_closed = path.points.length + (path.closed ? 1 : 0);\n    for (var pointindex = 0; pointindex < numpoints_closed; pointindex++) {\n      var pointindexwrapped = pointindex;\n      if (pointindexwrapped >= path.points.length) { pointindexwrapped -= path.points.length; }\n      var point = path.points[pointindexwrapped];\n      if (pointindex > 0) {\n        str += 'L' + (point.x + xoffset) + ' ' + (point.y + yoffset);\n      } else {\n        str += 'M' + (point.x + xoffset) + ' ' + (point.y + yoffset);\n      }\n    }\n    str += '\"/>\\n';\n  });\n  str += '</g>\\n';\n  return str\n}\n\nvar Blob$4 = makeBlob();\n\nfunction CSGToAMF (CSG, m) {\n  var result = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n<amf' + (m && m.unit ? ' unit=\"+m.unit\"' : '') + '>\\n';\n  for (var k in m) {\n    result += '<metadata type=\"' + k + '\">' + m[k] + '</metadata>\\n';\n  }\n  result += '<object id=\"0\">\\n<mesh>\\n<vertices>\\n';\n\n  CSG.polygons.map(function (p) { // first we dump all vertices of all polygons\n    for (var i = 0; i < p.vertices.length; i++) {\n      result += CSGVertextoAMFString(p.vertices[i]);\n    }\n  });\n  result += '</vertices>\\n';\n\n  var n = 0;\n  CSG.polygons.map(function (p) { // then we dump all polygons\n    result += '<volume>\\n';\n    if (p.vertices.length < 3)\n      { return }\n    var color = null;\n    if (p.shared && p.shared.color) {\n      color = p.shared.color;\n    } else if (p.color) {\n      color = p.color;\n    }\n    if (color != null) {\n      if (color.length < 4) { color.push(1.); }\n      result += '<color><r>' + color[0] + '</r><g>' + color[1] + '</g><b>' + color[2] + '</b><a>' + color[3] + '</a></color>';\n    }\n\n    for (var i = 0; i < p.vertices.length - 2; i++) { // making sure they are all triangles (triangular polygons)\n      result += '<triangle>';\n      result += '<v1>' + (n) + '</v1>';\n      result += '<v2>' + (n + i + 1) + '</v2>';\n      result += '<v3>' + (n + i + 2) + '</v3>';\n      result += '</triangle>\\n';\n    }\n    n += p.vertices.length;\n    result += '</volume>\\n';\n  });\n  result += '</mesh>\\n</object>\\n';\n  result += '</amf>\\n';\n\n  return new Blob$4([result], {\n    type: 'application/amf+xml'\n  })\n}\n\nfunction CSGVectortoAMFString(v){\n  return '<x>' + v._x + '</x><y>' + v._y + '</y><z>' + v._z + '</z>'\n}\n\nfunction CSGVertextoAMFString(vertex){\n  return '<vertex><coordinates>' + CSGVectortoAMFString(vertex.pos) + '</coordinates></vertex>\\n'\n}\n/*\nCSG.Vector3D.prototype.toAMFString = function () {\n  return '<x>' + this._x + '</x><y>' + this._y + '</y><z>' + this._z + '</z>'\n}\n\nCSG.Vertex.prototype.toAMFString = function () {\n  return '<vertex><coordinates>' + this.pos.toAMFString() + '</coordinates></vertex>\\n'\n}*/\n\nvar Blob$5 = makeBlob();\n\nfunction CSGToJson () {\n  var str = '{ \"type\": \"csg\",\"polygons\": [';\n  var comma = '';\n  CSG.polygons.map(\n    function (polygon) {\n      str += comma;\n      str += JSON.stringify(polygon);\n      comma = ',';\n    }\n  );\n  str += '],';\n  str += '\"isCanonicalized\": ' + JSON.stringify(this.isCanonicalized) + ',';\n  str += '\"isRetesselated\": ' + JSON.stringify(this.isRetesselated);\n  str += '}';\n  return new Blob$5([str], {\n    type: 'application/json'\n  })\n}\n\nvar Blob$6 = makeBlob();\n\nfunction CSGToStla (CSG) {\n  var result = 'solid csg.js\\n';\n  CSG.polygons.map(function (p) {\n    result += CSGPolygontoStlString(p);\n  });\n  result += 'endsolid csg.js\\n';\n  return new Blob$6([result], {\n    type: 'application/sla'\n  })\n}\n\nfunction CSGVector3DtoStlString (v) {\n  return v._x + ' ' + v._y + ' ' + v._z\n}\n\nfunction CSGVertextoStlString (vertex) {\n  return 'vertex ' + CSGVector3DtoStlString(vertex.pos) + '\\n'\n}\n\nfunction CSGPolygontoStlString (polygon) {\n  var result = '';\n  if (polygon.vertices.length >= 3) // should be!\n  {\n    // STL requires triangular polygons. If our polygon has more vertices, create\n    // multiple triangles:\n    var firstVertexStl = CSGVertextoStlString(polygon.vertices[0]);\n    for (var i = 0; i < polygon.vertices.length - 2; i++) {\n      result += 'facet normal ' + CSGVector3DtoStlString(polygon.plane.normal) + '\\nouter loop\\n';\n      result += firstVertexStl;\n      result += CSGVertextoStlString(polygon.vertices[i + 1]);\n      result += CSGVertextoStlString(polygon.vertices[i + 2]);\n      result += 'endloop\\nendfacet\\n';\n    }\n  }\n  return result\n}\n\nvar Blob$7 = makeBlob();\n\n// see http://en.wikipedia.org/wiki/STL_%28file_format%29#Binary_STL\nfunction CSGToStlb (CSG) {\n  // first check if the host is little-endian:\n  var buffer = new ArrayBuffer(4);\n  var int32buffer = new Int32Array(buffer, 0, 1);\n  var int8buffer = new Int8Array(buffer, 0, 4);\n  int32buffer[0] = 0x11223344;\n  if (int8buffer[0] != 0x44) {\n    throw new Error('Binary STL output is currently only supported on little-endian (Intel) processors')\n  }\n\n  var numtriangles = 0;\n  CSG.polygons.map(function (p) {\n    var numvertices = p.vertices.length;\n    var thisnumtriangles = (numvertices >= 3) ? numvertices - 2 : 0;\n    numtriangles += thisnumtriangles;\n  });\n  var headerarray = new Uint8Array(80);\n  for (var i = 0; i < 80; i++) {\n    headerarray[i] = 65;\n  }\n  var ar1 = new Uint32Array(1);\n  ar1[0] = numtriangles;\n  // write the triangles to allTrianglesBuffer:\n  var allTrianglesBuffer = new ArrayBuffer(50 * numtriangles);\n  var allTrianglesBufferAsInt8 = new Int8Array(allTrianglesBuffer);\n  // a tricky problem is that a Float32Array must be aligned at 4-byte boundaries (at least in certain browsers)\n  // while each triangle takes 50 bytes. Therefore we write each triangle to a temporary buffer, and copy that\n  // into allTrianglesBuffer:\n  var triangleBuffer = new ArrayBuffer(50);\n  var triangleBufferAsInt8 = new Int8Array(triangleBuffer);\n  // each triangle consists of 12 floats:\n  var triangleFloat32array = new Float32Array(triangleBuffer, 0, 12);\n  // and one uint16:\n  var triangleUint16array = new Uint16Array(triangleBuffer, 48, 1);\n  var byteoffset = 0;\n  CSG.polygons.map(function (p) {\n    var numvertices = p.vertices.length;\n    for (var i = 0; i < numvertices - 2; i++) {\n      var normal = p.plane.normal;\n      triangleFloat32array[0] = normal._x;\n      triangleFloat32array[1] = normal._y;\n      triangleFloat32array[2] = normal._z;\n      var arindex = 3;\n      for (var v = 0; v < 3; v++) {\n        var vv = v + ((v > 0) ? i : 0);\n        var vertexpos = p.vertices[vv].pos;\n        triangleFloat32array[arindex++] = vertexpos._x;\n        triangleFloat32array[arindex++] = vertexpos._y;\n        triangleFloat32array[arindex++] = vertexpos._z;\n      }\n      triangleUint16array[0] = 0;\n      // copy the triangle into allTrianglesBuffer:\n      allTrianglesBufferAsInt8.set(triangleBufferAsInt8, byteoffset);\n      byteoffset += 50;\n    }\n  });\n  return new Blob$7([headerarray.buffer, ar1.buffer, allTrianglesBuffer], {\n    type: 'application/sla'\n  })\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\r\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\r\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\r\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;//\\u10000-\\uEFFFF\r\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\r\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\r\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\r\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\r\n\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\r\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\r\nvar S_TAG = 0;//tag name offerring\r\nvar S_ATTR = 1;//attr name offerring \r\nvar S_ATTR_SPACE=2;//attr name end and space offer\r\nvar S_EQ = 3;//=space?\r\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\r\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\r\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\r\nvar S_TAG_CLOSE = 7;//closed el<el />\r\n\r\nfunction XMLReader(){\r\n\t\r\n}\r\n\r\nXMLReader.prototype = {\r\n\tparse:function(source,defaultNSMap,entityMap){\r\n\t\tvar domBuilder = this.domBuilder;\r\n\t\tdomBuilder.startDocument();\r\n\t\t_copy(defaultNSMap ,defaultNSMap = {});\r\n\t\tparse(source,defaultNSMap,entityMap,\r\n\t\t\t\tdomBuilder,this.errorHandler);\r\n\t\tdomBuilder.endDocument();\r\n\t}\r\n};\r\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\r\n\tfunction fixedFromCharCode(code) {\r\n\t\t// String.prototype.fromCharCode does not supports\r\n\t\t// > 2 bytes unicode chars directly\r\n\t\tif (code > 0xffff) {\r\n\t\t\tcode -= 0x10000;\r\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\r\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\r\n\r\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\r\n\t\t} else {\r\n\t\t\treturn String.fromCharCode(code);\r\n\t\t}\r\n\t}\r\n\tfunction entityReplacer(a){\r\n\t\tvar k = a.slice(1,-1);\r\n\t\tif(k in entityMap){\r\n\t\t\treturn entityMap[k]; \r\n\t\t}else if(k.charAt(0) === '#'){\r\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\r\n\t\t}else{\r\n\t\t\terrorHandler.error('entity not found:'+a);\r\n\t\t\treturn a;\r\n\t\t}\r\n\t}\r\n\tfunction appendText(end){//has some bugs\r\n\t\tif(end>start){\r\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\tlocator&&position(start);\r\n\t\t\tdomBuilder.characters(xt,0,end-start);\r\n\t\t\tstart = end;\r\n\t\t}\r\n\t}\r\n\tfunction position(p,m){\r\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\r\n\t\t\tlineStart = m.index;\r\n\t\t\tlineEnd = lineStart + m[0].length;\r\n\t\t\tlocator.lineNumber++;\r\n\t\t\t//console.log('line++:',locator,startPos,endPos)\r\n\t\t}\r\n\t\tlocator.columnNumber = p-lineStart+1;\r\n\t}\r\n\tvar lineStart = 0;\r\n\tvar lineEnd = 0;\r\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g;\r\n\tvar locator = domBuilder.locator;\r\n\t\r\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}];\r\n\tvar closeMap = {};\r\n\tvar start = 0;\r\n\twhile(true){\r\n\t\ttry{\r\n\t\t\tvar tagStart = source.indexOf('<',start);\r\n\t\t\tif(tagStart<0){\r\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\r\n\t\t\t\t\tvar doc = domBuilder.doc;\r\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\r\n\t    \t\t\tdoc.appendChild(text);\r\n\t    \t\t\tdomBuilder.currentElement = text;\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(tagStart>start){\r\n\t\t\t\tappendText(tagStart);\r\n\t\t\t}\r\n\t\t\tswitch(source.charAt(tagStart+1)){\r\n\t\t\tcase '/':\r\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\r\n\t\t\t\tvar tagName = source.substring(tagStart+2,end);\r\n\t\t\t\tvar config = parseStack.pop();\r\n\t\t\t\tif(end<0){\r\n\t\t\t\t\t\r\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\r\n\t        \t\t//console.error('#@@@@@@'+tagName)\r\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\r\n\t        \t\tend = tagStart+1+tagName.length;\r\n\t        \t}else if(tagName.match(/\\s</)){\r\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\r\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\r\n\t        \t\tend = tagStart+1+tagName.length;\r\n\t\t\t\t}\r\n\t\t\t\t//console.error(parseStack.length,parseStack)\r\n\t\t\t\t//console.error(config);\r\n\t\t\t\tvar localNSMap = config.localNSMap;\r\n\t\t\t\tvar endMatch = config.tagName == tagName;\r\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase();\r\n\t\t        if(endIgnoreCaseMach){\r\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\r\n\t\t\t\t\tif(localNSMap){\r\n\t\t\t\t\t\tfor(var prefix in localNSMap){\r\n\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix) ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!endMatch){\r\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName );\r\n\t\t\t\t\t}\r\n\t\t        }else{\r\n\t\t        \tparseStack.push(config);\r\n\t\t        }\r\n\t\t\t\t\r\n\t\t\t\tend++;\r\n\t\t\t\tbreak;\r\n\t\t\t\t// end elment\r\n\t\t\tcase '?':// <?...?>\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\r\n\t\t\t\tbreak;\r\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tvar el = new ElementAttributes();\r\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\r\n\t\t\t\t//elStartEnd\r\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\r\n\t\t\t\tvar len = el.length;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\r\n\t\t\t\t\tel.closed = true;\r\n\t\t\t\t\tif(!entityMap.nbsp){\r\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(locator && len){\r\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\r\n\t\t\t\t\t//try{//attribute position fixed\r\n\t\t\t\t\tfor(var i = 0;i<len;i++){\r\n\t\t\t\t\t\tvar a = el[i];\r\n\t\t\t\t\t\tposition(a.offset);\r\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//}catch(e){console.error('@@@@@'+e)}\r\n\t\t\t\t\tdomBuilder.locator = locator2;\r\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\r\n\t\t\t\t\t\tparseStack.push(el);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdomBuilder.locator = locator;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\r\n\t\t\t\t\t\tparseStack.push(el);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(el.uri === 'http://www.w3.org/1999/xhtml' && !el.closed){\r\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tend++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}catch(e){\r\n\t\t\terrorHandler.error('element parse error: '+e);\r\n\t\t\t//errorHandler.error('element parse error: '+e);\r\n\t\t\tend = -1;\r\n\t\t\t//throw e;\r\n\t\t}\r\n\t\tif(end>start){\r\n\t\t\tstart = end;\r\n\t\t}else{\r\n\t\t\t//TODO: sax\r\n\t\t\tappendText(Math.max(tagStart,start)+1);\r\n\t\t}\r\n\t}\r\n}\r\nfunction copyLocator(f,t){\r\n\tt.lineNumber = f.lineNumber;\r\n\tt.columnNumber = f.columnNumber;\r\n\treturn t;\r\n}\r\n\r\n/**\r\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\r\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\r\n */\r\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\r\n\tvar attrName;\r\n\tvar value;\r\n\tvar p = ++start;\r\n\tvar s = S_TAG;//status\r\n\twhile(true){\r\n\t\tvar c = source.charAt(p);\r\n\t\tswitch(c){\r\n\t\tcase '=':\r\n\t\t\tif(s === S_ATTR){//attrName\r\n\t\t\t\tattrName = source.slice(start,p);\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else if(s === S_ATTR_SPACE){\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\r\n\t\t\t\tthrow new Error('attribute equal must after attrName');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '\\'':\r\n\t\tcase '\"':\r\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\r\n\t\t\t\t){//equal\r\n\t\t\t\tif(s === S_ATTR){\r\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"');\r\n\t\t\t\t\tattrName = source.slice(start,p);\r\n\t\t\t\t}\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\tp = source.indexOf(c,start);\r\n\t\t\t\tif(p>0){\r\n\t\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\tel.add(attrName,value,start-1);\r\n\t\t\t\t\ts = S_ATTR_END;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//fatalError: no end quot match\r\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\r\n\t\t\t\t}\r\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\r\n\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t//console.log(attrName,value,start,p)\r\n\t\t\t\tel.add(attrName,value,start);\r\n\t\t\t\t//console.dir(el)\r\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\ts = S_ATTR_END;\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: no equal before\r\n\t\t\t\tthrow new Error('attribute value must after \"=\"');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '/':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_ATTR_END:\r\n\t\t\tcase S_TAG_SPACE:\r\n\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\ts =S_TAG_CLOSE;\r\n\t\t\t\tel.closed = true;\r\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\r\n\t\t\tcase S_ATTR:\r\n\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\tbreak;\r\n\t\t\t//case S_EQ:\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\")\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase ''://end document\r\n\t\t\t//throw new Error('unexpected end of input')\r\n\t\t\terrorHandler.error('unexpected end of input');\r\n\t\t\tif(s == S_TAG){\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\t}\r\n\t\t\treturn p;\r\n\t\tcase '>':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_ATTR_END:\r\n\t\t\tcase S_TAG_SPACE:\r\n\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\tbreak;//normal\r\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\r\n\t\t\tcase S_ATTR:\r\n\t\t\t\tvalue = source.slice(start,p);\r\n\t\t\t\tif(value.slice(-1) === '/'){\r\n\t\t\t\t\tel.closed  = true;\r\n\t\t\t\t\tvalue = value.slice(0,-1);\r\n\t\t\t\t}\r\n\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\tif(s === S_ATTR_SPACE){\r\n\t\t\t\t\tvalue = attrName;\r\n\t\t\t\t}\r\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value.replace(/&#?\\w+;/g,entityReplacer),start);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !value.match(/^(?:disabled|checked|selected)$/i)){\r\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.add(value,value,start);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase S_EQ:\r\n\t\t\t\tthrow new Error('attribute value missed!!');\r\n\t\t\t}\r\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\r\n\t\t\treturn p;\r\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\r\n\t\tcase '\\u0080':\r\n\t\t\tc = ' ';\r\n\t\tdefault:\r\n\t\t\tif(c<= ' '){//space\r\n\t\t\t\tswitch(s){\r\n\t\t\t\tcase S_TAG:\r\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\r\n\t\t\t\t\ts = S_TAG_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR:\r\n\t\t\t\t\tattrName = source.slice(start,p);\r\n\t\t\t\t\ts = S_ATTR_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\r\n\t\t\t\t\tvar value = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value,start);\r\n\t\t\t\tcase S_ATTR_END:\r\n\t\t\t\t\ts = S_TAG_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//case S_TAG_SPACE:\r\n\t\t\t\t//case S_EQ:\r\n\t\t\t\t//case S_ATTR_SPACE:\r\n\t\t\t\t//\tvoid();break;\r\n\t\t\t\t//case S_TAG_CLOSE:\r\n\t\t\t\t\t//ignore warning\r\n\t\t\t\t}\r\n\t\t\t}else{//not space\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\r\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\r\n\t\t\t\tswitch(s){\r\n\t\t\t\t//case S_TAG:void();break;\r\n\t\t\t\t//case S_ATTR:void();break;\r\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\r\n\t\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\t\tvar tagName =  el.tagName;\r\n\t\t\t\t\tif(currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !attrName.match(/^(?:disabled|checked|selected)$/i)){\r\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.add(attrName,attrName,start);\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR_END:\r\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!');\r\n\t\t\t\tcase S_TAG_SPACE:\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_EQ:\r\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}//end outer switch\r\n\t\t//console.log('p++',p)\r\n\t\tp++;\r\n\t}\r\n}\r\n/**\r\n * @return true if has new namespace define\r\n */\r\nfunction appendElement(el,domBuilder,currentNSMap){\r\n\tvar tagName = el.tagName;\r\n\tvar localNSMap = null;\r\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\tvar a = el[i];\r\n\t\tvar qName = a.qName;\r\n\t\tvar value = a.value;\r\n\t\tvar nsp = qName.indexOf(':');\r\n\t\tif(nsp>0){\r\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\r\n\t\t\tvar localName = qName.slice(nsp+1);\r\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName;\r\n\t\t}else{\r\n\t\t\tlocalName = qName;\r\n\t\t\tprefix = null;\r\n\t\t\tnsPrefix = qName === 'xmlns' && '';\r\n\t\t}\r\n\t\t//can not set prefix,because prefix !== ''\r\n\t\ta.localName = localName ;\r\n\t\t//prefix == null for no ns prefix attribute \r\n\t\tif(nsPrefix !== false){//hack!!\r\n\t\t\tif(localNSMap == null){\r\n\t\t\t\tlocalNSMap = {};\r\n\t\t\t\t//console.log(currentNSMap,0)\r\n\t\t\t\t_copy(currentNSMap,currentNSMap={});\r\n\t\t\t\t//console.log(currentNSMap,1)\r\n\t\t\t}\r\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\r\n\t\t\ta.uri = 'http://www.w3.org/2000/xmlns/';\r\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value); \r\n\t\t}\r\n\t}\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\ta = el[i];\r\n\t\tvar prefix = a.prefix;\r\n\t\tif(prefix){//no prefix attribute has no namespace\r\n\t\t\tif(prefix === 'xml'){\r\n\t\t\t\ta.uri = 'http://www.w3.org/XML/1998/namespace';\r\n\t\t\t}if(prefix !== 'xmlns'){\r\n\t\t\t\ta.uri = currentNSMap[prefix || ''];\r\n\t\t\t\t\r\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar nsp = tagName.indexOf(':');\r\n\tif(nsp>0){\r\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\r\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\r\n\t}else{\r\n\t\tprefix = null;//important!!\r\n\t\tlocalName = el.localName = tagName;\r\n\t}\r\n\t//no prefix element has default namespace\r\n\tvar ns = el.uri = currentNSMap[prefix || ''];\r\n\tdomBuilder.startElement(ns,localName,tagName,el);\r\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\r\n\t//localNSMap = null\r\n\tif(el.closed){\r\n\t\tdomBuilder.endElement(ns,localName,tagName);\r\n\t\tif(localNSMap){\r\n\t\t\tfor(prefix in localNSMap){\r\n\t\t\t\tdomBuilder.endPrefixMapping(prefix); \r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tel.currentNSMap = currentNSMap;\r\n\t\tel.localNSMap = localNSMap;\r\n\t\t//parseStack.push(el);\r\n\t\treturn true;\r\n\t}\r\n}\r\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\r\n\tif(/^(?:script|textarea)$/i.test(tagName)){\r\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\r\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\r\n\t\tif(/[&<]/.test(text)){\r\n\t\t\tif(/^script$/i.test(tagName)){\r\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\r\n\t\t\t\t\t//lexHandler.startCDATA();\r\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\t\t//lexHandler.endCDATA();\r\n\t\t\t\t\treturn elEndStart;\r\n\t\t\t\t//}\r\n\t\t\t}//}else{//text area\r\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\treturn elEndStart;\r\n\t\t\t//}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\treturn elStartEnd+1;\r\n}\r\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\r\n\t//if(tagName in closeMap){\r\n\tvar pos = closeMap[tagName];\r\n\tif(pos == null){\r\n\t\t//console.log(tagName)\r\n\t\tpos =  source.lastIndexOf('</'+tagName+'>');\r\n\t\tif(pos<elStartEnd){//\r\n\t\t\tpos = source.lastIndexOf('</'+tagName);\r\n\t\t}\r\n\t\tcloseMap[tagName] =pos;\r\n\t}\r\n\treturn pos<elStartEnd;\r\n\t//} \r\n}\r\nfunction _copy(source,target){\r\n\tfor(var n in source){target[n] = source[n];}\r\n}\r\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\r\n\tvar next= source.charAt(start+2);\r\n\tswitch(next){\r\n\tcase '-':\r\n\t\tif(source.charAt(start + 3) === '-'){\r\n\t\t\tvar end = source.indexOf('-->',start+4);\r\n\t\t\t//append comment source.substring(4,end)//<!--\r\n\t\t\tif(end>start){\r\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\r\n\t\t\t\treturn end+3;\r\n\t\t\t}else{\r\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\tdefault:\r\n\t\tif(source.substr(start+3,6) == 'CDATA['){\r\n\t\t\tvar end = source.indexOf(']]>',start+9);\r\n\t\t\tdomBuilder.startCDATA();\r\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\r\n\t\t\tdomBuilder.endCDATA(); \r\n\t\t\treturn end+3;\r\n\t\t}\r\n\t\t//<!DOCTYPE\r\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) \r\n\t\tvar matchs = split(source,start);\r\n\t\tvar len = matchs.length;\r\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\r\n\t\t\tvar name = matchs[1][0];\r\n\t\t\tvar pubid = len>3 && /^public$/i.test(matchs[2][0]) && matchs[3][0];\r\n\t\t\tvar sysid = len>4 && matchs[4][0];\r\n\t\t\tvar lastMatch = matchs[len-1];\r\n\t\t\tdomBuilder.startDTD(name,pubid && pubid.replace(/^(['\"])(.*?)\\1$/,'$2'),\r\n\t\t\t\t\tsysid && sysid.replace(/^(['\"])(.*?)\\1$/,'$2'));\r\n\t\t\tdomBuilder.endDTD();\r\n\t\t\t\r\n\t\t\treturn lastMatch.index+lastMatch[0].length\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n\r\n\r\nfunction parseInstruction(source,start,domBuilder){\r\n\tvar end = source.indexOf('?>',start);\r\n\tif(end){\r\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\r\n\t\tif(match){\r\n\t\t\tvar len = match[0].length;\r\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\r\n\t\t\treturn end+2;\r\n\t\t}else{//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n/**\r\n * @param source\r\n */\r\nfunction ElementAttributes(source){\r\n\t\r\n}\r\nElementAttributes.prototype = {\r\n\tsetTagName:function(tagName){\r\n\t\tif(!tagNamePattern.test(tagName)){\r\n\t\t\tthrow new Error('invalid tagName:'+tagName)\r\n\t\t}\r\n\t\tthis.tagName = tagName;\r\n\t},\r\n\tadd:function(qName,value,offset){\r\n\t\tif(!tagNamePattern.test(qName)){\r\n\t\t\tthrow new Error('invalid attribute:'+qName)\r\n\t\t}\r\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset};\r\n\t},\r\n\tlength:0,\r\n\tgetLocalName:function(i){return this[i].localName},\r\n\tgetLocator:function(i){return this[i].locator},\r\n\tgetQName:function(i){return this[i].qName},\r\n\tgetURI:function(i){return this[i].uri},\r\n\tgetValue:function(i){return this[i].value}\r\n//\t,getIndex:function(uri, localName)){\r\n//\t\tif(localName){\r\n//\t\t\t\r\n//\t\t}else{\r\n//\t\t\tvar qName = uri\r\n//\t\t}\r\n//\t},\r\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\r\n//\tgetType:function(uri,localName){}\r\n//\tgetType:function(i){},\r\n};\r\n\r\n\r\n\r\n\r\nfunction _set_proto_(thiz,parent){\r\n\tthiz.__proto__ = parent;\r\n\treturn thiz;\r\n}\r\nif(!(_set_proto_({},_set_proto_.prototype) instanceof _set_proto_)){\r\n\t_set_proto_ = function(thiz,parent){\r\n\t\tfunction p(){}\r\n\t\tp.prototype = parent;\r\n\t\tp = new p();\r\n\t\tfor(parent in thiz){\r\n\t\t\tp[parent] = thiz[parent];\r\n\t\t}\r\n\t\treturn p;\r\n\t};\r\n}\r\n\r\nfunction split(source,start){\r\n\tvar match;\r\n\tvar buf = [];\r\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\r\n\treg.lastIndex = start;\r\n\treg.exec(source);//skip <\r\n\twhile(match = reg.exec(source)){\r\n\t\tbuf.push(match);\r\n\t\tif(match[1]){ return buf; }\r\n\t}\r\n}\r\n\r\nvar XMLReader_1 = XMLReader;\n\nvar sax = {\n\tXMLReader: XMLReader_1\n};\n\n/*\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n */\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tdest[p] = src[p];\n\t}\n}\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(Object.create){\n\t\tvar ppt = Object.create(Super.prototype);\n\t\tpt.__proto__ = ppt;\n\t}\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){}\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknow Class:\"+Class);\n\t\t}\n\t\tpt.constructor = Class;\n\t}\n}\nvar htmlns = 'http://www.w3.org/1999/xhtml';\n// Node Types\nvar NodeType = {};\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {};\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) { Error.captureStackTrace(this, DOMException); }\n\t}\n\terror.code = code;\n\tif(message) { this.message = this.message + \": \" + message; }\n\treturn error;\n}\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException);\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n}\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0, \n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long \n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index. \n\t */\n\titem: function(index) {\n\t\treturn this[index] || null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tvar this$1 = this;\n\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this$1[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t}\n};\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh;\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif(list._inc != inc){\n\t\tvar ls = list._refresh(list._node);\n\t\t//console.log(ls.length)\n\t\t__set__(list,'length',ls.length);\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i];\n};\n\n_extends(LiveNodeList,NodeList);\n/**\n * \n * Objects implementing the NamedNodeMap interface are used to represent collections of nodes that can be accessed by name. Note that NamedNodeMap does not inherit from NodeList; NamedNodeMaps are not maintained in any particular order. Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index, but this is simply to allow convenient enumeration of the contents of a NamedNodeMap, and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities \n */\nfunction NamedNodeMap() {\n}\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1;\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i];\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n\t\tvar this$1 = this;\n\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this$1[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t\t\n\t\t\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\t\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar this$1 = this;\n\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this$1[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n/**\n * @see http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490\n */\nfunction DOMImplementation(/* Object */ features) {\n\tvar this$1 = this;\n\n\tthis._features = {};\n\tif (features) {\n\t\tfor (var feature in features) {\n\t\t\t this$1._features = features[feature];\n\t\t}\n\t}\n}\n\nDOMImplementation.prototype = {\n\thasFeature: function(/* string */ feature, /* string */ version) {\n\t\tvar versions = this._features[feature.toLowerCase()];\n\t\tif (versions && (!version || version in versions)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocument:function(namespaceURI,  qualifiedName, doctype){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR,WRONG_DOCUMENT_ERR\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype;\n\t\tif(doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif(qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI,qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocumentType:function(qualifiedName, publicId, systemId){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId;\n\t\tnode.systemId = systemId;\n\t\t// Introduced in DOM Level 2:\n\t\t//readonly attribute DOMString        internalSubset;\n\t\t\n\t\t//TODO:..\n\t\t//  readonly attribute NamedNodeMap     entities;\n\t\t//  readonly attribute NamedNodeMap     notations;\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n}\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises \n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises \n\t\tthis.insertBefore(newChild,oldChild);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar this$1 = this;\n\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis$1.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n    \t\t\t\tif(map[n] == namespaceURI){\n    \t\t\t\t\treturn n;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(prefix in map){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n}\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value;\n\t}\n}\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:''];\n\t}\n}\nfunction _onUpdateChild(doc,el,newChild){\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif(newChild){\n\t\t\tcs[cs.length++] = newChild;\n\t\t}else{\n\t\t\t//console.log(1)\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile(child){\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild =child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t}\n\t}\n}\n\n/**\n * attributes;\n * children;\n * \n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\nfunction _removeChild(parentNode,child){\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif(previous){\n\t\tprevious.nextSibling = next;\n\t}else{\n\t\tparentNode.firstChild = next;\n\t}\n\tif(next){\n\t\tnext.previousSibling = previous;\n\t}else{\n\t\tparentNode.lastChild = previous;\n\t}\n\t_onUpdateChild(parentNode.ownerDocument,parentNode);\n\treturn child;\n}\n/**\n * preformance key(refChild == null)\n */\nfunction _insertBefore(parentNode,newChild,nextChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tcp.removeChild(newChild);//remove and update\n\t}\n\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = newChild.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn newChild;\n\t\t}\n\t\tvar newLast = newChild.lastChild;\n\t}else{\n\t\tnewFirst = newLast = newChild;\n\t}\n\tvar pre = nextChild ? nextChild.previousSibling : parentNode.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = nextChild;\n\t\n\t\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparentNode.firstChild = newFirst;\n\t}\n\tif(nextChild == null){\n\t\tparentNode.lastChild = newLast;\n\t}else{\n\t\tnextChild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parentNode;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);\n\t//console.log(parentNode.lastChild.nextSibling == null)\n\tif (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnewChild.firstChild = newChild.lastChild = null;\n\t}\n\treturn newChild;\n}\nfunction _appendSingleChild(parentNode,newChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tvar pre = parentNode.lastChild;\n\t\tcp.removeChild(newChild);//remove and update\n\t\tvar pre = parentNode.lastChild;\n\t}\n\tvar pre = parentNode.lastChild;\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = pre;\n\tnewChild.nextSibling = null;\n\tif(pre){\n\t\tpre.nextSibling = newChild;\n\t}else{\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);\n\treturn newChild;\n\t//console.log(\"__aa\",parentNode.lastChild.nextSibling == null)\n}\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\t\n\tinsertBefore :  function(newChild, refChild){\n\t\tvar this$1 = this;\n//raises \n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis$1.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\tif(this.documentElement == null && newChild.nodeType == ELEMENT_NODE){\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t\t\n\t\treturn _insertBefore(this,newChild,refChild),(newChild.ownerDocument = this),newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn rtv;\n\t},\n\t\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data);\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data);\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data);\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.target = target;\n\t\tnode.nodeValue= node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n}\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr);\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\t\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\t\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr);\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\t\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t\t\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n}\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n}\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\t\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n};\n_extends(CharacterData,Node);\nfunction Text() {\n}\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n};\n_extends(Text,CharacterData);\nfunction Comment() {\n}\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n};\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n}\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n};\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n}\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n}\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n}\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n}\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n}\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer$1(){}\nXMLSerializer$1.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n};\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9?this.documentElement:this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\t\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null} ];\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\nfunction needNamespaceDefine(node,isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix||'';\n\tvar uri = node.namespaceURI;\n\tif (!prefix && !uri){\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === \"http://www.w3.org/XML/1998/namespace\" \n\t\t|| uri == 'http://www.w3.org/2000/xmlns/'){\n\t\treturn false;\n\t}\n\t\n\tvar i = visibleNamespaces.length; \n\t//console.log('@@@@',node.tagName,prefix,uri,visibleNamespaces)\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\t//console.log(node.nodeType,node.tagName,ns.prefix,prefix)\n\t\tif (ns.prefix == prefix){\n\t\t\treturn ns.namespace != uri;\n\t\t}\n\t}\n\t//console.log(isHTML,uri,prefix=='')\n\t//if(isHTML && prefix ==null && uri == 'http://www.w3.org/1999/xhtml'){\n\t//\treturn false;\n\t//}\n\t//node.flag = '11111'\n\t//console.error(3,true,node.flag,node.prefix,node.namespaceURI)\n\treturn true;\n}\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tif (!visibleNamespaces) { visibleNamespaces = []; }\n\t\tvar startVisibleNamespaces = visibleNamespaces.length;\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\t\t\n\t\tisHTML =  (htmlns === node.namespaceURI) ||isHTML; \n\t\tbuf.push('<',nodeName);\n\t\t\n\t\t\n\t\t\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\t\t// add namespace for current node\t\t\n\t\tif (needNamespaceDefine(node,isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\t\t\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',nodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn buf.push(' ',node.name,'=\"',node.value.replace(/[<&\"]/g,_xmlEncoder),'\"');\n\tcase TEXT_NODE:\n\t\treturn buf.push(node.data.replace(/[<&]/g,_xmlEncoder));\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC \"',pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push( '\" \"',sysid);\n\t\t\t}\n\t\t\tbuf.push('\">');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM \"',sysid,'\">');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor(var n in node){\n\t\tvar v = node[n];\n\t\tif(typeof v != 'object' ){\n\t\t\tif(v != node2[n]){\n\t\t\t\tnode2[n] = v;\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length;\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value;\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\t\t\tset:function(data){\n\t\t\t\tvar this$1 = this;\n\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis$1.removeChild(this$1.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//TODO:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value;\n\t\t};\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\tvar DOMImplementation_1 = DOMImplementation;\n\tvar XMLSerializer_1 = XMLSerializer$1;\n//}\n\nvar dom = {\n\tDOMImplementation: DOMImplementation_1,\n\tXMLSerializer: XMLSerializer_1\n};\n\nvar domParser = createCommonjsModule(function (module, exports) {\nfunction DOMParser(options){\r\n\tthis.options = options ||{locator:{}};\r\n\t\r\n}\r\nDOMParser.prototype.parseFromString = function(source,mimeType){\r\n\tvar options = this.options;\r\n\tvar sax$$1 =  new XMLReader();\r\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\r\n\tvar errorHandler = options.errorHandler;\r\n\tvar locator = options.locator;\r\n\tvar defaultNSMap = options.xmlns||{};\r\n\tvar entityMap = {'lt':'<','gt':'>','amp':'&','quot':'\"','apos':\"'\"};\r\n\tif(locator){\r\n\t\tdomBuilder.setDocumentLocator(locator);\r\n\t}\r\n\t\r\n\tsax$$1.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\r\n\tsax$$1.domBuilder = options.domBuilder || domBuilder;\r\n\tif(/\\/x?html?$/.test(mimeType)){\r\n\t\tentityMap.nbsp = '\\xa0';\r\n\t\tentityMap.copy = '\\xa9';\r\n\t\tdefaultNSMap['']= 'http://www.w3.org/1999/xhtml';\r\n\t}\r\n\tdefaultNSMap.xml = defaultNSMap.xml || 'http://www.w3.org/XML/1998/namespace';\r\n\tif(source){\r\n\t\tsax$$1.parse(source,defaultNSMap,entityMap);\r\n\t}else{\r\n\t\tsax$$1.errorHandler.error(\"invalid doc source\");\r\n\t}\r\n\treturn domBuilder.doc;\r\n};\r\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\r\n\tif(!errorImpl){\r\n\t\tif(domBuilder instanceof DOMHandler){\r\n\t\t\treturn domBuilder;\r\n\t\t}\r\n\t\terrorImpl = domBuilder ;\r\n\t}\r\n\tvar errorHandler = {};\r\n\tvar isCallback = errorImpl instanceof Function;\r\n\tlocator = locator||{};\r\n\tfunction build(key){\r\n\t\tvar fn = errorImpl[key];\r\n\t\tif(!fn && isCallback){\r\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg);}:errorImpl;\r\n\t\t}\r\n\t\terrorHandler[key] = fn && function(msg){\r\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\r\n\t\t}||function(){};\r\n\t}\r\n\tbuild('warning');\r\n\tbuild('error');\r\n\tbuild('fatalError');\r\n\treturn errorHandler;\r\n}\r\n\r\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\r\n/**\r\n * +ContentHandler+ErrorHandler\r\n * +LexicalHandler+EntityResolver2\r\n * -DeclHandler-DTDHandler \r\n * \r\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\r\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\r\n */\r\nfunction DOMHandler() {\r\n    this.cdata = false;\r\n}\r\nfunction position(locator,node){\r\n\tnode.lineNumber = locator.lineNumber;\r\n\tnode.columnNumber = locator.columnNumber;\r\n}\r\n/**\r\n * @see org.xml.sax.ContentHandler#startDocument\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\r\n */ \r\nDOMHandler.prototype = {\r\n\tstartDocument : function() {\r\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\r\n    \tif (this.locator) {\r\n        \tthis.doc.documentURI = this.locator.systemId;\r\n    \t}\r\n\t},\r\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\n\t\tvar this$1 = this;\n\r\n\t\tvar doc = this.doc;\r\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\r\n\t    var len = attrs.length;\r\n\t    appendElement(this, el);\r\n\t    this.currentElement = el;\r\n\t    \r\n\t\tthis.locator && position(this.locator,el);\r\n\t    for (var i = 0 ; i < len; i++) {\r\n\t        var namespaceURI = attrs.getURI(i);\r\n\t        var value = attrs.getValue(i);\r\n\t        var qName = attrs.getQName(i);\r\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\r\n\t\t\tthis$1.locator &&position(attrs.getLocator(i),attr);\r\n\t\t\tattr.value = attr.nodeValue = value;\r\n\t\t\tel.setAttributeNode(attr);\r\n\t    }\r\n\t},\r\n\tendElement:function(namespaceURI, localName, qName) {\r\n\t\tvar current = this.currentElement;\r\n\t\tvar tagName = current.tagName;\r\n\t\tthis.currentElement = current.parentNode;\r\n\t},\r\n\tstartPrefixMapping:function(prefix, uri) {\r\n\t},\r\n\tendPrefixMapping:function(prefix) {\r\n\t},\r\n\tprocessingInstruction:function(target, data) {\r\n\t    var ins = this.doc.createProcessingInstruction(target, data);\r\n\t    this.locator && position(this.locator,ins);\r\n\t    appendElement(this, ins);\r\n\t},\r\n\tignorableWhitespace:function(ch, start, length) {\r\n\t},\r\n\tcharacters:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments);\r\n\t\t//console.log(chars)\r\n\t\tif(chars){\r\n\t\t\tif (this.cdata) {\r\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\r\n\t\t\t} else {\r\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\r\n\t\t\t}\r\n\t\t\tif(this.currentElement){\r\n\t\t\t\tthis.currentElement.appendChild(charNode);\r\n\t\t\t}else if(/^\\s*$/.test(chars)){\r\n\t\t\t\tthis.doc.appendChild(charNode);\r\n\t\t\t\t//process xml\r\n\t\t\t}\r\n\t\t\tthis.locator && position(this.locator,charNode);\r\n\t\t}\r\n\t},\r\n\tskippedEntity:function(name) {\r\n\t},\r\n\tendDocument:function() {\r\n\t\tthis.doc.normalize();\r\n\t},\r\n\tsetDocumentLocator:function (locator) {\r\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\r\n\t    \tlocator.lineNumber = 0;\r\n\t    }\r\n\t},\r\n\t//LexicalHandler\r\n\tcomment:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments);\r\n\t    var comm = this.doc.createComment(chars);\r\n\t    this.locator && position(this.locator,comm);\r\n\t    appendElement(this, comm);\r\n\t},\r\n\t\r\n\tstartCDATA:function() {\r\n\t    //used in characters() methods\r\n\t    this.cdata = true;\r\n\t},\r\n\tendCDATA:function() {\r\n\t    this.cdata = false;\r\n\t},\r\n\t\r\n\tstartDTD:function(name, publicId, systemId) {\r\n\t\tvar impl = this.doc.implementation;\r\n\t    if (impl && impl.createDocumentType) {\r\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\r\n\t        this.locator && position(this.locator,dt);\r\n\t        appendElement(this, dt);\r\n\t    }\r\n\t},\r\n\t/**\r\n\t * @see org.xml.sax.ErrorHandler\r\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\r\n\t */\r\n\twarning:function(error) {\r\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\r\n\t},\r\n\terror:function(error) {\r\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\r\n\t},\r\n\tfatalError:function(error) {\r\n\t\tconsole.error('[xmldom fatalError]\\t'+error,_locator(this.locator));\r\n\t    throw error;\r\n\t}\r\n};\r\nfunction _locator(l){\r\n\tif(l){\r\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\r\n\t}\r\n}\r\nfunction _toString(chars,start,length){\r\n\tif(typeof chars == 'string'){\r\n\t\treturn chars.substr(start,length)\r\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\r\n\t\tif(chars.length >= start+length || start){\r\n\t\t\treturn new java.lang.String(chars,start,length)+'';\r\n\t\t}\r\n\t\treturn chars;\r\n\t}\r\n}\r\n\r\n/*\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\r\n * used method of org.xml.sax.ext.LexicalHandler:\r\n *  #comment(chars, start, length)\r\n *  #startCDATA()\r\n *  #endCDATA()\r\n *  #startDTD(name, publicId, systemId)\r\n *\r\n *\r\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\r\n *  #endDTD()\r\n *  #startEntity(name)\r\n *  #endEntity(name)\r\n *\r\n *\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\r\n * IGNORED method of org.xml.sax.ext.DeclHandler\r\n * \t#attributeDecl(eName, aName, type, mode, value)\r\n *  #elementDecl(name, model)\r\n *  #externalEntityDecl(name, publicId, systemId)\r\n *  #internalEntityDecl(name, value)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\r\n * IGNORED method of org.xml.sax.EntityResolver2\r\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\r\n *  #resolveEntity(publicId, systemId)\r\n *  #getExternalSubset(name, baseURI)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\r\n * IGNORED method of org.xml.sax.DTDHandler\r\n *  #notationDecl(name, publicId, systemId) {};\r\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\r\n */\r\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\r\n\tDOMHandler.prototype[key] = function(){return null};\r\n});\r\n\r\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\r\nfunction appendElement (hander,node) {\r\n    if (!hander.currentElement) {\r\n        hander.doc.appendChild(node);\r\n    } else {\r\n        hander.currentElement.appendChild(node);\r\n    }\r\n}//appendChild and setAttributeNS are preformance key\r\n\r\n//if(typeof require == 'function'){\r\n\tvar XMLReader = sax.XMLReader;\r\n\tvar DOMImplementation = exports.DOMImplementation = dom.DOMImplementation;\r\n\texports.XMLSerializer = dom.XMLSerializer ;\r\n\texports.DOMParser = DOMParser;\r\n//}\n});\n\nvar Blob$8 = makeBlob();\n\nvar XMLSerializer$$1 = domParser.XMLSerializer;\n// NOTE: might be useful :https://github.com/jindw/xmldom/pull/152/commits/be5176ece6fa1591daef96a5f361aaacaa445175\n\nfunction CSGToX3D (CSG) {\n  var DOMImplementation$$1 = typeof document !== 'undefined' ? document.implementation : new domParser.DOMImplementation();\n  // materialPolygonLists\n  // key: a color string (e.g. \"0 1 1\" for yellow)\n  // value: an array of strings specifying polygons of this color\n  //        (as space-separated indices into vertexCoords)\n  var materialPolygonLists = {},\n    // list of coordinates (as \"x y z\" strings)\n    vertexCoords = [],\n    // map to look up the index in vertexCoords of a given vertex\n    vertexTagToCoordIndexMap = {};\n\n  CSG.polygons.map(function (p) {\n    var red = 0,\n      green = 0,\n      blue = 1; // default color is blue\n    if (p.shared && p.shared.color) {\n      red = p.shared.color[0];\n      green = p.shared.color[1];\n      blue = p.shared.color[2];\n    }\n\n    var polygonVertexIndices = [],\n      numvertices = p.vertices.length,\n      vertex;\n    for (var i = 0; i < numvertices; i++) {\n      vertex = p.vertices[i];\n      if (!(vertex.getTag() in vertexTagToCoordIndexMap)) {\n        vertexCoords.push(vertex.pos._x.toString() + ' ' +\n          vertex.pos._y.toString() + ' ' +\n          vertex.pos._z.toString()\n        );\n        vertexTagToCoordIndexMap[vertex.getTag()] = vertexCoords.length - 1;\n      }\n      polygonVertexIndices.push(vertexTagToCoordIndexMap[vertex.getTag()]);\n    }\n\n    var polygonString = polygonVertexIndices.join(' ');\n\n    var colorString = red.toString() + ' ' + green.toString() + ' ' + blue.toString();\n    if (!(colorString in materialPolygonLists)) {\n      materialPolygonLists[colorString] = [];\n    }\n    // add this polygonString to the list of colorString-colored polygons\n    materialPolygonLists[colorString].push(polygonString);\n  });\n\n  // create output document\n  var docType = DOMImplementation$$1.createDocumentType('X3D',\n    'ISO//Web3D//DTD X3D 3.1//EN', 'http://www.web3d.org/specifications/x3d-3.1.dtd');\n  var exportDoc = DOMImplementation$$1.createDocument(null, 'X3D', docType);\n  exportDoc.insertBefore(\n    exportDoc.createProcessingInstruction('xml', 'version=\"1.0\" encoding=\"UTF-8\"'),\n    exportDoc.doctype);\n\n  var exportRoot = exportDoc.getElementsByTagName('X3D')[0];\n  exportRoot.setAttribute('profile', 'Interchange');\n  exportRoot.setAttribute('version', '3.1');\n  exportRoot.setAttribute('xsd:noNamespaceSchemaLocation', 'http://www.web3d.org/specifications/x3d-3.1.xsd');\n  exportRoot.setAttribute('xmlns:xsd', 'http://www.w3.org/2001/XMLSchema-instance');\n\n  var exportScene = exportDoc.createElement('Scene');\n  exportRoot.appendChild(exportScene);\n\n  /*\n      For each color, create a shape made of an appropriately colored\n      material which contains all polygons that are this color.\n\n      The first shape will contain the definition of all vertices,\n      (<Coordinate DEF=\"coords_mesh\"/>), which will be referenced by\n      subsequent shapes.\n    */\n  var coordsMeshDefined = false;\n  for (var colorString in materialPolygonLists) {\n    var polygonList = materialPolygonLists[colorString];\n    var shape = exportDoc.createElement('Shape');\n    exportScene.appendChild(shape);\n\n    var appearance = exportDoc.createElement('Appearance');\n    shape.appendChild(appearance);\n\n    var material = exportDoc.createElement('Material');\n    appearance.appendChild(material);\n    material.setAttribute('diffuseColor', colorString);\n    material.setAttribute('ambientIntensity', '1.0');\n\n    var ifs = exportDoc.createElement('IndexedFaceSet');\n    shape.appendChild(ifs);\n    ifs.setAttribute('solid', 'true');\n    ifs.setAttribute('coordIndex', polygonList.join(' -1 ') + ' -1');\n\n    var coordinate = exportDoc.createElement('Coordinate');\n    ifs.appendChild(coordinate);\n    if (coordsMeshDefined) {\n      coordinate.setAttribute('USE', 'coords_mesh');\n    } else {\n      coordinate.setAttribute('DEF', 'coords_mesh');\n      coordinate.setAttribute('point', vertexCoords.join(' '));\n      coordsMeshDefined = true;\n    }\n  }\n\n  var x3dstring = (new XMLSerializer$$1()).serializeToString(exportDoc);\n  return new Blob$8([x3dstring], {\n    type: 'model/x3d+xml'\n  })\n}\n\n/*\n## License\n\nCopyright (c) 2016 Z3 Development https://github.com/z3dev\nCopyright (c) 2013-2016 by Rene K. Mueller <spiritdude@gmail.com>\nCopyright (c) 2016 by Z3D Development\n\nAll code released under MIT license\n\nHistory:\n  2016/06/27: 0.5.1: rewrote using SAX XML parser, enhanced for multiple objects, materials, units by Z3Dev\n  2013/04/11: 0.018: added alpha support to AMF export\n\n*/\n\n// //////////////////////////////////////////\n//\n// AMF is a language for describing three-dimensional graphics in XML\n// See http://www.astm.org/Standards/ISOASTM52915.htm\n// See http://amf.wikispaces.com/\n//\n// //////////////////////////////////////////\nvar sax$2 = require('sax');\n\nvar inchMM = (1 / 0.039370);       // used for scaling AMF (inch) to CAG coordinates(MM)\n\n// processing controls\nsax$2.SAXParser.prototype.amfLast = null;  // last object found\nsax$2.SAXParser.prototype.amfDefinition = 0;     // definitions beinging created\n                                               //   0-AMF,1-object,2-material,3-texture,4-constellation,5-metadata\n// high level elements / definitions\nsax$2.SAXParser.prototype.amfObjects = [];    // list of objects\nsax$2.SAXParser.prototype.amfMaterials = [];    // list of materials\nsax$2.SAXParser.prototype.amfTextures = [];    // list of textures\nsax$2.SAXParser.prototype.amfConstels = [];    // list of constellations\nsax$2.SAXParser.prototype.amfMetadata = [];    // list of metadata\n\nsax$2.SAXParser.prototype.amfObj = null;  // amf in object form\n\nfunction amfAmf (element) {\n// default SVG with no viewport\n  var obj = {type: 'amf', unit: 'mm', scale: 1.0};\n\n  if ('UNIT' in element) { obj.unit = element.UNIT.toLowerCase(); }\n// set scaling\n  switch (obj.unit.toLowerCase()) {\n    case 'inch':\n      obj.scale = inchMM;\n      break\n    case 'foot':\n      obj.scale = inchMM * 12.0;\n      break\n    case 'meter':\n      obj.scale = 1000.0;\n      break\n    case 'micron':\n      obj.scale = 0.001;\n      break\n    case 'millimeter':\n    default:\n      break\n  }\n\n  obj.objects = [];\n  return obj\n}\n\nsax$2.SAXParser.prototype.amfObject = function (element) {\n  var obj = {type: 'object', id: 'JSCAD' + (this.amfObjects.length)}; // default ID\n\n  if ('ID' in element) { obj.id = element.ID; }\n\n  obj.objects = [];\n  return obj\n};\n\nfunction amfMesh (element) {\n  var obj = {type: 'mesh'};\n\n  obj.objects = [];\n  return obj\n}\n\n// Note: TBD Vertices can have a color, which is used to interpolate a face color (from the 3 vertices)\nfunction amfVertices (element) {\n  var obj = {type: 'vertices'};\n  obj.objects = [];\n  return obj\n}\n\nfunction amfCoordinates (element) {\n  var obj = {type: 'coordinates'};\n\n  obj.objects = [];\n  return obj\n}\nfunction amfNormal (element) {\n  var obj = {type: 'normal'};\n\n  obj.objects = [];\n  return obj\n}\nfunction amfX (element) {\n  return {type: 'x', value: '0'}\n}\nfunction amfY (element) {\n  return {type: 'y', value: '0'}\n}\nfunction amfZ (element) {\n  return {type: 'z', value: '0'}\n}\n\nfunction amfVolume (element) {\n  var obj = {type: 'volume'};\n\n  if ('MATERIALID' in element) { obj.materialid = element.MATERIALID; }\n\n  obj.objects = [];\n  return obj\n}\n\nfunction amfTriangle (element) {\n  var obj = {type: 'triangle'};\n\n  obj.objects = [];\n  return obj\n}\nfunction amfV1 (element) {\n  return {type: 'v1', value: '0'}\n}\nfunction amfV2 (element) {\n  return {type: 'v2', value: '0'}\n}\nfunction amfV3 (element) {\n  return {type: 'v3', value: '0'}\n}\n\nfunction amfVertex (element) {\n  var obj = {type: 'vertex'};\n  obj.objects = [];\n  return obj\n}\n\nfunction amfEdge (element) {\n  var obj = {type: 'edge'};\n\n  obj.objects = [];\n  return obj\n}\n\nfunction amfMetadata (element) {\n  var obj = {type: 'metadata'};\n\n  if ('TYPE' in element) { obj.mtype = element.TYPE; }\n  if ('ID' in element) { obj.id = element.ID; }\n\n  return obj\n}\n\nfunction amfMaterial (element) {\n  var obj = {type: 'material'};\n\n  if ('ID' in element) { obj.id = element.ID; }\n\n  obj.objects = [];\n  return obj\n}\n\nfunction amfColor (element) {\n  var obj = {type: 'color'};\n\n  obj.objects = [];\n  return obj\n}\nfunction amfR (element) {\n  return {type: 'r', value: '1'}\n}\nfunction amfG (element) {\n  return {type: 'g', value: '1'}\n}\nfunction amfB (element) {\n  return {type: 'b', value: '1'}\n}\nfunction amfA (element) {\n  return {type: 'a', value: '1'}\n}\n\nfunction amfMap (element) {\n  var obj = {type: 'map'};\n\n  if ('GTEXID' in element) { obj.gtexid = element.GTEXID; }\n  if ('BTEXID' in element) { obj.btexid = element.BTEXID; }\n  if ('RTEXID' in element) { obj.rtexid = element.RTEXID; }\n\n  obj.objects = [];\n  return obj\n}\n\nfunction amfU1 (element) {\n  return {type: 'u1', value: '0'}\n}\nfunction amfU2 (element) {\n  return {type: 'u2', value: '0'}\n}\nfunction amfU3 (element) {\n  return {type: 'u3', value: '0'}\n}\n\nfunction createAmfParser (src, pxPmm) {\n  // create a parser for the XML\n  var parser = sax$2.parser(false, {trim: true, lowercase: false, position: true});\n\n  parser.onerror = function (e) {\n    console.log('error: line ' + e.line + ', column ' + e.column + ', bad character [' + e.c + ']');\n  };\n  parser.onopentag = function (node) {\n    // console.log('opentag: '+node.name+' at line '+this.line+' position '+this.column);\n    // for (x in node.attributes) {\n    //  console.log('    '+x+'='+node.attributes[x]);\n    // }\n    var obj = null;\n    switch (node.name) {\n    // top level elements\n      case 'AMF':\n        obj = amfAmf(node.attributes);\n        break\n      case 'OBJECT':\n        obj = this.amfObject(node.attributes);\n        if (this.amfDefinition === 0) { this.amfDefinition = 1; } // OBJECT processing\n        break\n      case 'MESH':\n        obj = amfMesh(node.attributes);\n        break\n      case 'VERTICES':\n        obj = amfVertices(node.attributes);\n        break\n      case 'VERTEX':\n        obj = amfVertex(node.attributes);\n        break\n      case 'EDGE':\n        obj = amfEdge(node.attributes);\n        break\n      case 'VOLUME':\n        obj = amfVolume(node.attributes);\n        break\n      case 'MATERIAL':\n        obj = amfMaterial(node.attributes);\n        if (this.amfDefinition === 0) { this.amfDefinition = 2; } // MATERIAL processing\n        break\n      case 'COMPOSITE':\n        break\n      case 'TEXTURE':\n        if (this.amfDefinition === 0) { this.amfDefinition = 3; } // TEXTURE processing\n        break\n      case 'CONSTELLATION':\n        if (this.amfDefinition === 0) { this.amfDefinition = 4; } // CONSTELLATION processing\n        break\n      case 'METADATA':\n        obj = amfMetadata(node.attributes);\n        if (this.amfDefinition === 0) { this.amfDefinition = 5; } // METADATA processing\n        break\n    // coordinate elements\n      case 'COORDINATES':\n        obj = amfCoordinates(node.attributes);\n        break\n      case 'NORMAL':\n        obj = amfNormal(node.attributes);\n        break\n      case 'X':\n      case 'NX':\n        obj = amfX(node.attributes);\n        break\n      case 'Y':\n      case 'NY':\n        obj = amfY(node.attributes);\n        break\n      case 'Z':\n      case 'NZ':\n        obj = amfZ(node.attributes);\n        break\n    // triangle elements\n      case 'TRIANGLE':\n        obj = amfTriangle(node.attributes);\n        break\n      case 'V1':\n      case 'VTEX1':\n        obj = amfV1(node.attributes);\n        break\n      case 'V2':\n      case 'VTEX2':\n        obj = amfV2(node.attributes);\n        break\n      case 'V3':\n      case 'VTEX3':\n        obj = amfV3(node.attributes);\n        break\n    // color elements\n      case 'COLOR':\n        obj = amfColor(node.attributes);\n        break\n      case 'R':\n        obj = amfR(node.attributes);\n        break\n      case 'G':\n        obj = amfG(node.attributes);\n        break\n      case 'B':\n        obj = amfB(node.attributes);\n        break\n      case 'A':\n        obj = amfA(node.attributes);\n        break\n    // map elements\n      case 'MAP':\n      case 'TEXMAP':\n        obj = amfMap(node.attributes);\n        break\n      case 'U1':\n      case 'UTEX1':\n      case 'VTEX1':\n      case 'WTEX1':\n        obj = amfU1(node.attributes);\n        break\n      case 'U2':\n      case 'UTEX2':\n      case 'VTEX2':\n      case 'WTEX2':\n        obj = amfU2(node.attributes);\n        break\n      case 'U3':\n      case 'UTEX3':\n      case 'VTEX3':\n      case 'WTEX3':\n        obj = amfU3(node.attributes);\n        break\n      default:\n        // console.log('opentag: '+node.name+' at line '+this.line+' position '+this.column);\n        break\n    }\n\n    if (obj !== null) {\n      // console.log('definitinon '+this.amfDefinition);\n      switch (this.amfDefinition) {\n        case 0: // definition of AMF\n          if ('objects' in obj) {\n            // console.log('push object ['+obj.type+']');\n            this.amfObjects.push(obj);\n          }\n          break\n        case 1: // definition of OBJECT\n          if (this.amfObjects.length > 0) {\n            var group = this.amfObjects.pop();\n          // add the object to the active group if necessary\n            if ('objects' in group) {\n              // console.log('object '+group.type+' adding ['+obj.type+']');\n              // console.log(JSON.stringify(obj));\n              group.objects.push(obj);\n            }\n            this.amfObjects.push(group);\n          // and push this object as a group object if necessary\n            if ('objects' in obj) {\n              // console.log('object group ['+obj.type+']');\n              this.amfObjects.push(obj);\n            }\n          }\n          break\n        case 2: // definition of MATERIAL\n          if (obj.type === 'material') {\n            // console.log('push material ['+obj.type+']');\n            this.amfMaterials.push(obj);\n          } else {\n            if (this.amfMaterials.length > 0) {\n              var group = this.amfMaterials.pop();\n            // add the object to the active group if necessary\n              if ('objects' in group) {\n                // console.log('material '+group.type+' adding ['+obj.type+']');\n                // console.log(JSON.stringify(obj));\n                group.objects.push(obj);\n              }\n              this.amfMaterials.push(group);\n            // and push this object as a group object if necessary\n              if ('objects' in obj) {\n                // console.log('push material ['+obj.type+']');\n                this.amfMaterials.push(obj);\n              }\n            }\n          }\n          break\n        case 3: // definition of TEXTURE\n          break\n        case 4: // definition of CONSTELLATION\n          break\n        case 5: // definition of METADATA\n          break\n        default:\n          console.log('ERROR: invalid AMF definition');\n          break\n      }\n      this.amfLast = obj; // retain this object in order to add values\n    }\n  };\n\n  parser.onclosetag = function (node) {\n// console.log('onclosetag: '+this.amfDefinition);\n    switch (node) {\n    // list those which have objects\n      case 'AMF':\n      case 'OBJECT':\n      case 'MESH':\n      case 'VERTICES':\n      case 'VERTEX':\n      case 'EDGE':\n      case 'COORDINATES':\n      case 'NORMAL':\n      case 'VOLUME':\n      case 'TRIANGLE':\n      case 'MATERIAL':\n      case 'COLOR':\n      case 'MAP':\n      case 'TEXMAP':\n        break\n      case 'TEXTURE':\n        if (this.amfDefinition === 3) { this.amfDefinition = 0; } // resume processing\n        return\n      case 'CONSTELLATION':\n        if (this.amfDefinition === 4) { this.amfDefinition = 0; } // resume processing\n        return\n      case 'METADATA':\n        if (this.amfDefinition === 5) { this.amfDefinition = 0; } // resume processing\n        return\n      default:\n        // console.log('closetag: '+node);\n        return\n    }\n\n    var obj = null;\n    switch (this.amfDefinition) {\n      case 0: // definition of AMF\n      case 1: // definition of OBJECT\n        if (this.amfObjects.length > 0) {\n          obj = this.amfObjects.pop();\n          // console.log('pop object ['+obj.type+']');\n          if (obj.type === 'object') {\n            this.amfDefinition = 0; // AMF processing\n          }\n        }\n      // check for completeness\n        if (this.amfObjects.length === 0) {\n          this.amfObj = obj;\n        }\n        break\n      case 2: // definition of MATERIAL\n        if (this.amfMaterials.length > 0) {\n          obj = this.amfMaterials.pop();\n          // console.log('pop material ['+obj.type+']');\n          if (obj.type === 'material') {\n            this.amfMaterials.push(obj); // keep a list of materials\n            this.amfDefinition = 0; // AMF processing\n          }\n        }\n        break\n      case 3: // definition of TEXTURE\n        this.amfDefinition = 0; // AMF processing\n        break\n      case 4: // definition of CONSTELLATION\n        this.amfDefinition = 0; // AMF processing\n        break\n      case 5: // definition of METADATA\n        this.amfDefinition = 0; // AMF processing\n        break\n      default:\n        break\n    }\n  };\n\n  parser.ontext = function (value) {\n    if (value !== null) {\n      if (this.amfLast && this.amfDefinition !== 0) {\n        this.amfLast.value = value;\n        // console.log(JSON.stringify(this.amfLast));\n      }\n    }\n  };\n\n  parser.onend = function () {\n    // console.log('AMF parsing completed');\n  };\n\n// start the parser\n  parser.write(src).close();\n\n  return parser\n}\n\n//\n// convert the internal repreentation into JSCAD code\n//\nfunction codify (amf, data) {\n  if (amf.type !== 'amf' || (!amf.objects)) { throw new Error('AMF malformed') }\n\n  var code = '';\n\n// hack due to lack of this in array map()\n  var objects = amf.objects;\n  var materials = data.amfMaterials;\n  var lastmaterial = null;\n  function findMaterial (id) {\n    if (lastmaterial && lastmaterial.id === id) { return lastmaterial }\n    for (var i = 0; i < materials.length; i++) {\n      if (materials[i].id && materials[i].id === id) {\n        lastmaterial = materials[i];\n        return lastmaterial\n      }\n    }\n    return null\n  }\n  function getValue (objects, type) {\n    for (var i = 0; i < objects.length; i++) {\n      if (objects[i].type === type) { return objects[i].value }\n    }\n    return null\n  }\n  function getColor (objects) {\n    for (var i = 0; i < objects.length; i++) {\n      var obj = objects[i];\n      if (obj.type === 'color') {\n        var r = parseFloat(getValue(obj.objects, 'r'));\n        var g = parseFloat(getValue(obj.objects, 'g'));\n        var b = parseFloat(getValue(obj.objects, 'b'));\n        var a = parseFloat(getValue(obj.objects, 'a'));\n        if (Number.isNaN(r)) { r = 1.0; } // AMF default color\n        if (Number.isNaN(g)) { g = 1.0; }\n        if (Number.isNaN(b)) { b = 1.0; }\n        if (Number.isNaN(a)) { a = 1.0; }\n        return [r, g, b, a]\n      }\n    }\n    return null\n  }\n  function findColorByMaterial (id) {\n    var m = findMaterial(id);\n    if (m) {\n      return getColor(m.objects)\n    }\n    return null\n  }\n\n// convert high level definitions\n  function createDefinition (obj, didx) {\n// console.log(materials.length);\n    switch (obj.type) {\n      case 'object':\n        createObject(obj, didx);\n        break\n      case 'metadata':\n        break\n      case 'material':\n        break\n      default:\n        console.log('Warning: unknown definition: ' + obj.type);\n        break\n    }\n  }\n// convert all objects to CSG based code\n  function createObject (obj, oidx) {\n    var vertices = [];    // [x,y,z]\n    var faces = [];    // [v1,v2,v3]\n    var colors = [];    // [r,g,b,a]\n\n    function addCoord (coord, cidx) {\n      if (coord.type === 'coordinates') {\n        var x = parseFloat(getValue(coord.objects, 'x'));\n        var y = parseFloat(getValue(coord.objects, 'y'));\n        var z = parseFloat(getValue(coord.objects, 'z'));\n// console.log('['+x+','+y+','+z+']');\n        vertices.push([x, y, z]);\n      }\n    // normal is possible\n    }\n    function addVertex (vertex, vidx) {\n// console.log(vertex.type);\n      if (vertex.type === 'vertex') {\n        vertex.objects.map(addCoord);\n      }\n    // edge is possible\n    }\n    function addTriangle (tri, tidx) {\n      if (tri.type === 'triangle') {\n        var v1 = parseInt(getValue(tri.objects, 'v1'));\n        var v2 = parseInt(getValue(tri.objects, 'v2'));\n        var v3 = parseInt(getValue(tri.objects, 'v3'));\n// console.log('['+v1+','+v2+','+v3+']');\n        faces.push([v1, v2, v3]);        // HINT: reverse order for polyhedron()\n        var c = getColor(tri.objects);\n        if (c) {\n          colors.push(c);\n        } else {\n          colors.push(tricolor);\n        }\n      }\n    }\n    var tricolor = null; // for found colors\n    function addPart (part, pidx) {\n// console.log(part.type);\n      switch (part.type) {\n        case 'vertices':\n          part.objects.map(addVertex, data);\n          break\n        case 'volume':\n          tricolor = getColor(part.objects);\n          if (part.materialid) {\n          // convert material to color\n            tricolor = findColorByMaterial(part.materialid);\n          }\n          part.objects.map(addTriangle, data);\n          break\n        default:\n          break\n      }\n    }\n    function addMesh (mesh, midx) {\n// console.log(mesh.type);\n      if (mesh.type === 'mesh') {\n        mesh.objects.map(addPart, data);\n      }\n    }\n\n    if (obj.objects.length > 0) {\n      obj.objects.map(addMesh, data);\n\n      var fcount = faces.length;\n      var vcount = vertices.length;\n\n      code += '// Object ' + obj.id + '\\n';\n      code += '//  faces   : ' + fcount + '\\n';\n      code += '//  vertices: ' + vcount + '\\n';\n      code += 'function createObject' + obj.id + '() {\\n';\n      code += '  var polys = [];\\n';\n\n    // convert the results into function calls\n      for (var i = 0; i < fcount; i++) {\n        code += '  polys.push(\\n';\n        code += '    PP([\\n';\n        for (var j = 0; j < faces[i].length; j++) {\n          if (faces[i][j] < 0 || faces[i][j] >= vcount) {\n            if (err.length === '') { err += 'bad index for vertice (out of range)'; }\n            continue\n          }\n          if (j) { code += ',\\n'; }\n          code += '      VV(' + vertices[faces[i][j]] + ')';\n        }\n        code += '])';\n        if (colors[i]) {\n          var c = colors[i];\n          code += '.setColor([' + c[0] + ',' + c[1] + ',' + c[2] + ',' + c[3] + '])';\n        }\n        code += ');\\n';\n      }\n      code += '  return CSG.fromPolygons(polys);\\n';\n      code += '}\\n';\n    }\n  }\n\n// start everthing\n  code = '// Objects  : ' + objects.length + '\\n';\n  code += '// Materials: ' + materials.length + '\\n';\n  code += '\\n';\n  code += '// helper functions\\n';\n  if (amf.scale !== 1.0) {\n    code += 'var SCALE = ' + amf.scale + '; // scaling units (' + amf.unit + ')\\n';\n    code += 'var VV = function(x,y,z) { return new CSG.Vertex(new CSG.Vector3D(x*SCALE,y*SCALE,z*SCALE)); };\\n';\n  } else {\n    code += 'var VV = function(x,y,z) { return new CSG.Vertex(new CSG.Vector3D(x,y,z)); };\\n';\n  }\n  code += 'var PP = function(a) { return new CSG.Polygon(a); };\\n';\n  code += '\\n';\n  code += 'function main() {\\n';\n  code += '  var csgs = [];\\n';\n  for (var i = 0; i < objects.length; i++) {\n    var obj = objects[i];\n    if (obj.type === 'object') {\n      code += '  csgs.push(createObject' + obj.id + '());\\n';\n    }\n  }\n  code += '  return union(csgs);\\n';\n  code += '}\\n';\n  code += '\\n';\n\n  objects.map(createDefinition, data);\n  return code\n}\n\n//\n// Parse the given AMF source and return a JSCAD script\n//\n// fn (optional) original filename of AMF source\n// options (optional) anonymous object with:\n//   pxPmm: pixels per milimeter for calcuations\n// FIXME: add openjscad version in a cleaner manner ?\nfunction parseAMF (src, fn, options) {\n  fn = fn || 'amf';\n  var defaults = {version: '0.0.0'};\n  options = Object.assign({}, defaults, options);\n  var version = options.version;\n\n  // parse the AMF source\n  var parser = createAmfParser(src);\n  // convert the internal objects to JSCAD code\n  var code = '';\n  code += '//\\n';\n  code += '// producer: OpenJSCAD.org ' + version + ' AMF Importer\\n';\n  code += '// date: ' + (new Date()) + '\\n';\n  code += '// source: ' + fn + '\\n';\n  code += '//\\n';\n  if (parser.amfObj !== null) {\n    // console.log(JSON.stringify(parser.amfObj))\n    // console.log(JSON.stringify(parser.amfMaterials))\n    code += codify(parser.amfObj, parser);\n  } else {\n    console.log('Warning: AMF parsing failed');\n  }\n  return code\n}\n\nfunction parseGCode (gcode, fn, options) {   // http://reprap.org/wiki/G-code\n  var defaults = {version: '0.0.0'};\n  options = Object.assign({}, defaults, options);\n  var version = options.version;\n                                  // just as experiment ...\n  var l = gcode.split(/[\\n]/);   // for now just GCODE ASCII\n  var srci = '';\n  var d = 0, pos = [], lpos = [], le = 0, ld = 0, p = [];\n  var origin = [-100, -100];\n  var layers = 0;\n  var lh = 0.35, lz = 0;\n\n  for (var i = 0; i < l.length; i++) {\n    var val = '', k, e = 0;\n    if (l[i].match(/^\\s*;/)) { continue }\n    var c = l[i].split(/\\s+/);\n    for (var j = 0; j < c.length; j++) {\n      if (c[j].match(/G(\\d+)/)) {\n        var n = parseInt(RegExp.$1);\n        if (n == 1) { d++; }\n        if (n == 90) { pos.type = 'abs'; }\n        if (n == 91) { pos.type = 'rel'; }\n      } else if (c[j].match(/M(\\d+)/)) {\n        var n = parseInt(RegExp.$1);\n        if (n == 104 || n == 109) { k = 'temp'; }\n      } else if (c[j].match(/S([\\d\\.]+)/)) {\n        var v = parseInt(RegExp.$1);\n        if (k !== undefined) {\n          val[k] = v;\n        }\n      } else if (c[j].match(/([XYZE])([\\-\\d\\.]+)/)) {\n        var a = RegExp.$1, v = parseFloat(RegExp.$2);\n        if (pos.type == 'abs') {\n          if (d) { pos[a] = v; }\n        } else {\n          if (d) { pos[a] += v; }\n        }\n            // console.log(d,a,pos.E,lpos.E);\n        if (d && a == 'E' && lpos.E === undefined) {\n          lpos.E = pos.E;\n        }\n        if (d && a == 'E' && (pos.E - lpos.E) > 0) {\n               // console.log(pos.E,lpos.E);\n          e++;\n        }\n      }\n    }\n    if (d && pos.X && pos.Y) {\n      if (e) {\n        if (!le && lpos.X && lpos.Y) {\n               // console.log(lpos.X,lpos.Y);\n          p.push('[' + (lpos.X + origin[0]) + ',' + (lpos.Y + origin[1]) + ']');\n        }\n        p.push('[' + (pos.X + origin[0]) + ',' + (pos.Y + origin[1]) + ']');\n      }\n      if (!e && le && p.length > 1) {\n        if (srci.length) { srci += ',\\n\\t\\t'; }\n        if (pos.Z != lz) {\n          lh = pos.Z - lz;\n          layers++;\n        }\n        srci += 'EX([' + p.join(', ') + '],{w: ' + lh * 1.1 + ', h:' + lh * 1.02 + ', fn:1, closed: false}).translate([0,0,' + pos['Z'] + '])';\n        p = [];\n        lz = pos.Z;\n            // if(layers>2)\n            //   break;\n      }\n      le = e;\n      lpos.X = pos.X;\n      lpos.Y = pos.Y;\n      lpos.Z = pos.Z;\n      lpos.E = pos.E;\n    }\n    ld = d;\n  }\n\n  var src = '';\n  src += '// producer: OpenJSCAD Compatibility (' + version + ') GCode Importer\\n';\n  src += '// date: ' + (new Date()) + '\\n';\n  src += '// source: ' + fn + '\\n';\n  src += '\\n';\n   // if(err) src += \"// WARNING: import errors: \"+err+\" (some triangles might be misaligned or missing)\\n\";\n  src += '// layers: ' + layers + '\\n';\n  src += 'function main() {\\n\\tvar EX = function(p,opt) { return rectangular_extrude(p,opt); }\\n\\treturn [';\n  src += srci;\n  src += '\\n\\t];\\n}\\n';\n  return src\n}\n\n/*\n## License\n\nCopyright (c) 2016 Z3 Development https://github.com/z3dev\n\nAll code released under MIT license\n\nHistory:\n  2016/10/15: 0.5.2: initial version\n\nNotes:\n1) All functions extend other objects in order to maintain namespaces.\n*/\n\n// //////////////////////////////////////////\n//\n// JSON (JavaScript Object Notation) is a lightweight data-interchange format\n// See http://json.org/\n//\n// //////////////////////////////////////////\n\nfunction toSourceCSGVertex (ver) {\n  return 'new CSG.Vertex(new CSG.Vector3D(' + ver._x + ',' + ver._y + ',' + ver._z + '))'\n}\n\n// convert the give CSG object to JSCAD source\nfunction toSourceCSG (csg) {\n  var code = '  var polygons = [];\\n';\n  csg.polygons.map(function (p) {\n    code += '  poly = new CSG.Polygon([\\n';\n    for (var i = 0; i < p.vertices.length; i++) {\n      code += '                         ' + toSourceCSGVertex(p.vertices[i].pos) + ',\\n';\n    }\n    code += '                         ])';\n    if (p.shared && p.shared.color && p.shared.color.length) {\n      code += '.setColor(' + JSON.stringify(p.shared.color) + ');\\n';\n    } else {\n      code += ';\\n';\n    }\n    code += '  polygons.push(poly);\\n';\n  });\n  code += '  return CSG.fromPolygons(polygons);\\n';\n  return code\n}\n\nfunction toSourceCAGVertex (ver) {\n  return 'new CAG.Vertex(new CSG.Vector2D(' + ver.pos._x + ',' + ver.pos._y + '))'\n}\nfunction toSourceSide (side) {\n  return 'new CAG.Side(' + toSourceCAGVertex(side.vertex0) + ',' + toSourceCAGVertex(side.vertex1) + ')'\n}\n\n// convert the give CAG object to JSCAD source\nfunction toSourceCAG (cag) {\n  var code = '  var sides = [];\\n';\n  cag.sides.map(function (s) {\n    code += '  sides.push(' + toSourceSide(s) + ');\\n';\n  });\n  code += '  return CAG.fromSides(sides);\\n';\n  return code\n}\n\n// convert an anonymous CSG/CAG object to JSCAD source\nfunction toSource (obj) {\n  if (obj.type && obj.type === 'csg') {\n    var csg = _jscad_csg.CSG.fromObject(obj);\n    return toSourceCSG(csg)\n  }\n  if (obj.type && obj.type === 'cag') {\n    var cag = CAG.fromObject(obj);\n    return toSourceCAG(cag)\n  }\n  return ''\n}\n\n//\n// Parse the given JSON source and return a JSCAD script\n//\n// fn (optional) original filename of JSON source\n//\nfunction parseJSON (src, fn, options) {\n  fn = fn || 'amf';\n  var defaults = {version: '0.0.0'};\n  options = Object.assign({}, defaults, options);\n  var version = options.version;\n\n// convert the JSON into an anonymous object\n  var obj = JSON.parse(src);\n// convert the internal objects to JSCAD code\n  var code = '';\n  code += '//\\n';\n  code += '// producer: OpenJSCAD.org ' + version + ' JSON Importer\\n';\n  code += '// date: ' + (new Date()) + '\\n';\n  code += '// source: ' + fn + '\\n';\n  code += '//\\n';\n  code += 'function main() {\\n';\n  code += toSource(obj);\n  code += '};\\n';\n  return code\n}\n\n// export the extended prototypes\n// module.CAG = CAG;\n\nfunction vt2jscad (v, t, n, c) {     // vertices, triangles, normals and colors\n  var src = '';\n  src += 'polyhedron({ points: [\\n\\t';\n  for (var i = 0, j = 0; i < v.length; i++) {\n    if (j++) { src += ',\\n\\t'; }\n    src += '[' + v[i] + ']'; // .join(\", \");\n  }\n  src += '],\\n\\tpolygons: [\\n\\t';\n  for (var i = 0, j = 0; i < t.length; i++) {\n    if (j++) { src += ',\\n\\t'; }\n    src += '[' + t[i] + ']'; // .join(', ');\n  }\n  if (c && t.length == c.length) {\n    src += '],\\n\\tcolors: [\\n\\t';\n    for (var i = 0, j = 0; i < c.length; i++) {\n      if (j++) { src += ',\\n\\t'; }\n      src += '[' + c[i] + ']'; // .join(', ');\n    }\n  }\n  src += '] })\\n';\n  return src\n}\n\nfunction parseOBJ (obj, fn, options) {   // http://en.wikipedia.org/wiki/Wavefront_.obj_file\n  var defaults = {version: '0.0.0'};\n  options = Object.assign({}, defaults, options);\n  var version = options.version;\n\n  var l = obj.split(/\\n/);\n  var v = [], f = [];\n\n  for (var i = 0; i < l.length; i++) {\n    var s = l[i];\n    var a = s.split(/\\s+/);\n\n    if (a[0] == 'v') {\n      v.push([a[1], a[2], a[3]]);\n    } else if (a[0] == 'f') {\n      var fc = [];\n      var skip = 0;\n\n      for (var j = 1; j < a.length; j++) {\n        var c = a[j];\n        c = c.replace(/\\/.*$/, '');     // -- if coord# is '840/840' -> 840\n        c--;                       // -- starts with 1, but we start with 0\n        if (c >= v.length) {\n          skip++;\n        }\n        if (skip == 0) {\n          fc.push(c);\n        }\n      }\n         // fc.reverse();\n      if (skip == 0) {\n        f.push(fc);\n      }\n    } else {\n           // vn vt and all others disregarded\n    }\n  }\n  var src = '';\n  src += '// producer: OpenJSCAD Compatibility (' + version + ') Wavefront OBJ Importer\\n';\n  src += '// date: ' + (new Date()) + '\\n';\n  src += '// source: ' + fn + '\\n';\n  src += '\\n';\n   // if(err) src += \"// WARNING: import errors: \"+err+\" (some triangles might be misaligned or missing)\\n\";\n  src += '// objects: 1\\n// object #1: polygons: ' + f.length + '\\n\\n';\n  src += 'function main() { return ';\n  src += vt2jscad(v, f);\n  src += '; }';\n  return src\n}\n\n// STL function from http://jsfiddle.net/Riham/yzvGD/35/\n// CC BY-SA by Riham\n// changes by Rene K. Mueller <spiritdude@gmail.com>\n//\n// 2013/03/28: lot of rework and debugging included, and error handling\n// 2013/03/18: renamed functions, creating .jscad source direct via polyhedron()\nvar echo = console.info;\n\nfunction parseSTL (stl, fn, options) {\n  var defaults = {version: '0.0.0'};\n  options = Object.assign({}, defaults, options);\n  var version = options.version;\n\n  var isAscii = true;\n\n  for (var i = 0; i < stl.length; i++) {\n    if (stl[i].charCodeAt(0) == 0) {\n      isAscii = false;\n      break\n    }\n  }\n  var src;\n  if (!isAscii) {\n    src = parseBinarySTL(stl, fn, version);\n  } else {\n    src = parseAsciiSTL(stl, fn, version);\n  }\n  return src\n}\n\nfunction parseBinarySTL (stl, fn, version) {\n    // -- This makes more sense if you read http://en.wikipedia.org/wiki/STL_(file_format)#Binary_STL\n  var vertices = [];\n  var triangles = [];\n  var normals = [];\n  var colors = [];\n  var vertexIndex = 0;\n  var converted = 0;\n  var err = 0;\n  var mcolor = null;\n  var umask = parseInt('01000000000000000', 2);\n  var rmask = parseInt('00000000000011111', 2);\n  var gmask = parseInt('00000001111100000', 2);\n  var bmask = parseInt('00111110000000000', 2);\n  var br = new BinaryReader(stl);\n\n  var m = 0, c = 0, r = 0, g = 0, b = 0, a = 0;\n  for (var i = 0; i < 80; i++) {\n    switch (m) {\n      case 6:\n        r = br.readUInt8();\n        m += 1;\n        continue\n      case 7:\n        g = br.readUInt8();\n        m += 1;\n        continue\n      case 8:\n        b = br.readUInt8();\n        m += 1;\n        continue\n      case 9:\n        a = br.readUInt8();\n        m += 1;\n        continue\n      default:\n        c = br.readChar();\n        switch (c) {\n          case 'C':\n          case 'O':\n          case 'L':\n          case 'R':\n          case '=':\n            m += 1;\n          default:\n            break\n        }\n        break\n    }\n  }\n  if (m == 10) { // create the default color\n    mcolor = [r / 255, g / 255, b / 255, a / 255];\n  }\n\n  var totalTriangles = br.readUInt32(); // Read # triangles\n\n  for (var tr = 0; tr < totalTriangles; tr++) {\n        // if(tr%100==0) status('stl importer: converted '+converted+' out of '+totalTriangles+' triangles');\n        /*\n             REAL32[3] . Normal vector\n             REAL32[3] . Vertex 1\n             REAL32[3] . Vertex 2\n             REAL32[3] . Vertex 3\n                UINT16 . Attribute byte count */\n        // -- Parse normal\n    var no = []; no.push(br.readFloat()); no.push(br.readFloat()); no.push(br.readFloat());\n\n        // -- Parse every 3 subsequent floats as a vertex\n    var v1 = []; v1.push(br.readFloat()); v1.push(br.readFloat()); v1.push(br.readFloat());\n    var v2 = []; v2.push(br.readFloat()); v2.push(br.readFloat()); v2.push(br.readFloat());\n    var v3 = []; v3.push(br.readFloat()); v3.push(br.readFloat()); v3.push(br.readFloat());\n\n    var skip = 0;\n    {\n      for (var i = 0; i < 3; i++) {\n        if (isNaN(v1[i])) { skip++; }\n        if (isNaN(v2[i])) { skip++; }\n        if (isNaN(v3[i])) { skip++; }\n        if (isNaN(no[i])) { skip++; }\n      }\n      if (skip > 0) {\n        echo('bad triangle vertice coords/normal: ', skip);\n      }\n    }\n    err += skip;\n        // -- every 3 vertices create a triangle.\n    var triangle = []; triangle.push(vertexIndex++); triangle.push(vertexIndex++); triangle.push(vertexIndex++);\n\n    var abc = br.readUInt16();\n    var color = null;\n    if (m == 10) {\n      var u = (abc & umask); // 0 if color is unique for this triangle\n      var r = (abc & rmask) / 31;\n      var g = ((abc & gmask) >>> 5) / 31;\n      var b = ((abc & bmask) >>> 10) / 31;\n      var a = 255;\n      if (u == 0) {\n        color = [r, g, b, a];\n      } else {\n        color = mcolor;\n      }\n      colors.push(color);\n    }\n\n        // -- Add 3 vertices for every triangle\n        // -- TODO: OPTIMIZE: Check if the vertex is already in the array, if it is just reuse the index\n    if (skip == 0) {  // checking cw vs ccw, given all normal/vertice are valid\n           // E1 = B - A\n           // E2 = C - A\n           // test = dot( Normal, cross( E1, E2 ) )\n           // test > 0: cw, test < 0 : ccw\n      var w1 = new _jscad_csg.CSG.Vector3D(v1);\n      var w2 = new _jscad_csg.CSG.Vector3D(v2);\n      var w3 = new _jscad_csg.CSG.Vector3D(v3);\n      var e1 = w2.minus(w1);\n      var e2 = w3.minus(w1);\n      var t = new _jscad_csg.CSG.Vector3D(no).dot(e1.cross(e2));\n      if (t > 0) {    // 1,2,3 -> 3,2,1\n        var tmp = v3;\n        v3 = v1;\n        v1 = tmp;\n      }\n    }\n    vertices.push(v1);\n    vertices.push(v2);\n    vertices.push(v3);\n    triangles.push(triangle);\n    normals.push(no);\n    converted++;\n  }\n  var src = '';\n  src += '// producer: OpenJSCAD Compatibility (' + version + ') STL Binary Importer\\n';\n  src += '// date: ' + (new Date()) + '\\n';\n  src += '// source: ' + fn + '\\n';\n  src += '\\n';\n  if (err) { src += '// WARNING: import errors: ' + err + ' (some triangles might be misaligned or missing)\\n'; }\n  src += '// objects: 1\\n// object #1: triangles: ' + totalTriangles + '\\n\\n';\n  src += 'function main() { return ';\n  src += vt2jscad(vertices, triangles, normals, colors);\n  src += '; }';\n  return src\n}\n\nfunction parseAsciiSTL (stl, fn, version) {\n  var src = '';\n  var n = 0;\n  var converted = 0;\n  var o;\n\n  src += '// producer: OpenJSCAD Compatibility (' + version + ') STL ASCII Importer\\n';\n  src += '// date: ' + (new Date()) + '\\n';\n  src += '// source: ' + fn + '\\n';\n  src += '\\n';\n  src += 'function main() { return union(\\n';\n    // -- Find all models\n  var objects = stl.split('endsolid');\n  src += '// objects: ' + (objects.length - 1) + '\\n';\n\n  for (o = 1; o < objects.length; o++) {\n        // -- Translation: a non-greedy regex for facet {...} endloop pattern\n    var patt = /\\bfacet[\\s\\S]*?endloop/mgi;\n    var vertices = [];\n    var triangles = [];\n    var normals = [];\n    var vertexIndex = 0;\n    var err = 0;\n\n    var match = stl.match(patt);\n    if (match == null) { continue }\n    for (var i = 0; i < match.length; i++) {\n            // if(converted%100==0) status('stl to jscad: converted '+converted+' out of '+match.length+ ' facets');\n            // -- 1 normal with 3 numbers, 3 different vertex objects each with 3 numbers:\n            // var vpatt = /\\bfacet\\s+normal\\s+(-?\\d+\\.?\\d*)\\s+(-?\\d+\\.?\\d*)\\s+(-?\\d+\\.?\\d*)\\s*outer\\s+loop\\s+vertex\\s+(-?\\d+\\.?\\d*)\\s+(-?\\d+\\.?\\d*)\\s+(-?\\d+\\.?\\d*)\\s*vertex\\s+(-?\\d+\\.?\\d*)\\s+(-?\\d+\\.?\\d*)\\s+(-?\\d+\\.?\\d*)\\s*vertex\\s+(-?\\d+\\.?\\d*)\\s+(-?\\d+\\.?\\d*)\\s+(-?\\d+\\.?\\d*)/mgi;\n                                         // (-?\\d+\\.?\\d*) -1.21223\n                                         // (-?\\d+\\.?\\d*[Ee]?[-+]?\\d*)\n      var vpatt = /\\bfacet\\s+normal\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+outer\\s+loop\\s+vertex\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+vertex\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+vertex\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)\\s*/mgi;\n      var v = vpatt.exec(match[i]);\n      if (v == null) { continue }\n      if (v.length != 13) {\n        echo('Failed to parse ' + match[i]);\n        break\n      }\n      var skip = 0;\n      for (var k = 0; k < v.length; k++) {\n        if (v[k] == 'NaN') {\n          echo('bad normal or triangle vertice #' + converted + ' ' + k + \": '\" + v[k] + \"', skipped\");\n          skip++;\n        }\n      }\n      err += skip;\n      if (skip) {\n        continue\n      }\n      if (0 && skip) {\n        var j = 1 + 3;\n        var v1 = []; v1.push(parseFloat(v[j++])); v1.push(parseFloat(v[j++])); v1.push(parseFloat(v[j++]));\n        var v2 = []; v2.push(parseFloat(v[j++])); v2.push(parseFloat(v[j++])); v2.push(parseFloat(v[j++]));\n        var v3 = []; v3.push(parseFloat(v[j++])); v3.push(parseFloat(v[j++])); v3.push(parseFloat(v[j++]));\n        echo('recalculate norm', v1, v2, v3);\n        var w1 = new _jscad_csg.CSG.Vector3D(v1);\n        var w2 = new _jscad_csg.CSG.Vector3D(v2);\n        var w3 = new _jscad_csg.CSG.Vector3D(v3);\n        var _u = w1.minus(w3);\n        var _v = w1.minus(w2);\n        var norm = _u.cross(_v).unit();\n        j = 1;\n        v[j++] = norm._x;\n        v[j++] = norm._y;\n        v[j++] = norm._z;\n        skip = false;\n      }\n      var j = 1;\n      var no = []; no.push(parseFloat(v[j++])); no.push(parseFloat(v[j++])); no.push(parseFloat(v[j++]));\n      var v1 = []; v1.push(parseFloat(v[j++])); v1.push(parseFloat(v[j++])); v1.push(parseFloat(v[j++]));\n      var v2 = []; v2.push(parseFloat(v[j++])); v2.push(parseFloat(v[j++])); v2.push(parseFloat(v[j++]));\n      var v3 = []; v3.push(parseFloat(v[j++])); v3.push(parseFloat(v[j++])); v3.push(parseFloat(v[j++]));\n      var triangle = []; triangle.push(vertexIndex++); triangle.push(vertexIndex++); triangle.push(vertexIndex++);\n\n            // -- Add 3 vertices for every triangle\n            //    TODO: OPTIMIZE: Check if the vertex is already in the array, if it is just reuse the index\n      if (skip == 0) {  // checking cw vs ccw\n               // E1 = B - A\n               // E2 = C - A\n               // test = dot( Normal, cross( E1, E2 ) )\n               // test > 0: cw, test < 0: ccw\n        var w1 = new _jscad_csg.CSG.Vector3D(v1);\n        var w2 = new _jscad_csg.CSG.Vector3D(v2);\n        var w3 = new _jscad_csg.CSG.Vector3D(v3);\n        var e1 = w2.minus(w1);\n        var e2 = w3.minus(w1);\n        var t = new _jscad_csg.CSG.Vector3D(no).dot(e1.cross(e2));\n        if (t > 0) {      // 1,2,3 -> 3,2,1\n          var tmp = v3;\n          v3 = v1;\n          v1 = tmp;\n        }\n      }\n      vertices.push(v1);\n      vertices.push(v2);\n      vertices.push(v3);\n      normals.push(no);\n      triangles.push(triangle);\n      converted++;\n    }\n    if (n++) { src += ','; }\n    if (err) { src += '// WARNING: import errors: ' + err + ' (some triangles might be misaligned or missing)\\n'; }\n    src += '// object #' + (o) + ': triangles: ' + match.length + '\\n';\n    src += vt2jscad(vertices, triangles, normals);\n  }\n  src += '); }\\n';\n  return src\n}\n\n// BinaryReader\n// Refactored by Vjeux <vjeuxx@gmail.com>\n// http://blog.vjeux.com/2010/javascript/javascript-binary-reader.html\n\n// Original\n// + Jonas Raoni Soares Silva\n// @ http://jsfromhell.com/classes/binary-parser [rev. #1]\n\nfunction BinaryReader (data) {\n  this._buffer = data;\n  this._pos = 0;\n}\n\nBinaryReader.prototype = {\n\n   /* Public */\n\n  readInt8: function () { return this._decodeInt(8, true) },\n  readUInt8: function () { return this._decodeInt(8, false) },\n  readInt16: function () { return this._decodeInt(16, true) },\n  readUInt16: function () { return this._decodeInt(16, false) },\n  readInt32: function () { return this._decodeInt(32, true) },\n  readUInt32: function () { return this._decodeInt(32, false) },\n\n  readFloat: function () { return this._decodeFloat(23, 8) },\n  readDouble: function () { return this._decodeFloat(52, 11) },\n\n  readChar: function () { return this.readString(1) },\n  readString: function (length) {\n    this._checkSize(length * 8);\n    var result = this._buffer.substr(this._pos, length);\n    this._pos += length;\n    return result\n  },\n\n  seek: function (pos) {\n    this._pos = pos;\n    this._checkSize(0);\n  },\n\n  getPosition: function () {\n    return this._pos\n  },\n\n  getSize: function () {\n    return this._buffer.length\n  },\n\n   /* Private */\n\n  _decodeFloat: function (precisionBits, exponentBits) {\n    var this$1 = this;\n\n    var length = precisionBits + exponentBits + 1;\n    var size = length >> 3;\n    this._checkSize(length);\n\n    var bias = Math.pow(2, exponentBits - 1) - 1;\n    var signal = this._readBits(precisionBits + exponentBits, 1, size);\n    var exponent = this._readBits(precisionBits, exponentBits, size);\n    var significand = 0;\n    var divisor = 2;\n    var curByte = 0; // length + (-precisionBits >> 3) - 1;\n    do {\n      var byteValue = this$1._readByte(++curByte, size);\n      var startBit = precisionBits % 8 || 8;\n      var mask = 1 << startBit;\n      while (mask >>= 1) {\n        if (byteValue & mask) {\n          significand += 1 / divisor;\n        }\n        divisor *= 2;\n      }\n    } while (precisionBits -= startBit)\n\n    this._pos += size;\n\n    return exponent == (bias << 1) + 1 ? significand ? NaN : signal ? -Infinity : +Infinity\n         : (1 + signal * -2) * (exponent || significand ? !exponent ? Math.pow(2, -bias + 1) * significand\n         : Math.pow(2, exponent - bias) * (1 + significand) : 0)\n  },\n\n  _decodeInt: function (bits, signed) {\n    var x = this._readBits(0, bits, bits / 8), max = Math.pow(2, bits);\n    var result = signed && x >= max / 2 ? x - max : x;\n\n    this._pos += bits / 8;\n    return result\n  },\n\n   // shl fix: Henri Torgemane ~1996 (compressed by Jonas Raoni)\n  _shl: function (a, b) {\n    for (++b; --b; a = ((a %= 0x7fffffff + 1) & 0x40000000) == 0x40000000 ? a * 2 : (a - 0x40000000) * 2 + 0x7fffffff + 1){  }\n    return a\n  },\n\n  _readByte: function (i, size) {\n    return this._buffer.charCodeAt(this._pos + size - i - 1) & 0xff\n  },\n\n  _readBits: function (start, length, size) {\n    var this$1 = this;\n\n    var offsetLeft = (start + length) % 8;\n    var offsetRight = start % 8;\n    var curByte = size - (start >> 3) - 1;\n    var lastByte = size + (-(start + length) >> 3);\n    var diff = curByte - lastByte;\n\n    var sum = (this._readByte(curByte, size) >> offsetRight) & ((1 << (diff ? 8 - offsetRight : length)) - 1);\n\n    if (diff && offsetLeft) {\n      sum += (this._readByte(lastByte++, size) & ((1 << offsetLeft) - 1)) << (diff-- << 3) - offsetRight;\n    }\n\n    while (diff) {\n      sum += this$1._shl(this$1._readByte(lastByte++, size), (diff-- << 3) - offsetRight);\n    }\n\n    return sum\n  },\n\n  _checkSize: function (neededBits) {\n    if (!(this._pos + Math.ceil(neededBits / 8) < this._buffer.length)) {\n         // throw new Error(\"Index out of bound\");\n    }\n  }\n};\n\n/*\n## License\n\nCopyright (c) 2016 Z3 Development https://github.com/z3dev\n\nAll code released under MIT license\n\nNotes:\n1) All functions extend other objects in order to maintain namespaces.\n*/\nvar sax$3 = require('sax');\n\n// //////////////////////////////////////////\n//\n// SVG is a language for describing two-dimensional graphics in XML\n// See http://www.w3.org/TR/SVG/Overview.html\n//\n// //////////////////////////////////////////\n\n// standard pixel size at arms length on 90dpi screens\nvar cssPxUnit = 0.2822222;\n\n// units for converting CSS2 points/length, i.e. CSS2 value / pxPmm\nsax$3.SAXParser.prototype.pxPmm = 1 / 0.2822222;         // used for scaling SVG coordinates(PX) to CAG coordinates(MM)\nvar inchMM$1 = 1 / (1 / 0.039370);     // used for scaling SVG coordinates(IN) to CAG coordinates(MM)\nvar ptMM = 1 / (1 / 0.039370 / 72);    // used for scaling SVG coordinates(IN) to CAG coordinates(MM)\nvar pcMM = 1 / (1 / 0.039370 / 72 * 12); // used for scaling SVG coordinates(PC) to CAG coordinates(MM)\n\n// standard SVG named colors (sRGB values)\nvar svgColors = {\n  'aliceblue': [240, 248, 255],\n  'antiquewhite': [250, 235, 215],\n  'aqua': [ 0, 255, 255],\n  'aquamarine': [127, 255, 212],\n  'azure': [240, 255, 255],\n  'beige': [245, 245, 220],\n  'bisque': [255, 228, 196],\n  'black': [ 0, 0, 0],\n  'blanchedalmond': [255, 235, 205],\n  'blue': [ 0, 0, 255],\n  'blueviolet': [138, 43, 226],\n  'brown': [165, 42, 42],\n  'burlywood': [222, 184, 135],\n  'cadetblue': [ 95, 158, 160],\n  'chartreuse': [127, 255, 0],\n  'chocolate': [210, 105, 30],\n  'coral': [255, 127, 80],\n  'cornflowerblue': [100, 149, 237],\n  'cornsilk': [255, 248, 220],\n  'crimson': [220, 20, 60],\n  'cyan': [ 0, 255, 255],\n  'darkblue': [ 0, 0, 139],\n  'darkcyan': [ 0, 139, 139],\n  'darkgoldenrod': [184, 134, 11],\n  'darkgray': [169, 169, 169],\n  'darkgreen': [ 0, 100, 0],\n  'darkgrey': [169, 169, 169],\n  'darkkhaki': [189, 183, 107],\n  'darkmagenta': [139, 0, 139],\n  'darkolivegreen': [ 85, 107, 47],\n  'darkorange': [255, 140, 0],\n  'darkorchid': [153, 50, 204],\n  'darkred': [139, 0, 0],\n  'darksalmon': [233, 150, 122],\n  'darkseagreen': [143, 188, 143],\n  'darkslateblue': [ 72, 61, 139],\n  'darkslategray': [ 47, 79, 79],\n  'darkslategrey': [ 47, 79, 79],\n  'darkturquoise': [ 0, 206, 209],\n  'darkviolet': [148, 0, 211],\n  'deeppink': [255, 20, 147],\n  'deepskyblue': [ 0, 191, 255],\n  'dimgray': [105, 105, 105],\n  'dimgrey': [105, 105, 105],\n  'dodgerblue': [ 30, 144, 255],\n  'firebrick': [178, 34, 34],\n  'floralwhite': [255, 250, 240],\n  'forestgreen': [ 34, 139, 34],\n  'fuchsia': [255, 0, 255],\n  'gainsboro': [220, 220, 220],\n  'ghostwhite': [248, 248, 255],\n  'gold': [255, 215, 0],\n  'goldenrod': [218, 165, 32],\n  'gray': [128, 128, 128],\n  'grey': [128, 128, 128],\n  'green': [ 0, 128, 0],\n  'greenyellow': [173, 255, 47],\n  'honeydew': [240, 255, 240],\n  'hotpink': [255, 105, 180],\n  'indianred': [205, 92, 92],\n  'indigo': [ 75, 0, 130],\n  'ivory': [255, 255, 240],\n  'khaki': [240, 230, 140],\n  'lavender': [230, 230, 250],\n  'lavenderblush': [255, 240, 245],\n  'lawngreen': [124, 252, 0],\n  'lemonchiffon': [255, 250, 205],\n  'lightblue': [173, 216, 230],\n  'lightcoral': [240, 128, 128],\n  'lightcyan': [224, 255, 255],\n  'lightgoldenrodyellow': [250, 250, 210],\n  'lightgray': [211, 211, 211],\n  'lightgreen': [144, 238, 144],\n  'lightgrey': [211, 211, 211],\n  'lightpink': [255, 182, 193],\n  'lightsalmon': [255, 160, 122],\n  'lightseagreen': [ 32, 178, 170],\n  'lightskyblue': [135, 206, 250],\n  'lightslategray': [119, 136, 153],\n  'lightslategrey': [119, 136, 153],\n  'lightsteelblue': [176, 196, 222],\n  'lightyellow': [255, 255, 224],\n  'lime': [ 0, 255, 0],\n  'limegreen': [ 50, 205, 50],\n  'linen': [250, 240, 230],\n  'magenta': [255, 0, 255],\n  'maroon': [128, 0, 0],\n  'mediumaquamarine': [102, 205, 170],\n  'mediumblue': [ 0, 0, 205],\n  'mediumorchid': [186, 85, 211],\n  'mediumpurple': [147, 112, 219],\n  'mediumseagreen': [ 60, 179, 113],\n  'mediumslateblue': [123, 104, 238],\n  'mediumspringgreen': [ 0, 250, 154],\n  'mediumturquoise': [ 72, 209, 204],\n  'mediumvioletred': [199, 21, 133],\n  'midnightblue': [ 25, 25, 112],\n  'mintcream': [245, 255, 250],\n  'mistyrose': [255, 228, 225],\n  'moccasin': [255, 228, 181],\n  'navajowhite': [255, 222, 173],\n  'navy': [ 0, 0, 128],\n  'oldlace': [253, 245, 230],\n  'olive': [128, 128, 0],\n  'olivedrab': [107, 142, 35],\n  'orange': [255, 165, 0],\n  'orangered': [255, 69, 0],\n  'orchid': [218, 112, 214],\n  'palegoldenrod': [238, 232, 170],\n  'palegreen': [152, 251, 152],\n  'paleturquoise': [175, 238, 238],\n  'palevioletred': [219, 112, 147],\n  'papayawhip': [255, 239, 213],\n  'peachpuff': [255, 218, 185],\n  'peru': [205, 133, 63],\n  'pink': [255, 192, 203],\n  'plum': [221, 160, 221],\n  'powderblue': [176, 224, 230],\n  'purple': [128, 0, 128],\n  'red': [255, 0, 0],\n  'rosybrown': [188, 143, 143],\n  'royalblue': [ 65, 105, 225],\n  'saddlebrown': [139, 69, 19],\n  'salmon': [250, 128, 114],\n  'sandybrown': [244, 164, 96],\n  'seagreen': [ 46, 139, 87],\n  'seashell': [255, 245, 238],\n  'sienna': [160, 82, 45],\n  'silver': [192, 192, 192],\n  'skyblue': [135, 206, 235],\n  'slateblue': [106, 90, 205],\n  'slategray': [112, 128, 144],\n  'slategrey': [112, 128, 144],\n  'snow': [255, 250, 250],\n  'springgreen': [ 0, 255, 127],\n  'steelblue': [ 70, 130, 180],\n  'tan': [210, 180, 140],\n  'teal': [ 0, 128, 128],\n  'thistle': [216, 191, 216],\n  'tomato': [255, 99, 71],\n  'turquoise': [ 64, 224, 208],\n  'violet': [238, 130, 238],\n  'wheat': [245, 222, 179],\n  'white': [255, 255, 255],\n  'whitesmoke': [245, 245, 245],\n  'yellow': [255, 255, 0],\n  'yellowgreen': [154, 205, 50]\n};\n\n// Calculate the CAG length/size from the given SVG value (float)\nsax$3.SAXParser.prototype.svg2cagX = function (v) {\n  return (v / this.svgUnitsPmm[0])\n};\n\nsax$3.SAXParser.prototype.svg2cagY = function (v) {\n  return 0 - (v / this.svgUnitsPmm[1])\n};\n\n// Calculate the CAG length/size from the given CSS value (string)\nsax$3.SAXParser.prototype.cagLengthX = function (css) {\n  if (css.indexOf('%') < 0) {\n    return this.css2cag(css, this.svgUnitsPmm[0])\n  }\n// calculate the units as a percentage of the width\n  var v = parseFloat(css); // number part\n  if (isNaN(v)) { return 0.0 }\n  if (v == 0) { return v }\n  v = (v / 100) * this.svgUnitsX;\n// convert the units to mm\n  v = v / this.svgUnitsPmm[0];\n  // return v;\n  return Math.round(v / -100000) * -100000\n};\n\nsax$3.SAXParser.prototype.cagLengthY = function (css) {\n  if (css.indexOf('%') < 0) {\n    return this.css2cag(css, this.svgUnitsPmm[1])\n  }\n// calculate the units as a percentage of the width\n  var v = parseFloat(css); // number part\n  if (isNaN(v)) { return 0.0 }\n  if (v == 0) { return v }\n  v = (v / 100) * this.svgUnitsY;\n// convert the units to mm\n  v = v / this.svgUnitsPmm[1];\n  // return v;\n  return Math.round(v / -100000) * -100000\n};\n\nsax$3.SAXParser.prototype.cagLengthP = function (css) {\n  if (css.indexOf('%') < 0) {\n    return this.css2cag(css, this.svgUnitsPmm[1])\n  }\n// calculate the units as a percentage of the viewport\n  var v = parseFloat(css); // number part\n  if (isNaN(v)) { return 0.0 }\n  if (v == 0) { return v }\n  v = (v / 100) * this.svgUnitsV;\n// convert the units to mm\n  v = v / this.svgUnitsPmm[0]; // FIXME should this use X units?\n  return v\n};\n\nsax$3.SAXParser.prototype.css2cag = function (css, unit) {\n// console.log('css2cag('+css+','+unit+')');\n  var v = parseFloat(css); // number part\n  if (isNaN(v)) { return 0.0 }\n  if (v == 0) { return v }\n  if (css.search(/EM/i) > 0) {\n    v = v; // font size\n  } else\n  if (css.search(/EX/i) > 0) {\n    v = v; // x-height of font\n  } else\n  if (css.search(/MM/i) > 0) {\n    v = v; // absolute millimeters\n  } else\n  if (css.search(/CM/i) > 0) {\n    v = (v * 10); // absolute centimeters > millimeters\n  } else\n  if (css.search(/IN/i) > 0) {\n    v = (v / inchMM$1); // absolute inches > millimeters\n  } else\n  if (css.search(/PT/i) > 0) {\n    v = (v / ptMM);   // absolute points > millimeters\n  } else\n  if (css.search(/PC/i) > 0) {\n    v = (v / pcMM);   // absolute picas > millimeters\n  } else {\n    v = (v / unit);        // absolute pixels(units) > millimeters\n  }\n// console.log('v ('+v+')');\n  return v\n};\n\n// convert the SVG color specification to CAG RGB\nsax$3.SAXParser.prototype.cagColor = function (value) {\n//  var rgb = [0,0,0]; // default is black\n  var rgb = null;\n  value = value.toLowerCase();\n  if (value in svgColors) {\n    rgb = svgColors[value];\n    rgb = [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255]; // converted to 0.0-1.0 values\n  } else {\n    if (value[0] == '#') {\n      if (value.length == 4) {\n      // short HEX specification\n        value = '#' + value[1] + value[1] + value[2] + value[2] + value[3] + value[3];\n      }\n      if (value.length == 7) {\n      // HEX specification\n        rgb = [ parseInt('0x' + value.slice(1, 3)) / 255,\n          parseInt('0x' + value.slice(3, 5)) / 255,\n          parseInt('0x' + value.slice(5, 7)) / 255 ];\n      }\n    } else {\n      var pat = /rgb\\(.+,.+,.+\\)/;\n      var s = pat.exec(value);\n      if (s !== null) {\n      // RGB specification\n        s = s[0];\n        s = s.slice(s.indexOf('(') + 1, s.indexOf(')'));\n        rgb = s.split(',');\n        if (s.indexOf('%') > 0) {\n        // rgb(#%,#%,#%)\n          rgb = [parseInt(rgb[0]), parseInt(rgb[1]), parseInt(rgb[2])];\n          rgb = [rgb[0] / 100, rgb[1] / 100, rgb[2] / 100]; // converted to 0.0-1.0 values\n        } else {\n        // rgb(#,#,#)\n          rgb = [parseInt(rgb[0]), parseInt(rgb[1]), parseInt(rgb[2])];\n          rgb = [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255]; // converted to 0.0-1.0 values\n        }\n      }\n    }\n  }\n  return rgb\n};\n\nsax$3.SAXParser.prototype.cssStyle = function (element, name) {\n  if ('STYLE' in element) {\n    var list = element.STYLE;\n    var pat = name + '\\\\s*:\\\\s*\\\\S+;';\n    var exp = new RegExp(pat, 'i');\n    var v = exp.exec(list);\n    if (v !== null) {\n      v = v[0];\n      var i = v.length;\n      while (v[i] != ' ') { i--; }\n      v = v.slice(i + 1, v.length - 1);\n      return v\n    }\n  }\n  return null\n};\n\nsax$3.SAXParser.prototype.svgCore = function (obj, element) {\n  if ('ID' in element) { obj.id = element.ID; }\n};\n\nsax$3.SAXParser.prototype.svgPresentation = function (obj, element) {\n// presentation attributes for all\n  if ('DISPLAY' in element) { obj.visible = element.DISPLAY; }\n// presentation attributes for solids\n  if ('COLOR' in element) { obj.fill = this.cagColor(element.COLOR); }\n  if ('OPACITY' in element) { obj.opacity = element.OPACITY; }\n  if ('FILL' in element) {\n    obj.fill = this.cagColor(element.FILL);\n  } else {\n    var s = this.cssStyle(element, 'fill');\n    if (s !== null) {\n      obj.fill = this.cagColor(s);\n    }\n  }\n  if ('FILL-OPACITY' in element) { obj.opacity = element['FILL-OPACITY']; }\n// presentation attributes for lines\n  if ('STROKE-WIDTH' in element) {\n    obj.strokeWidth = element['STROKE-WIDTH'];\n  } else {\n    var sw = this.cssStyle(element, 'stroke-width');\n    if (sw !== null) {\n      obj.strokeWidth = sw;\n    }\n  }\n  if ('STROKE' in element) {\n    obj.stroke = this.cagColor(element.STROKE);\n  } else {\n    var s = this.cssStyle(element, 'stroke');\n    if (s !== null) {\n      obj.stroke = this.cagColor(s);\n    }\n  }\n  if ('STROKE-OPACITY' in element) { obj.strokeOpacity = element['STROKE-OPACITY']; }\n};\n\nsax$3.SAXParser.prototype.svgTransforms = function (cag, element) {\n  var list = null;\n  if ('TRANSFORM' in element) {\n    list = element.TRANSFORM;\n  } else {\n    var s = this.cssStyle(element, 'transform');\n    if (s !== null) { list = s; }\n  }\n  if (list !== null) {\n    cag.transforms = [];\n    var exp = new RegExp('\\\\w+\\\\(.+\\\\)', 'i');\n    var v = exp.exec(list);\n    while (v !== null) {\n      var s = exp.lastIndex;\n      var e = list.indexOf(')') + 1;\n      var t = list.slice(s, e); // the transform\n      t = t.trim();\n    // add the transform to the CAG\n    // which are applied in the order provided\n      var n = t.slice(0, t.indexOf('('));\n      var a = t.slice(t.indexOf('(') + 1, t.indexOf(')')).trim();\n      if (a.indexOf(',') > 0) { a = a.split(','); } else { a = a.split(' '); }\n      switch (n) {\n        case 'translate':\n          var o = {translate: [a[0], a[1]]};\n          cag.transforms.push(o);\n          break\n        case 'scale':\n          if (a.length == 1) { a.push(a[0]); } // as per SVG\n          var o = {scale: [a[0], a[1]]};\n          cag.transforms.push(o);\n          break\n        case 'rotate':\n          var o = {rotate: a};\n          cag.transforms.push(o);\n          break\n        // case 'matrix':\n        // case 'skewX':\n        // case 'skewY':\n        default:\n          break\n      }\n    // shorten the list and continue\n      list = list.slice(e, list.length);\n      v = exp.exec(list);\n    }\n  }\n};\n\nsax$3.SAXParser.prototype.svgSvg = function (element) {\n// default SVG with no viewport\n  var obj = {type: 'svg', x: 0, y: 0, width: '100%', height: '100%', strokeWidth: '1'};\n\n// default units per mm\n  obj.unitsPmm = [this.pxPmm, this.pxPmm];\n\n  if ('PXPMM' in element) {\n  // WOW! a supplied value for pixels per milimeter!!!\n    obj.pxPmm = element.PXPMM;\n    obj.unitsPmm = [obj.pxPmm, obj.pxPmm];\n  }\n  if ('WIDTH' in element) { obj.width = element.WIDTH; }\n  if ('HEIGHT' in element) { obj.height = element.HEIGHT; }\n  if ('VIEWBOX' in element) {\n    var list = element.VIEWBOX.trim();\n    var exp = new RegExp('([\\\\d\\\\.\\\\-]+)[\\\\s,]+([\\\\d\\\\.\\\\-]+)[\\\\s,]+([\\\\d\\\\.\\\\-]+)[\\\\s,]+([\\\\d\\\\.\\\\-]+)', 'i');\n    var v = exp.exec(list);\n    if (v !== null) {\n      obj.viewX = parseFloat(v[1]);\n      obj.viewY = parseFloat(v[2]);\n      obj.viewW = parseFloat(v[3]);\n      obj.viewH = parseFloat(v[4]);\n    }\n  // apply the viewbox\n    if (obj.width.indexOf('%') < 0) {\n    // calculate a scaling from width and viewW\n      var s = this.css2cag(obj.width, this.pxPmm); // width in millimeters\n      s = obj.viewW / s;\n    // scale the default units\n      // obj.unitsPmm[0] = obj.unitsPmm[0] * s;\n      obj.unitsPmm[0] = s;\n    } else {\n    // scale the default units by the width (%)\n      var u = obj.unitsPmm[0] * (parseFloat(obj.width) / 100.0);\n      obj.unitsPmm[0] = u;\n    }\n    if (obj.height.indexOf('%') < 0) {\n    // calculate a scaling from height and viewH\n      var s = this.css2cag(obj.height, this.pxPmm); // height in millimeters\n      s = obj.viewH / s;\n    // scale the default units\n      // obj.unitsPmm[1] = obj.unitsPmm[1] * s;\n      obj.unitsPmm[1] = s;\n    } else {\n    // scale the default units by the width (%)\n      var u = obj.unitsPmm[1] * (parseFloat(obj.height) / 100.0);\n      obj.unitsPmm[1] = u;\n    }\n  } else {\n    obj.viewX = 0;\n    obj.viewY = 0;\n    obj.viewW = 1920 / obj.unitsPmm[0]; // average screen size / pixels per unit\n    obj.viewH = 1080 / obj.unitsPmm[1]; // average screen size / pixels per unit\n  }\n  obj.viewP = Math.sqrt((obj.viewW * obj.viewW) + (obj.viewH * obj.viewH)) / Math.SQRT2;\n\n// core attributes\n  this.svgCore(obj, element);\n// presentation attributes\n  this.svgPresentation(obj, element);\n\n  obj.objects = [];\n  // console.log(JSON.stringify(obj));\n  return obj\n};\n\nsax$3.SAXParser.prototype.svgEllipse = function (element) {\n  var obj = {type: 'ellipse', cx: '0', cy: '0', rx: '0', ry: '0'};\n  if ('CX' in element) { obj.cx = element.CX; }\n  if ('CY' in element) { obj.cy = element.CY; }\n  if ('RX' in element) { obj.rx = element.RX; }\n  if ('RY' in element) { obj.ry = element.RY; }\n// transforms\n  this.svgTransforms(obj, element);\n// core attributes\n  this.svgCore(obj, element);\n// presentation attributes\n  this.svgPresentation(obj, element);\n  return obj\n};\n\nsax$3.SAXParser.prototype.svgLine = function (element) {\n  var obj = {type: 'line', x1: '0', y1: '0', x2: '0', y2: '0'};\n  if ('X1' in element) { obj.x1 = element.X1; }\n  if ('Y1' in element) { obj.y1 = element.Y1; }\n  if ('X2' in element) { obj.x2 = element.X2; }\n  if ('Y2' in element) { obj.y2 = element.Y2; }\n// transforms\n  this.svgTransforms(obj, element);\n// core attributes\n  this.svgCore(obj, element);\n// presentation attributes\n  this.svgPresentation(obj, element);\n  return obj\n};\n\nsax$3.SAXParser.prototype.svgListOfPoints = function (list) {\n  var points = [];\n  var exp = new RegExp('([\\\\d\\\\-\\\\+\\\\.]+)[\\\\s,]+([\\\\d\\\\-\\\\+\\\\.]+)[\\\\s,]*', 'i');\n  list = list.trim();\n  var v = exp.exec(list);\n  while (v !== null) {\n    var point = v[0];\n    var next = exp.lastIndex + point.length;\n    point = {x: v[1], y: v[2]};\n    points.push(point);\n    list = list.slice(next, list.length);\n    v = exp.exec(list);\n  }\n  return points\n};\n\nsax$3.SAXParser.prototype.svgPolyline = function (element) {\n  var obj = {type: 'polyline'};\n// transforms\n  this.svgTransforms(obj, element);\n// core attributes\n  this.svgCore(obj, element);\n// presentation attributes\n  this.svgPresentation(obj, element);\n\n  if ('POINTS' in element) {\n    obj.points = this.svgListOfPoints(element.POINTS);\n  }\n  return obj\n};\n\nsax$3.SAXParser.prototype.svgPolygon = function (element) {\n  var obj = {type: 'polygon'};\n// transforms\n  this.svgTransforms(obj, element);\n// core attributes\n  this.svgCore(obj, element);\n// presentation attributes\n  this.svgPresentation(obj, element);\n\n  if ('POINTS' in element) {\n    obj.points = this.svgListOfPoints(element.POINTS);\n  }\n  return obj\n};\n\nsax$3.SAXParser.prototype.svgRect = function (element) {\n  var obj = {type: 'rect', x: '0', y: '0', rx: '0', ry: '0', width: '0', height: '0'};\n\n  if ('X' in element) { obj.x = element.X; }\n  if ('Y' in element) { obj.y = element.Y; }\n  if ('RX' in element) {\n    obj.rx = element.RX;\n    if (!('RY' in element)) { obj.ry = obj.rx; } // by SVG specification\n  }\n  if ('RY' in element) {\n    obj.ry = element.RY;\n    if (!('RX' in element)) { obj.rx = obj.ry; } // by SVG specification\n  }\n  if (obj.rx != obj.ry) {\n    console.log('Warning: Unsupported RECT with RX and RY radius');\n  }\n  if ('WIDTH' in element) { obj.width = element.WIDTH; }\n  if ('HEIGHT' in element) { obj.height = element.HEIGHT; }\n// transforms\n  this.svgTransforms(obj, element);\n// core attributes\n  this.svgCore(obj, element);\n// presentation attributes\n  this.svgPresentation(obj, element);\n  return obj\n};\n\nsax$3.SAXParser.prototype.svgCircle = function (element) {\n  var obj = {type: 'circle', x: '0', y: '0', radius: '0'};\n\n  if ('CX' in element) { obj.x = element.CX; }\n  if ('CY' in element) { obj.y = element.CY; }\n  if ('R' in element) { obj.radius = element.R; }\n// transforms\n  this.svgTransforms(obj, element);\n// core attributes\n  this.svgCore(obj, element);\n// presentation attributes\n  this.svgPresentation(obj, element);\n  return obj\n};\n\nsax$3.SAXParser.prototype.svgGroup = function (element) {\n  var obj = {type: 'group'};\n// transforms\n  this.svgTransforms(obj, element);\n// core attributes\n  this.svgCore(obj, element);\n// presentation attributes\n  this.svgPresentation(obj, element);\n\n  obj.objects = [];\n  return obj\n};\n\n//\n// Convert the PATH element into object representation\n//\nsax$3.SAXParser.prototype.svgPath = function (element) {\n  var obj = {type: 'path'};\n// transforms\n  this.svgTransforms(obj, element);\n// core attributes\n  this.svgCore(obj, element);\n// presentation attributes\n  // this.svgPresentation(obj,element);\n\n  obj.commands = [];\n  if ('D' in element) {\n    var co = null; // current command\n    var bf = '';\n\n    var i = 0;\n    var l = element.D.length;\n    while (i < l) {\n      var c = element.D[i];\n      switch (c) {\n      // numbers\n      // FIXME support E notation numbers\n        case '-':\n          if (bf.length > 0) {\n            co.p.push(bf);\n            bf = '';\n          }\n          bf += c;\n          break\n        case '.':\n          if (bf.length > 0) {\n            if (bf.indexOf('.') >= 0) {\n              co.p.push(bf);\n              bf = '';\n            }\n          }\n          bf += c;\n          break\n        case '0':\n        case '1':\n        case '2':\n        case '3':\n        case '4':\n        case '5':\n        case '6':\n        case '7':\n        case '8':\n        case '9':\n          bf += c;\n          break\n      // commands\n        case 'a':\n        case 'A':\n        case 'c':\n        case 'C':\n        case 'h':\n        case 'H':\n        case 'l':\n        case 'L':\n        case 'v':\n        case 'V':\n        case 'm':\n        case 'M':\n        case 'q':\n        case 'Q':\n        case 's':\n        case 'S':\n        case 't':\n        case 'T':\n        case 'z':\n        case 'Z':\n          if (co !== null) {\n            if (bf.length > 0) {\n              co.p.push(bf);\n              bf = '';\n            }\n            obj.commands.push(co);\n          }\n          co = {c: c, p: []};\n          break\n      // white space\n        case ',':\n        case ' ':\n        case '\\n':\n          if (co !== null) {\n            if (bf.length > 0) {\n              co.p.push(bf);\n              bf = '';\n            }\n          }\n          break\n        default:\n          break\n      }\n      i++;\n    }\n    if (i == l && co !== null) {\n      if (bf.length > 0) {\n        co.p.push(bf);\n      }\n      obj.commands.push(co);\n    }\n  }\n  return obj\n};\n\n// generate GROUP with attributes from USE element\n// - except X,Y,HEIGHT,WIDTH,XLINK:HREF\n// - append translate(x,y) if X,Y available\n// deep clone the referenced OBJECT and add to group\n// - clone using JSON.parse(JSON.stringify(obj))\nsax$3.SAXParser.prototype.svgUse = function (element) {\n  var obj = {type: 'group'};\n// transforms\n  this.svgTransforms(obj, element);\n// core attributes\n  this.svgCore(obj, element);\n// presentation attributes\n  this.svgPresentation(obj, element);\n\n  if ('X' in element && 'Y' in element) {\n    if (!('transforms' in obj)) { obj.transforms = []; }\n    var o = {translate: [element.X, element.Y]};\n    obj.transforms.push(o);\n  }\n\n  obj.objects = [];\n  if ('XLINK:HREF' in element) {\n  // lookup the named object\n    var ref = element['XLINK:HREF'];\n    if (ref[0] == '#') { ref = ref.slice(1, ref.length); }\n    if (this.svgObjects[ref] !== undefined) {\n      ref = this.svgObjects[ref];\n      ref = JSON.parse(JSON.stringify(ref));\n      obj.objects.push(ref);\n    }\n  }\n  return obj\n};\n\n// processing controls\nsax$3.SAXParser.prototype.svgObjects = [];    // named objects\nsax$3.SAXParser.prototype.svgGroups = [];    // groups of objects\nsax$3.SAXParser.prototype.svgInDefs = false; // svg DEFS element in process\nsax$3.SAXParser.prototype.svgObj = null;  // svg in object form\nsax$3.SAXParser.prototype.svgUnitsPmm = [1, 1];\nsax$3.SAXParser.prototype.svgUnitsPer = 0;\n\nsax$3.SAXParser.prototype.reflect = function (x, y, px, py) {\n  var ox = x - px;\n  var oy = y - py;\n  if (x == px && y == px) { return [x, y] }\n  if (x == px) { return [x, py + (-oy)] }\n  if (y == py) { return [px + (-ox), y] }\n  return [px + (-ox), py + (-oy)]\n};\n\n// Return the value for the given attribute from the group hiearchy\nsax$3.SAXParser.prototype.groupValue = function (name) {\n  var this$1 = this;\n\n  var i = this.svgGroups.length;\n  while (i > 0) {\n    var g = this$1.svgGroups[i - 1];\n    if (name in g) {\n      return g[name]\n    }\n    i--;\n  }\n  return null\n};\n\nsax$3.SAXParser.prototype.codify = function (group) {\n  var this$1 = this;\n\n  var level = this.svgGroups.length;\n// add this group to the heiarchy\n  this.svgGroups.push(group);\n// create an indent for the generated code\n  var indent = '  ';\n  var i = level;\n  while (i > 0) {\n    indent += '  ';\n    i--;\n  }\n// pre-code\n  var code = '';\n  if (level == 0) {\n    code += 'function main(params) {\\n';\n  }\n  var ln = 'cag' + level;\n  code += indent + 'var ' + ln + ' = new CAG();\\n';\n// generate code for all objects\n  for (i = 0; i < group.objects.length; i++) {\n    var obj = group.objects[i];\n    var on = ln + i;\n    switch (obj.type) {\n      case 'group':\n        code += this$1.codify(obj);\n        code += indent + 'var ' + on + ' = cag' + (level + 1) + ';\\n';\n        break\n      case 'rect':\n        var x = this$1.cagLengthX(obj.x);\n        var y = (0 - this$1.cagLengthY(obj.y));\n        var w = this$1.cagLengthX(obj.width);\n        var h = this$1.cagLengthY(obj.height);\n        var rx = this$1.cagLengthX(obj.rx);\n        var ry = this$1.cagLengthY(obj.ry);\n        if (w > 0 && h > 0) {\n          x = (x + (w / 2)).toFixed(4);  // position the object via the center\n          y = (y - (h / 2)).toFixed(4);  // position the object via the center\n          if (rx == 0) {\n            code += indent + 'var ' + on + ' = CAG.rectangle({center: [' + x + ',' + y + '], radius: [' + w / 2 + ',' + h / 2 + ']});\\n';\n          } else {\n            code += indent + 'var ' + on + ' = CAG.roundedRectangle({center: [' + x + ',' + y + '], radius: [' + w / 2 + ',' + h / 2 + '], roundradius: ' + rx + '});\\n';\n          }\n        }\n        break\n      case 'circle':\n        var x = this$1.cagLengthX(obj.x);\n        var y = (0 - this$1.cagLengthY(obj.y));\n        var r = this$1.cagLengthP(obj.radius);\n        if (r > 0) {\n          code += indent + 'var ' + on + ' = CAG.circle({center: [' + x + ',' + y + '], radius: ' + r + '});\\n';\n        }\n        break\n      case 'ellipse':\n        var rx = this$1.cagLengthX(obj.rx);\n        var ry = this$1.cagLengthY(obj.ry);\n        var cx = this$1.cagLengthX(obj.cx);\n        var cy = (0 - this$1.cagLengthY(obj.cy));\n        if (rx > 0 && ry > 0) {\n          code += indent + 'var ' + on + ' = CAG.ellipse({center: [' + cx + ',' + cy + '], radius: [' + rx + ',' + ry + ']});\\n';\n        }\n        break\n      case 'line':\n        var x1 = this$1.cagLengthX(obj.x1);\n        var y1 = (0 - this$1.cagLengthY(obj.y1));\n        var x2 = this$1.cagLengthX(obj.x2);\n        var y2 = (0 - this$1.cagLengthY(obj.y2));\n        var r = cssPxUnit; // default\n        if ('strokeWidth' in obj) {\n          r = this$1.cagLengthP(obj.strokeWidth) / 2;\n        } else {\n          var v = this$1.groupValue('strokeWidth');\n          if (v !== null) {\n            r = this$1.cagLengthP(v) / 2;\n          }\n        }\n        code += indent + 'var ' + on + ' = new CSG.Path2D([[' + x1 + ',' + y1 + '],[' + x2 + ',' + y2 + ']],false);\\n';\n        code += indent + on + ' = ' + on + '.expandToCAG(' + r + ',CSG.defaultResolution2D);\\n';\n        break\n      case 'polygon':\n        code += indent + 'var ' + on + ' = new CSG.Path2D([\\n';\n        var j = 0;\n        for (j = 0; j < obj.points.length; j++) {\n          var p = obj.points[j];\n          if ('x' in p && 'y' in p) {\n            var x = this$1.cagLengthX(p.x);\n            var y = (0 - this$1.cagLengthY(p.y));\n            code += indent + '  [' + x + ',' + y + '],\\n';\n          }\n        }\n        code += indent + '],true);\\n';\n        code += indent + on + ' = ' + on + '.innerToCAG();\\n';\n        break\n      case 'polyline':\n        var r = cssPxUnit; // default\n        if ('strokeWidth' in obj) {\n          r = this$1.cagLengthP(obj.strokeWidth) / 2;\n        } else {\n          var v = this$1.groupValue('strokeWidth');\n          if (v !== null) {\n            r = this$1.cagLengthP(v) / 2;\n          }\n        }\n        code += indent + 'var ' + on + ' = new CSG.Path2D([\\n';\n        var j = 0;\n        for (j = 0; j < obj.points.length; j++) {\n          var p = obj.points[j];\n          if ('x' in p && 'y' in p) {\n            var x = this$1.cagLengthX(p.x);\n            var y = (0 - this$1.cagLengthY(p.y));\n            code += indent + '  [' + x + ',' + y + '],\\n';\n          }\n        }\n        code += indent + '],false);\\n';\n        code += indent + on + ' = ' + on + '.expandToCAG(' + r + ',CSG.defaultResolution2D);\\n';\n        break\n      case 'path':\n        code += indent + 'var ' + on + ' = new CAG();\\n';\n\n        var r = cssPxUnit; // default\n        if ('strokeWidth' in obj) {\n          r = this$1.cagLengthP(obj.strokeWidth) / 2;\n        } else {\n          var v = this$1.groupValue('strokeWidth');\n          if (v !== null) {\n            r = this$1.cagLengthP(v) / 2;\n          }\n        }\n      // Note: All values are SVG values\n        var sx = 0;     // starting position\n        var sy = 0;\n        var cx = 0;     // current position\n        var cy = 0;\n        var pi = 0;     // current path index\n        var pn = on + pi; // current path name\n        var pc = false; // current path closed\n        var bx = 0;     // 2nd control point from previous C command\n        var by = 0;     // 2nd control point from previous C command\n        var qx = 0;     // 2nd control point from previous Q command\n        var qy = 0;     // 2nd control point from previous Q command\n        var j = 0;\n        for (j = 0; j < obj.commands.length; j++) {\n          var co = obj.commands[j];\n          var pts = co.p;\n          // console.log('postion: ['+cx+','+cy+'] before '+co.c);\n          switch (co.c) {\n            case 'm': // relative move to X,Y\n            // special case, if at beginning of path then treat like absolute M\n              if (j == 0) {\n                cx = 0; cy = 0;\n              }\n            // close the previous path\n              if (pi > 0 && pc === false) {\n                code += indent + pn + ' = ' + pn + '.expandToCAG(' + r + ',CSG.defaultResolution2D);\\n';\n              }\n            // open a new path\n              if (pts.length >= 2) {\n                cx = cx + parseFloat(pts.shift());\n                cy = cy + parseFloat(pts.shift());\n                pi++;\n                pn = on + pi;\n                pc = false;\n                code += indent + 'var ' + pn + ' = new CSG.Path2D([[' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']],false);\\n';\n                sx = cx; sy = cy;\n              }\n              break\n              break\n            case 'M': // absolute move to X,Y\n            // close the previous path\n              if (pi > 0 && pc === false) {\n                code += indent + pn + ' = ' + pn + '.expandToCAG(' + r + ',CSG.defaultResolution2D);\\n';\n              }\n            // open a new path\n              if (pts.length >= 2) {\n                cx = parseFloat(pts.shift());\n                cy = parseFloat(pts.shift());\n                pi++;\n                pn = on + pi;\n                pc = false;\n                code += indent + 'var ' + pn + ' = new CSG.Path2D([[' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']],false);\\n';\n                sx = cx; sy = cy;\n              }\n              break\n            case 'a': // relative elliptical arc\n              while (pts.length >= 7) {\n                var rx = parseFloat(pts.shift());\n                var ry = parseFloat(pts.shift());\n                var ro = 0 - parseFloat(pts.shift());\n                var lf = (pts.shift() == '1');\n                var sf = (pts.shift() == '1');\n                cx = cx + parseFloat(pts.shift());\n                cy = cy + parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendArc([' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + '],{xradius: ' + this$1.svg2cagX(rx) + ',yradius: ' + this$1.svg2cagY(ry) + ',xaxisrotation: ' + ro + ',clockwise: ' + sf + ',large: ' + lf + '});\\n';\n              }\n              break\n            case 'A': // absolute elliptical arc\n              while (pts.length >= 7) {\n                var rx = parseFloat(pts.shift());\n                var ry = parseFloat(pts.shift());\n                var ro = 0 - parseFloat(pts.shift());\n                var lf = (pts.shift() == '1');\n                var sf = (pts.shift() == '1');\n                cx = parseFloat(pts.shift());\n                cy = parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendArc([' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + '],{xradius: ' + this$1.svg2cagX(rx) + ',yradius: ' + this$1.svg2cagY(ry) + ',xaxisrotation: ' + ro + ',clockwise: ' + sf + ',large: ' + lf + '});\\n';\n              }\n              break\n            case 'c': // relative cubic Bzier\n              while (pts.length >= 6) {\n                var x1 = cx + parseFloat(pts.shift());\n                var y1 = cy + parseFloat(pts.shift());\n                bx = cx + parseFloat(pts.shift());\n                by = cy + parseFloat(pts.shift());\n                cx = cx + parseFloat(pts.shift());\n                cy = cy + parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendBezier([[' + this$1.svg2cagX(x1) + ',' + this$1.svg2cagY(y1) + '],[' + this$1.svg2cagX(bx) + ',' + this$1.svg2cagY(by) + '],[' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']]);\\n';\n                var rf = this$1.reflect(bx, by, cx, cy);\n                bx = rf[0];\n                by = rf[1];\n              }\n              break\n            case 'C': // absolute cubic Bzier\n              while (pts.length >= 6) {\n                var x1 = parseFloat(pts.shift());\n                var y1 = parseFloat(pts.shift());\n                bx = parseFloat(pts.shift());\n                by = parseFloat(pts.shift());\n                cx = parseFloat(pts.shift());\n                cy = parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendBezier([[' + this$1.svg2cagX(x1) + ',' + this$1.svg2cagY(y1) + '],[' + this$1.svg2cagX(bx) + ',' + this$1.svg2cagY(by) + '],[' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']]);\\n';\n                var rf = this$1.reflect(bx, by, cx, cy);\n                bx = rf[0];\n                by = rf[1];\n              }\n              break\n            case 'q': // relative quadratic Bzier\n              while (pts.length >= 4) {\n                qx = cx + parseFloat(pts.shift());\n                qy = cy + parseFloat(pts.shift());\n                cx = cx + parseFloat(pts.shift());\n                cy = cy + parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendBezier([[' + this$1.svg2cagX(qx) + ',' + this$1.svg2cagY(qy) + '],[' + this$1.svg2cagX(qx) + ',' + this$1.svg2cagY(qy) + '],[' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']]);\\n';\n                var rf = this$1.reflect(qx, qy, cx, cy);\n                qx = rf[0];\n                qy = rf[1];\n              }\n              break\n            case 'Q': // absolute quadratic Bzier\n              while (pts.length >= 4) {\n                qx = parseFloat(pts.shift());\n                qy = parseFloat(pts.shift());\n                cx = parseFloat(pts.shift());\n                cy = parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendBezier([[' + this$1.svg2cagX(qx) + ',' + this$1.svg2cagY(qy) + '],[' + this$1.svg2cagX(qx) + ',' + this$1.svg2cagY(qy) + '],[' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']]);\\n';\n                var rf = this$1.reflect(qx, qy, cx, cy);\n                qx = rf[0];\n                qy = rf[1];\n              }\n              break\n            case 't': // relative quadratic Bzier shorthand\n              while (pts.length >= 2) {\n                cx = cx + parseFloat(pts.shift());\n                cy = cy + parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendBezier([[' + this$1.svg2cagX(qx) + ',' + this$1.svg2cagY(qy) + '],[' + this$1.svg2cagX(qx) + ',' + this$1.svg2cagY(qy) + '],[' + cx + ',' + cy + ']]);\\n';\n                var rf = this$1.reflect(qx, qy, cx, cy);\n                qx = rf[0];\n                qy = rf[1];\n              }\n              break\n            case 'T': // absolute quadratic Bzier shorthand\n              while (pts.length >= 2) {\n                cx = parseFloat(pts.shift());\n                cy = parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendBezier([[' + this$1.svg2cagX(qx) + ',' + this$1.svg2cagY(qy) + '],[' + this$1.svg2cagX(qx) + ',' + this$1.svg2cagY(qy) + '],[' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']]);\\n';\n                var rf = this$1.reflect(qx, qy, cx, cy);\n                qx = rf[0];\n                qy = rf[1];\n              }\n              break\n            case 's': // relative cubic Bzier shorthand\n              while (pts.length >= 4) {\n                var x1 = bx; // reflection of 2nd control point from previous C\n                var y1 = by; // reflection of 2nd control point from previous C\n                bx = cx + parseFloat(pts.shift());\n                by = cy + parseFloat(pts.shift());\n                cx = cx + parseFloat(pts.shift());\n                cy = cy + parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendBezier([[' + this$1.svg2cagX(x1) + ',' + this$1.svg2cagY(y1) + '],[' + this$1.svg2cagX(bx) + ',' + this$1.svg2cagY(by) + '],[' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']]);\\n';\n                var rf = this$1.reflect(bx, by, cx, cy);\n                bx = rf[0];\n                by = rf[1];\n              }\n              break\n            case 'S': // absolute cubic Bzier shorthand\n              while (pts.length >= 4) {\n                var x1 = bx; // reflection of 2nd control point from previous C\n                var y1 = by; // reflection of 2nd control point from previous C\n                bx = parseFloat(pts.shift());\n                by = parseFloat(pts.shift());\n                cx = parseFloat(pts.shift());\n                cy = parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendBezier([[' + this$1.svg2cagX(x1) + ',' + this$1.svg2cagY(y1) + '],[' + this$1.svg2cagX(bx) + ',' + this$1.svg2cagY(by) + '],[' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']]);\\n';\n                var rf = this$1.reflect(bx, by, cx, cy);\n                bx = rf[0];\n                by = rf[1];\n              }\n              break\n            case 'h': // relative Horzontal line to\n              while (pts.length >= 1) {\n                cx = cx + parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendPoint([' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']);\\n';\n              }\n              break\n            case 'H': // absolute Horzontal line to\n              while (pts.length >= 1) {\n                cx = parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendPoint([' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']);\\n';\n              }\n              break\n            case 'l': // relative line to\n              while (pts.length >= 2) {\n                cx = cx + parseFloat(pts.shift());\n                cy = cy + parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendPoint([' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']);\\n';\n              }\n              break\n            case 'L': // absolute line to\n              while (pts.length >= 2) {\n                cx = parseFloat(pts.shift());\n                cy = parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendPoint([' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']);\\n';\n              }\n              break\n            case 'v': // relative Vertical line to\n              while (pts.length >= 1) {\n                cy = cy + parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendPoint([' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']);\\n';\n              }\n              break\n            case 'V': // absolute Vertical line to\n              while (pts.length >= 1) {\n                cy = parseFloat(pts.shift());\n                code += indent + pn + ' = ' + pn + '.appendPoint([' + this$1.svg2cagX(cx) + ',' + this$1.svg2cagY(cy) + ']);\\n';\n              }\n              break\n            case 'z': // close current line\n            case 'Z':\n              code += indent + pn + ' = ' + pn + '.close();\\n';\n              code += indent + pn + ' = ' + pn + '.innerToCAG();\\n';\n              code += indent + on + ' = ' + on + '.union(' + pn + ');\\n';\n              cx = sx; cy = sy; // return to the starting point\n              pc = true;\n              break\n            default:\n              console.log('Warning: Unknow PATH command [' + co.c + ']');\n              break\n          }\n          // console.log('postion: ['+cx+','+cy+'] after '+co.c);\n        }\n        if (pi > 0) {\n          if (pc === false) {\n            code += indent + pn + ' = ' + pn + '.expandToCAG(' + r + ',CSG.defaultResolution2D);\\n';\n            code += indent + on + ' = ' + on + '.union(' + pn + ');\\n';\n          }\n        }\n        break\n      default:\n        break\n    }\n    if ('fill' in obj) {\n    // FIXME when CAG supports color\n    //  code += indent+on+' = '+on+'.setColor(['+obj.fill[0]+','+obj.fill[1]+','+obj.fill[2]+']);\\n';\n    }\n    if ('transforms' in obj) {\n    // NOTE: SVG specifications require that transforms are applied in the order given.\n    //       But these are applied in the order as required by CSG/CAG\n      var tr = null;\n      var ts = null;\n      var tt = null;\n\n      var j = 0;\n      for (j = 0; j < obj.transforms.length; j++) {\n        var t = obj.transforms[j];\n        if ('rotate' in t) { tr = t; }\n        if ('scale' in t) { ts = t; }\n        if ('translate' in t) { tt = t; }\n      }\n      if (ts !== null) {\n        var x = ts.scale[0];\n        var y = ts.scale[1];\n        code += indent + on + ' = ' + on + '.scale([' + x + ',' + y + ']);\\n';\n      }\n      if (tr !== null) {\n        var z = 0 - tr.rotate;\n        code += indent + on + ' = ' + on + '.rotateZ(' + z + ');\\n';\n      }\n      if (tt !== null) {\n        var x = this$1.cagLengthX(tt.translate[0]);\n        var y = (0 - this$1.cagLengthY(tt.translate[1]));\n        code += indent + on + ' = ' + on + '.translate([' + x + ',' + y + ']);\\n';\n      }\n    }\n    code += indent + ln + ' = ' + ln + '.union(' + on + ');\\n';\n  }\n// post-code\n  if (level == 0) {\n    code += indent + 'return ' + ln + ';\\n';\n    code += '}\\n';\n  }\n// remove this group from the hiearchy\n  this.svgGroups.pop();\n\n  return code\n};\n\nfunction createSvgParser (src, pxPmm) {\n// create a parser for the XML\n  var parser = sax$3.parser(false, {trim: true, lowercase: false, position: true});\n  if (pxPmm !== undefined) {\n    if (pxPmm > parser.pxPmm) { parser.pxPmm = pxPmm; }\n  }\n// extend the parser with functions\n  parser.onerror = function (e) {\n    console.log('error: line ' + e.line + ', column ' + e.column + ', bad character [' + e.c + ']');\n  };\n\n  // parser.ontext = function (t) {\n  // };\n\n  parser.onopentag = function (node) {\n    // console.log('opentag: '+node.name+' at line '+this.line+' position '+this.column);\n    // for (x in node.attributes) {\n    //  console.log('    '+x+'='+node.attributes[x]);\n    // }\n    var obj = null;\n    switch (node.name) {\n      case 'SVG':\n        obj = this.svgSvg(node.attributes);\n        break\n      case 'G':\n        obj = this.svgGroup(node.attributes);\n        break\n      case 'RECT':\n        obj = this.svgRect(node.attributes);\n        break\n      case 'CIRCLE':\n        obj = this.svgCircle(node.attributes);\n        break\n      case 'ELLIPSE':\n        obj = this.svgEllipse(node.attributes);\n        break\n      case 'LINE':\n        obj = this.svgLine(node.attributes);\n        break\n      case 'POLYLINE':\n        obj = this.svgPolyline(node.attributes);\n        break\n      case 'POLYGON':\n        obj = this.svgPolygon(node.attributes);\n        break\n      // case 'SYMBOL':\n      // this is just like an embedded SVG but does NOT render directly, only named\n      // this requires another set of control objects\n      // only add to named objects for later USE\n      //  break;\n      case 'PATH':\n        obj = this.svgPath(node.attributes);\n        break\n      case 'USE':\n        obj = this.svgUse(node.attributes);\n        break\n      case 'DEFS':\n        this.svgInDefs = true;\n        break\n      case 'DESC':\n      case 'TITLE':\n      case 'STYLE':\n      // ignored by design\n        break\n      default:\n        console.log('Warning: Unsupported SVG element: ' + node.name);\n        break\n    }\n\n    if (obj !== null) {\n    // add to named objects if necessary\n      if ('id' in obj) {\n        this.svgObjects[obj.id] = obj;\n        // console.log('saved object ['+obj.id+','+obj.type+']');\n      }\n      if (obj.type == 'svg') {\n      // initial SVG (group)\n        this.svgGroups.push(obj);\n        this.svgUnitsPmm = obj.unitsPmm;\n        this.svgUnitsX = obj.viewW;\n        this.svgUnitsY = obj.viewH;\n        this.svgUnitsV = obj.viewP;\n      } else {\n      // add the object to the active group if necessary\n        if (this.svgGroups.length > 0 && this.svgInDefs == false) {\n          var group = this.svgGroups.pop();\n          if ('objects' in group) {\n            // console.log('push object ['+obj.type+']');\n            // console.log(JSON.stringify(obj));\n          // TBD apply presentation attributes from the group\n            group.objects.push(obj);\n          }\n          this.svgGroups.push(group);\n        }\n        if (obj.type == 'group') {\n        // add GROUPs to the stack\n          this.svgGroups.push(obj);\n        }\n      }\n    }\n  };\n\n  parser.onclosetag = function (node) {\n    // console.log('closetag: '+node);\n    var obj = null;\n    switch (node) {\n      case 'SVG':\n        obj = this.svgGroups.pop();\n        // console.log(\"groups: \"+groups.length);\n        break\n      case 'DEFS':\n        this.svgInDefs = false;\n        break\n      case 'USE':\n        obj = this.svgGroups.pop();\n        // console.log(\"groups: \"+groups.length);\n        break\n      case 'G':\n        obj = this.svgGroups.pop();\n        // console.log(\"groups: \"+groups.length);\n        break\n      default:\n        break\n    }\n  // check for completeness\n    if (this.svgGroups.length === 0) {\n      this.svgObj = obj;\n    }\n  };\n\n  // parser.onattribute = function (attr) {\n  // };\n\n  parser.onend = function () {\n  //  console.log('SVG parsing completed');\n  };\n// start the parser\n  parser.write(src).close();\n\n  return parser\n}\n\n//\n// Parse the given SVG source and return a JSCAD script\n//\n// fn (optional) original filename of SVG source\n// options (optional) anonymous object with:\n//   pxPmm: pixels per milimeter for calcuations\n//\nfunction parseSVG (src, fn, options) {\n  var fn = fn || 'svg';\n  var defaults = {pxPmm: undefined, version: '0.0.0'};\n  options = Object.assign({}, defaults, options);\n  var version = options.version;\n  var pxPmm = options.pxPmm;\n\n  // parse the SVG source\n  var parser = createSvgParser(src, pxPmm);\n  // convert the internal objects to JSCAD code\n  var code = '';\n  code += '//\\n';\n  code += '// producer: OpenJSCAD.org ' + version + ' SVG Importer\\n';\n  code += '// date: ' + (new Date()) + '\\n';\n  code += '// source: ' + fn + '\\n';\n  code += '//\\n';\n  if (parser.svgObj !== null) {\n    // console.log(JSON.stringify(parser.svgObj));\n    code += parser.codify(parser.svgObj);\n  } else {\n    console.log('Warning: SVG parsing failed');\n  }\n  return code\n}\n\nexports.makeBlob = makeBlob;\nexports.revokeBlobUrl = revokeBlobUrl;\nexports.CAGToDxf = CAGToDxf;\nexports.CAGToJson = CAGToJson;\nexports.CAGToSvg = CAGToSvg;\nexports.CSGToAMF = CSGToAMF;\nexports.CSGToJson = CSGToJson;\nexports.CSGToStla = CSGToStla;\nexports.CSGToStlb = CSGToStlb;\nexports.CSGToX3D = CSGToX3D;\nexports.parseAMF = parseAMF;\nexports.parseGCode = parseGCode;\nexports.parseJSON = parseJSON;\nexports.parseOBJ = parseOBJ;\nexports.parseSTL = parseSTL;\nexports.parseSVG = parseSVG;\n//# sourceMappingURL=index.js.map\n","import { CSG, CAG } from '@jscad/csg'\n\n// handled format descriptions\nexport const formats = {\n  stl: {\n    displayName: 'STL (ASCII)',\n    description: 'STereoLithography, ASCII',\n    extension: 'stl',\n    mimetype: 'application/sla',\n    convertCSG: true,\n    convertCAG: false\n  },\n  stla: {\n    displayName: 'STL (ASCII)',\n    description: 'STereoLithography, ASCII',\n    extension: 'stl',\n    mimetype: 'application/sla',\n    convertCSG: true,\n    convertCAG: false\n  },\n  stlb: {\n    displayName: 'STL (Binary)',\n    description: 'STereoLithography, Binary',\n    extension: 'stl',\n    mimetype: 'application/sla',\n    convertCSG: true,\n    convertCAG: false\n  },\n\n  amf: {\n    displayName: 'AMF (experimental)',\n    description: 'Additive Manufacturing File Format',\n    extension: 'amf',\n    mimetype: 'application/amf+xml',\n    convertCSG: true,\n    convertCAG: false },\n  x3d: {\n    displayName: 'X3D',\n    description: 'X3D File Format',\n    extension: 'x3d',\n    mimetype: 'model/x3d+xml',\n    convertCSG: true,\n    convertCAG: false },\n  dxf: {\n    displayName: 'DXF',\n    description: 'AutoCAD Drawing Exchange Format',\n    extension: 'dxf',\n    mimetype: 'application/dxf',\n    convertCSG: false,\n    convertCAG: true },\n  jscad: {\n    displayName: 'JSCAD',\n    description: 'OpenJSCAD.org Source',\n    extension: 'jscad',\n    mimetype: 'application/javascript',\n    convertCSG: true,\n    convertCAG: true },\n  svg: {\n    displayName: 'SVG',\n    description: 'Scalable Vector Graphics Format',\n    extension: 'svg',\n    mimetype: 'image/svg+xml',\n    convertCSG: false,\n    convertCAG: true },\n  js: {\n    displayName: 'js',\n    description: 'JavaScript Source' },\n  gcode: {\n    displayName: 'gcode',\n    description: 'G Programming Language File Format' },\n  json: {\n    displayName: 'json',\n    description: 'JavaScript Object Notation Format' }\n}\n\n// handled input formats\nexport const conversionFormats = [\n// 3D file formats\n  'amf',\n  'gcode',\n  'js',\n  'jscad',\n  'obj',\n  'scad',\n  'stl',\n// 2D file formats\n  'svg'\n]\n\nexport function supportedFormatsForObjects (objects) {\n  let objectFormats = []\n  let foundCSG = false\n  let foundCAG = false\n  for (let i = 0; i < objects.length; i++) {\n    if (objects[i] instanceof CSG) { foundCSG = true }\n    if (objects[i] instanceof CAG) { foundCAG = true }\n  }\n  for (let format in formats) {\n    if (foundCSG && formats[format].convertCSG === true) {\n      objectFormats[objectFormats.length] = format\n      continue // only add once\n    }\n    if (foundCAG && formats[format].convertCAG === true) {\n      objectFormats[objectFormats.length] = format\n    }\n  }\n  return objectFormats\n}\n"],"names":["env","version","document","defaultView","navigator","userAgent","require","os","type","release","platform","arch","console","log","square","let","off","v","a","arguments","p","Number","isFinite","length","size","center","CAG","rectangle","radius","circle","r","fn","resolution","polygon","points","paths","j","i","fromPoints","triangle","linear_extrude","s","h","twist","slices","height","o","extrude","offset","twistangle","twiststeps","b","getBounds","plus","times","translate","rotate_extrude","undefined","ps","sides","m","CSG","Matrix4x4","rotationZ","Vector3D","vertex0","pos","x","y","rightMultiply1x3Vector","vertex1","p1","Polygon","Vertex","push","fromPolygons","rectangular_extrude","pa","w","closed","round","Path2D","rectangularExtrude","cube","z","roundedCube","roundradius","sphere","geodesicSphere","ci","ti","mix3","f","_f","c","Math","floor","g","p2","p3","n","t0","t1","s0","s1","s2","q","k","sqrt","l","s3","triangles","concat","polyhedron","scale","cylinder","r1","r2","d","d1","d2","start","end","roundedCylinder","radiusStart","radiusEnd","torus","ri","ro","fni","fno","roti","rotateZ","pgs","ref","polygons","colors","pp","defaultShared","Shared","fromColor","union","obj","difference","subtract","setColor","intersection","intersect","rotate","rotateX","rotateY","mirror","Array","prototype","slice","call","plane","Plane","unit","mirrored","expand","contract","multmatrix","mat","minkowski","hull","pts","done","cag","ConvexHullPoint","this","index","angle","distance","compare","ConvexHull","indices","getIndices","clear","ccw","atan2","compute","_points","min","al","ang","dist","PI","sort","stack","tmp","M","ch","chain_hull","css2rgb","cssColors","toLowerCase","color","isArray","rgb2hsl","max","hsl2rgb","hue2rgb","t","rgb2hsv","hsv2rgb","html2rgb","parseInt","rgb2html","toString","substring","sin","cos","asin","acos","tan","atan","ceil","abs","rands","vn","seed","random","lookup","ix","a0","a1","pow","sign","vector_char","charCodeAt","width","segments","simplexFont","segs","xp","yp","vector_text","x0","charAt","echo","warn","txt","timeInMs","Date","now","prevtime","deltatime","prevLogTime","toFixed","self","Error","postMessage","cmd","fnNumberSort","insertSorted","array","element","comparefunc","leftbound","rightbound","testindex","splice","fnSortByIndex","toArray","data","constructor","convertToBlob","objects","params","format","formatInfo","object","foundCSG","foundCAG","convertCSG","convertCAG","const","meta","producer","date","outputFormatHandlers","amf","CSGToAMF","stl","CSGToStla","stla","stlb","CSGToStlb","webBlob","dxf","CAGToDxf","svg","CAGToSvg","x3d","CSGToX3D","fixTJunctions","json","CAGToJson","js","jscad","blob","Blob","mimetype","createJscadFunction","script","globals","globalsList","Object","keys","forEach","libKey","lib","libItemKey","libItems","toExposeKey","source","Function","replaceIncludes","relpath","memFs","includeResolver","Promise","resolve","reject","moduleAst","astFromSource","foundIncludes","findIncludes","map","value","withoutIncludes","replaceIncludesInAst","modulePromises","uri","then","includedScript","err","error","all","resolvedModules","resolvedScript","join","isInclude","node","callee","name","options","defaults","loc","range","tolerant","assign","ast","esprima","parse","includes","estraverse","traverse","enter","parent","includePath","raw","VisitorOption","Skip","replacement","result","replace","astring","generate","indent","lineEnd","resolveIncludes","scriptPath","fs","fullpath","xhr","XMLHttpRequest","url","match","open","onload","event","status","currentTarget","responseText","onerror","send","rebuildSolid","fullurl","parameters","callback","lastIndexOf","implicitGlobals","fullScript","oscad","func","include","catch","cancel","resolveIncludesFs","fullPath","path","readFile","getParameterDefinitionsCLI","getParameterDefinitions","param","default","initial","checked","generateOutputData","outputFormat","inputFile","inputPath","extras","cli","mainFunction","JSON","stringify","formats","parseArgs","args","process","exit","inputFormat","outputFile","RegExp","$1","$2","statSync","isFile","determineOutputNameAndFormat","ext","writeOutputDataToFile","outputData","writeFile","asBuffer","black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","sprintf","get_type","variable","str_repeat","input","multiplier","output","str_format","cache","hasOwnProperty","parse_tree","argv","arg","pad","pad_character","pad_length","cursor","tree_length","node_type","test","String","fromCharCode","toExponential","parseFloat","toUpperCase","fmt","_fmt","arg_names","exec","field_list","replacement_field","field_match","exportedApi","csg","primitives2d","primitives3d","booleanOps","transformations","extrusions","maths","text","OpenJsCad","debug","sax","SAXParser","strict","opt","parser","clearBuffers","bufferCheckPosition","MAX_BUFFER_LENGTH","lowercase","lowercasetags","looseCase","tags","closedRoot","sawRoot","tag","noscript","state","S","BEGIN","strictEntities","ENTITIES","create","XML_ENTITIES","attribList","xmlns","ns","rootNS","trackPosition","position","line","column","emit","checkBufferLength","maxAllowed","maxActual","buffers","len","closeText","emitNode","cdata","flushBuffers","createStream","SAXStream","Stream","apply","_parser","writable","readable","me","onend","er","_decoder","streamWraps","ev","defineProperty","get","set","removeAllListeners","on","enumerable","configurable","charClass","str","split","reduce","isMatch","regex","is","charclass","notMatch","not","nodeType","textNode","textopts","trim","normalize","strictFail","BEGIN_WHITESPACE","TEXT","message","newTag","tagName","attributes","qname","attribute","indexOf","qualName","prefix","local","attrib","attribName","attribValue","qn","XML_NAMESPACE","XMLNS_NAMESPACE","openTag","selfClosing","nv","isSelfClosing","SCRIPT","closeTag","closeTo","pop","parseEntity","num","entity","entityLC","numStr","fromCodePoint","beginWhiteSpace","OPEN_WAKA","startTagPosition","whitespace","chunk","write","starti","TEXT_ENTITY","SCRIPT_ENDING","CLOSE_TAG","SGML_DECL","sgmlDecl","nameStart","OPEN_TAG","PROC_INST","procInstName","procInstBody","CDATA","COMMENT","comment","DOCTYPE","doctype","quote","SGML_DECL_QUOTED","DOCTYPE_DTD","DOCTYPE_QUOTED","DOCTYPE_DTD_QUOTED","COMMENT_ENDING","COMMENT_ENDED","CDATA_ENDING","CDATA_ENDING_2","PROC_INST_ENDING","PROC_INST_BODY","body","nameBody","OPEN_TAG_SLASH","ATTRIB","ATTRIB_NAME","ATTRIB_VALUE","ATTRIB_NAME_SAW_WHITE","ATTRIB_VALUE_QUOTED","ATTRIB_VALUE_UNQUOTED","ATTRIB_VALUE_ENTITY_Q","ATTRIB_VALUE_CLOSED","attribEnd","ATTRIB_VALUE_ENTITY_U","CLOSE_TAG_SAW_WHITE","returnState","buffer","entityBody","entityStart","EVENTS","F","resume","close","flush","require$$0","ex","filter","Buffer","isBuffer","SD","require$$1","StringDecoder","handler","xml","STATE","COMMENT_STARTING","amp","gt","lt","quot","apos","AElig","Aacute","Acirc","Agrave","Aring","Atilde","Auml","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","Iacute","Icirc","Igrave","Iuml","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","aelig","agrave","aring","atilde","auml","ccedil","eacute","ecirc","egrave","eth","euml","iacute","icirc","igrave","iuml","ntilde","oacute","ocirc","ograve","oslash","otilde","ouml","szlig","thorn","uacute","ucirc","ugrave","uuml","yacute","yuml","copy","reg","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","ordf","laquo","shy","macr","deg","plusmn","sup1","sup2","sup3","acute","micro","para","middot","cedil","ordm","raquo","frac14","frac12","frac34","iquest","divide","OElig","oelig","Scaron","scaron","Yuml","fnof","circ","tilde","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","bull","hellip","permil","prime","Prime","lsaquo","rsaquo","oline","frasl","euro","image","weierp","real","trade","alefsym","larr","uarr","rarr","darr","harr","crarr","lArr","uArr","rArr","dArr","hArr","forall","part","exist","empty","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","prop","infin","and","or","cap","cup","int","there4","sim","cong","asymp","ne","equiv","le","ge","sub","sup","nsub","sube","supe","oplus","otimes","perp","sdot","lceil","rceil","lfloor","rfloor","lang","rang","loz","spades","clubs","hearts","diams","key","e","stringFromCharCode","highSurrogate","lowSurrogate","codeUnits","codePoint","RangeError","exports","_CSGDEBUG","properties","Properties","isCanonicalized","isRetesselated","defaultResolution2D","defaultResolution3D","fromSlices","createFromPoints","solidFromSlices","fromObject","fromCompactBinary","bin","normal","planes","planeData","numplanes","arrayindex","planeindex","Create","vertex","vertices","vertexData","numvertices","vertexindex","numpolygonvertices","polygonvertices","shared","shareds","numpolygons","numPolygons","numVerticesPerPolygon","polygonVertices","polygonPlaneIndexes","polygonSharedIndexes","polygonindex","toPolygons","csgs","unionSub","reTesselated","canonicalized","retesselate","canonicalize","mayOverlap","Tree","clipTo","invert","newpolygons","allPolygons","_merge","unionForNonIntersecting","islast","subtractSub","addPolygons","intersectSub","flippedpolygons","flipped","transform1","matrix4x4","transform","_transform","ismirror","isMirroring","transformedvertices","transformedplanes","newplane","planetag","getTag","newvertices","newvertex","vertextag","reverse","expandedShell","expandedshell","stretchAtPlane","point","fromNormalAndPoint","onb","OrthoNormalBasis","crosssect","sectionCut","midpiece","extrudeInOrthonormalBasis","piece1","cutByPlane","piece2","unionWithThis","extrudevector","translatedpolygon","extrudedface","vertexpairs","prevvertex","prevvertextag","vertextagpair","v1","v2","planenormals","vertexpair","startpoint","endpoint","zbase","xbase","ybase","cross","angles","iMax","planenormal","si","dot","co","prevp1","prevp2","numangles","startfacevertices","endfacevertices","skip","distanceTo","vertexmap","normals","vertexobj","xaxis","bestzaxis","bestzaxisorthogonality","crosslength","randomNonParallelVector","yaxis","zaxis","axes","factory","fuzzyCSGFactory","getCSG","polygonsPerPlane","fuzzyfactory","getPlane","getPolygonShared","destpolygons","sourcepolygons","retesselayedpolygons","reTesselateCoplanarPolygons","cachedBoundingBox","minpoint","maxpoint","bounds","boundingBox","mybounds","otherbounds","planecenter","maxdistance","distanceToSquared","orthobasis","to3D","Vector2D","connectTo","myConnector","otherConnector","normalrotation","matrix","getTransformationTo","setShared","newshared","toCompactBinary","planemap","sharedmap","numshared","sharedtag","Uint32Array","Float64Array","polygonVerticesIndex","sharedindex","verticesArrayIndex","_x","_y","_z","planesArrayIndex","class","toPointCloud","cuberadius","getTransformationAndInverseTransformationToFlatLying","besttransformation","bestinversetransformation","xvector","yvector","zvector","z0connectorx","Connector","z0connectory","isfirst","minheight","maxdotz","transformation","inversetransformation","pointonplane","planeconnector","transformedcsg","dotz","zheight","isbetter","translation","multiply","negated","getTransformationToFlatLying","lieFlat","projectToOrthoNormalBasis","cags","lengthSquared","plane1","plane2","cut3d","addSide","starttag","endtag","newsidetag","sidemap","deleteSide","newsideobj","vertextag2sidestart","vertextag2sideend","sidetag","idx","sideobjs","sideobj","nextvertexindex","nextvertex","nextvertextag","reversesidetag","ar","sidestocheck","sidemapisempty","donesomething","sidetagtocheck","donewithside","directionindex","startvertex","endvertex","startvertextag","endvertextag","matchingsides","matchingsideindex","matchingsidetag","matchingside","matchingsidestartvertex","matchingsideendvertex","matchingsidestartvertextag","startpos","endpos","checkpos","direction","insertionvertextag","insertionvertextagindex","newpolygon","isNaN","found","loop","item","newsidetag1","newsidetag2","newcsg","toTriangles","poly","firstVertex","getFeatures","features","triPoly","getTetraFeatures","pv","feat","parseOption","optionname","defaultvalue","parseOptionAs3DVector","parseOptionAs3DVectorList","res","parseOptionAs2DVector","parseOptionAsFloat","parseOptionAsInt","parseOptionAsBool","corner1","corner2","info","facecenters","prevcylinderpoint","qresolution","slice1","cylinderpoint","prevcospitch","prevsinpitch","slice2","pitch","cospitch","sinpitch","facepoint","out","axisX","axisY","ray","rEnd","rStart","axisZ","cylCenter","fptVec","fptVec90","facepointH","facepointH90","defaultnormal","innerradius","pt","faces","face","IsFloat","Infinity","solve2Linear","u","det","invdet","ok","clone","dividedBy","lerp","equals","multiply4x4","leftMultiply1x3Vector","interpolate","other","newpos","EPSILON","fromVector3Ds","anyPlaneFromVector3Ds","point1","point2","point3","splitPolygon","front","back","EPS","thisw","hasfront","hasback","vertexIsBack","MINEPS","isback","frontvertices","backvertices","nextisback","nextpoint","intersectionpoint","splitLineBetweenPoints","intersectionvertex","EPS_SQUARED","labda","intersectWithLine","line3d","intersectWithPlane","Line3D","fromPlanes","signedDistanceToPoint","mirrorPoint","point3d","checkIfConvex","verticesConvex","getSignedVolume","signedVolume","getArea","polygonArea","feature","offsetvector","polygon1","polygon2","sidefacepoints","nexti","sidefacepolygon","boundingSphere","cachedBoundingSphere","box","middle","radius3","points2d","to2D","fromPointsNoCheck","area","fnCallback","prev","bottom","top","numSlices","bLoop","Boolean","numslices","_addWalls","every","unshift","walls","bFlipped","bottomPoints","topPoints","iTopLen","iBotLen","iExtra","bMoreTops","bMoreBottoms","aMin","secondPoint","nBotFacet","nTopFacet","getTriangle","pointA","pointB","pointC","bpoint","tpoint","iB","iT","shift","prevprevpos","prevpos","isConvexPoint","vec","prevpoint","isStrictlyConvexPoint","getHash","PolygonTreeNode","children","removed","isRootNode","_this","addChild","remove","parentschildren","recursivelyInvalidatePolygon","isRemoved","invertSub","getPolygon","getPolygons","queue","splitByPlane","coplanarfrontnodes","coplanarbacknodes","frontnodes","backnodes","nodes","_splitByPlane","bound","sphereradius","spherecenter","splitresult","frontnode","backnode","newchild","polygonTree","rootnode","Node","tree","alsoRemovecoplanarFront","polygontreenodes","addPolygonTreeNodes","temp","clipPolygons","numpolygontreenodes","node1","numbacknodes","bestplane","getParentPlaneNormals","maxdepth","elements","this0","this1","this2","this3","this4","this5","this6","this7","this8","this9","this10","this11","this12","this13","this14","this15","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","v0","invw","rightMultiply1x2Vector","leftMultiply1x2Vector","unity","rotationX","degrees","radians","els","rotationY","rotation","rotationCenter","rotationAxis","rotationPlane","getProjectionMatrix","getInverseProjectionMatrix","mirroring","nx","ny","nz","scaling","fromAngle","fromAngleRadians","fromAngleDegrees","toVector3D","angleRadians","angleDegrees","Line2D","origin","xAtY","absDistanceToPoint","point_projected","line2d","pointOnPlane","neworigin","neworiginPlusNormal","newnormal","newpointOnPlane","neww","mabsx","mabsy","mabsz","newpoint","pointPlusDirection","newPointPlusDirection","newdirection","closestPointOnLine","distanceToPoint","closestpoint","rightvector","planeorigin","GetCartesian","xaxisid","yaxisid","axisid","Z0Plane","vec3","vec2","line3Dto2D","a2d","b2d","line2Dto3D","a3d","b3d","rightpoint_transformed","origin_transformed","newrighthandvector","interpolateBetween2DPointsForY","f1","f2","polygonvertices2d","polygontopvertexindexes","topy2polygonindexes","ycoordinatetopolygonindexes","ycoordinatebins","poly3d","vertices2d","minindex","miny","maxy","newy","pos2d","ycoordinatebin","ycoordinates","ycoordinate","activepolygons","prevoutpolygonrow","yindex","newoutpolygonrow","ycoordinate_as_string","polygonindexeswithcorner","activepolygonindex","activepolygon","newleftvertexindex","leftvertexindex","newrightvertexindex","rightvertexindex","nextleftvertexindex","nextrightvertexindex","topleft","topright","bottomleft","bottomright","nextycoordinate","middleycoordinate","startingpolygonindexes","polygonindex_key","topvertexindex","topleftvertexindex","toprightvertexindex","el1","el2","x1","x2","activepolygon_key","outpolygon","leftline","rightline","prevoutpolygon","prevcontinuedindexes","matchedindexes","thispolygon","ii","prevpolygon","leftlinecontinues","rightlinecontinues","leftlineisconvex","rightlineisconvex","rightpoints","leftpoints","vertices3d","point2d","vertex3d","fuzzyFactory","numdimensions","tolerance","lookuptable","lookupOrCreate","creatorCallback","hash","el","valueQuantized","hashparts","q0","numelements","numhashes","hashmask","hashmask_shifted","hashpart","vertexfactory","planefactory","polygonsharedfactory","sourceshared","getVertex","sourcevertex","sourceplane","sourcepolygon","newvertices_dedup","sourcecsg","staticTag","transformObj","otherproperties","cloneObj","addFrom","propertyname","propertyvalue","transformed","cloned","axisvector","normalvector","normalized","us","axesplane","axesbasis","angle1","angle2","usAxesAligned","normalsplane","normalsbasis","axisLine","extend","ConnectorList","connectors","connectors_","defaultNormal","fromPath2D","path2D","arg1","arg2","_fromPath2DTangents","_fromPath2DExplicit","axis","pathLen","appendConnector","angleIsh","getAngle","setClosed","bool","conn","followWith","cagish","getCag","connector","verify","currCag","prevConnector","prevCag","notFirst","_toWallPolygons","toConnector1","toConnector2","_toPlanePolygons","toConnector","connI","connI1","newpoints","arc","startangle","endangle","maketangent","absangledif","numsteps","edgestepsize","numsteps_mod","step","otherpath","appendPoint","appendPoints","expandToCAG","pathradius","numpoints","startindex","pointindex","side","Side","fromSides","innerToCAG","appendBezier","controlpoints","factorials","controlpoints_parsed","lastBezierControlPoint","bezier_order","fact","binomials","binomial","getPointForT","t_k","one_minus_t_n_minus_k","inv_1_minus_t","bernstein_coefficient","newpoints_t","subdivide_base","maxangle","maxsinangle","dir1","dir2","sinangle","t0_new","t1_new","point0_new","point1_new","appendArc","xradius","yradius","xaxisrotation","clockwise","largearc","sweep_flag","cosphi","sinphi","minushalfdistance","start_translated","biglambda","sqrtbiglambda","multiplier1","center_translated","vec1","theta1","theta2","deltatheta","costheta","sintheta","addTransformationMethodsToPrototype","prot","mirroredX","mirroredY","mirroredZ","rotateEulerAngles","Rz1","Rx","Rz2","T","addCenteringToPrototype","cAxes","isSelfIntersecting","fromFakeCSG","_fromFakePolygon","linesIntersect","p0start","p0end","p1start","p1end","d0","alphas","ellipse","e2","large","rswap","roundedRectangle","maxroundradius","rect","numsides","sideVertexIndices","sideindex","vertexindex0","vertexindex1","_toCSGWall","z0","z1","toPolygon3D","_toVector3DPairs","pairs","p0","pair","defaultAxis","thisConnector","axisVector","normalVector","csgshell","csgplane","toCag","vps1","vps2","vp1","newsides","side0","side1","pointmap","dl","shellpoints","newcag","pcenter","end1","end2","fullcircle","orthonormalbasis","depth","extruded","extrudeInPlane","axis1","axis2","offsetVector","c1","c2","rotateExtrude","axisV","normalV","connS","connE","connT2","connT1","check","errors","pointcount","mappoint","count","ertxt","fuzzyCAGFactory","getCAG","sidevertexindicesindex","getOutlinePaths","sideTagToSideMap","startVertexTagToSideTagMap","startsidetag","aVertexTag","sidesForThisVertex","connectedVertexPoints","thisside","nextpossiblesidetags","nextsideindex","bestangle","thisangle","nextpossiblesidetag","possibleside","angledif","nextsidetag","overCutInsideCorners","cutterradius","from","to","cutouts","pointtag","pointobj","fromcoord","pointcoord","tocoord","midvector","circlesegmentangle","radiuscorrected","circlecenter","deltaangle","vert1Indices","pts2d","newp1","newp2","getSide","sourceside","sourcecag","Polygon2D","makeBlob","contents","window","this$1","isClosed","encoding","endings","wbytes","ArrayBuffer","view","DataView","bindex","byteLength","xbyte","getUint8","writeUInt8","revokeBlobUrl","URL","revokeObjectURL","webkitURL","cagObject","PathsToDxf","numpoints_closed","pointindexwrapped","Blob$1","comma","Blob$2","_jscad_csg","PathsToSvg","Blob$3","xoffset","yoffset","CSGVertextoAMFString","Blob$4","CSGVectortoAMFString","CSGToJson","Blob$5","CSGPolygontoStlString","Blob$6","CSGVector3DtoStlString","CSGVertextoStlString","firstVertexStl","int32buffer","Int32Array","int8buffer","Int8Array","numtriangles","headerarray","Uint8Array","ar1","allTrianglesBuffer","allTrianglesBufferAsInt8","triangleBuffer","triangleBufferAsInt8","triangleFloat32array","Float32Array","triangleUint16array","Uint16Array","byteoffset","arindex","vv","vertexpos","Blob$7","XMLReader","defaultNSMapCopy","entityMap","domBuilder","errorHandler","fixedFromCharCode","code","surrogate1","surrogate2","entityReplacer","substr","appendText","xt","locator","characters","linePattern","lineStart","lineNumber","columnNumber","parseStack","currentNSMap","closeMap","tagStart","doc","createTextNode","appendChild","currentElement","config","localNSMap","endMatch","endElement","localName","endPrefixMapping","fatalError","parseInstruction","parseDCC","ElementAttributes","parseElementStartPart","fixSelfClosed","warning","locator2","copyLocator","appendElement","parseHtmlSpecialContent","attrName","S_TAG","S_ATTR","S_EQ","S_ATTR_SPACE","add","S_ATTR_END","S_ATTR_NOQUOT_VALUE","setTagName","S_TAG_SPACE","S_TAG_CLOSE","qName","nsp","nsPrefix","_copy","startPrefixMapping","startElement","elStartEnd","elEndStart","target","startCDATA","endCDATA","matchs","pubid","sysid","lastMatch","startDTD","endDTD","processingInstruction","_set_proto_","thiz","__proto__","buf","lastIndex","src","dest","_extends","Class","Super","ppt","DOMException","ExceptionMessage","captureStackTrace","NodeList","LiveNodeList","refresh","_node","_refresh","_updateLiveList","list","inc","_inc","ownerDocument","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","_onRemoveAttribute","_onAddAttribute","_removeNamedNode","attr","NOT_FOUND_ERR","DOMImplementation","_features","_xmlEncoder","_visitNode","firstChild","nextSibling","Document","namespaceURI","_nsMap","_onUpdateChild","newChild","cs","childNodes","child","_removeChild","parentNode","previous","previousSibling","next","lastChild","_insertBefore","nextChild","cp","removeChild","DOCUMENT_FRAGMENT_NODE","newFirst","newLast","pre","_appendSingleChild","Element","Attr","CharacterData","Text","Comment","CDATASection","DocumentType","Notation","Entity","EntityReference","DocumentFragment","ProcessingInstruction","XMLSerializer$1","nodeSerializeToString","isHtml","nodeFilter","refNode","documentElement","lookupPrefix","visibleNamespaces","namespace","serializeToString","needNamespaceDefine","isHTML","ELEMENT_NODE","attrs","nodeName","htmlns","DOCUMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","COMMENT_NODE","DOCUMENT_TYPE_NODE","publicId","systemId","internalSubset","PROCESSING_INSTRUCTION_NODE","ENTITY_REFERENCE_NODE","importNode","deep","node2","cloneNode","attrs2","_ownerElement","setAttributeNode","getTextContent","nodeValue","DOMImplementation$$1","implementation","domParser","materialPolygonLists","vertexCoords","vertexTagToCoordIndexMap","polygonVertexIndices","polygonString","colorString","docType","createDocumentType","exportDoc","createDocument","insertBefore","createProcessingInstruction","exportRoot","getElementsByTagName","setAttribute","exportScene","createElement","coordsMeshDefined","polygonList","shape","appearance","material","ifs","coordinate","x3dstring","XMLSerializer$$1","Blob$8","amfAmf","UNIT","inchMM","amfMesh","amfVertices","amfCoordinates","amfNormal","amfX","amfY","amfZ","amfVolume","materialid","MATERIALID","amfTriangle","amfV1","amfV2","amfV3","amfVertex","amfEdge","amfMetadata","mtype","TYPE","id","ID","amfMaterial","amfColor","amfR","amfG","amfB","amfA","amfMap","gtexid","GTEXID","btexid","BTEXID","rtexid","RTEXID","amfU1","amfU2","amfU3","createAmfParser","pxPmm","sax$2","onopentag","amfObject","amfDefinition","amfObjects","group","amfMaterials","amfLast","onclosetag","amfObj","ontext","codify","findMaterial","lastmaterial","materials","getValue","getColor","findColorByMaterial","createDefinition","didx","createObject","oidx","addCoord","coord","cidx","addVertex","vidx","addTriangle","tri","tidx","v3","tricolor","addPart","pidx","addMesh","mesh","midx","fcount","vcount","parseAMF","parseGCode","gcode","srci","lpos","layers","lh","lz","val","E","X","Y","Z","toSourceCSGVertex","ver","toSourceCSG","toSourceCAGVertex","toSourceSide","toSourceCAG","toSource","parseJSON","vt2jscad","parseOBJ","fc","parseSTL","isAscii","parseAsciiSTL","parseBinarySTL","vertexIndex","converted","mcolor","umask","rmask","gmask","bmask","br","BinaryReader","readUInt8","readChar","totalTriangles","readUInt32","tr","no","readFloat","abc","readUInt16","w1","w2","w3","e1","vpatt","_buffer","_pos","createSvgParser","sax$3","svgSvg","svgGroup","svgRect","svgCircle","svgEllipse","svgLine","svgPolyline","svgPolygon","svgPath","svgUse","svgInDefs","svgObjects","svgGroups","svgUnitsPmm","unitsPmm","svgUnitsX","viewW","svgUnitsY","viewH","svgUnitsV","viewP","svgObj","parseSVG","nameStartChar","nameChar","tagNamePattern","defaultNSMap","startDocument","endDocument","getLocalName","getLocator","getQName","getURI","XMLReader_1","NodeType","ENTITY_NODE","NOTATION_NODE","ExceptionCode","HIERARCHY_REQUEST_ERR","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","INUSE_ATTRIBUTE_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","getNamedItem","setNamedItem","setNamedItemNS","getNamedItemNS","removeNamedItem","removeNamedItemNS","hasFeature","versions","qualifiedName","root","createElementNS","refChild","replaceChild","oldChild","hasChildNodes","appendData","isSupported","hasAttributes","lookupNamespaceURI","isDefaultNamespace","importedNode","getElementById","rtv","getAttribute","createDocumentFragment","createComment","createCDATASection","createAttribute","specified","createEntityReference","pl","createAttributeNS","hasAttribute","getAttributeNode","removeAttribute","removeAttributeNode","setAttributeNodeNS","removeAttributeNS","old","getAttributeNodeNS","hasAttributeNS","getAttributeNS","setAttributeNS","base","getElementsByTagNameNS","substringData","insertData","replaceData","deleteData","splitText","newText","newNode","$$length","DOMImplementation_1","XMLSerializer_1","dom","XMLSerializer","module","DOMParser","buildErrorHandler","errorImpl","build","isCallback","msg","_locator","DOMHandler","_toString","chars","java","hander","parseFromString","mimeType","sax$$1","setDocumentLocator","documentURI","current","ins","ignorableWhitespace","charNode","skippedEntity","comm","impl","dt","amfTextures","amfConstels","readInt8","_decodeInt","readInt16","readInt32","_decodeFloat","readDouble","readString","_checkSize","seek","getPosition","getSize","precisionBits","exponentBits","bias","signal","_readBits","exponent","significand","divisor","curByte","byteValue","_readByte","startBit","mask","NaN","bits","signed","_shl","offsetLeft","offsetRight","lastByte","diff","neededBits","svgColors","svg2cagX","svg2cagY","cagLengthX","css","css2cag","cagLengthY","cagLengthP","search","cagColor","rgb","pat","cssStyle","STYLE","exp","svgCore","svgPresentation","visible","DISPLAY","fill","COLOR","opacity","OPACITY","FILL","strokeWidth","sw","stroke","STROKE","strokeOpacity","svgTransforms","TRANSFORM","transforms","PXPMM","WIDTH","HEIGHT","VIEWBOX","viewX","viewY","SQRT2","cx","cy","rx","ry","CX","CY","RX","RY","y1","y2","X1","Y1","X2","Y2","svgListOfPoints","POINTS","R","commands","bf","D","svgUnitsPer","reflect","px","py","ox","oy","groupValue","level","ln","sx","sy","pn","pc","bx","by","qx","qy","lf","sf","rf","ts","tt","displayName","description","extension","readFileSync","scadParser"],"mappings":"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AG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAE,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GA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GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACH,GAAG,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAG,EAAG,EAAG,EAAG,GAAG,EAAG,GAAG,EAAE,IAAI,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAG,GAAG,GAAG,GAAI,EAAG,EAAG,EAAG,GAAG,EAAG,GAAG,EAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAG,EAAE,GAAG,GAAG,IAAI,GAAG,EAAE,GAAG,GAAI,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACH,GAAG,GAAG,GAAI,GAAG,GAAG,EAAG,EAAG,EAAE,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,EAAG,GAAG,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAG,EAAE,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACH,GAAG,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GACjE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAE,GAAG,GAAG,GAAG,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAI,EAAG,EAAE,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAG,EAClE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACH,GAAG,GAAI,EAAG,EAAE,GAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACH,GAAG,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GACjE,EAAE,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,G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,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAG,GAAG,IAAI,GAAG,EAAG,EAAG,EAAE,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAG,GAAI,EAAG,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAA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AG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAG,EAAE,GAAG,GAAG,IAAI,GAAG,EAAG,EAAE,GAAG,GAAG,IAAI,GAAG,EAAG,EAAG,EAAE,GAAI,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAG,EAAE,GAAG,GAAG,IAAI,GAAG,EAAG,EAAE,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACH,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAG,EAAG,EAAG,EAAG,EAClE,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,GAAG,GAAG,EAAE,GAAI,EAAE,GAAI,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAI,GAAG,GAAG,EAAG,EAAE,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAG,EACH,EAAE,GAAI,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACH,GAAG,GAAG,GAAI,EAAE,GAAI,EAAE,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAE,GAAG,GAAI,EAAG,GAAG,GAAG,EAAG,EAAE,GAAG,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAG,EAAG,EAAE,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAG,EAAE,GAAG,GAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAI,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG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AG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAG,EAAE,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAG,IAAI,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAE,GAAG,GAAI,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAE,GAAG,GAAI,EAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAI,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAG,GAAI,GAAG,GAAG,EAAE,GAAG,GAAI,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAE,GAAI,EAAG,GAAG,GAAG,EAAE,GAAG,GAAI,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACH,GAAG,GAAI,EAAG,GAAG,GAAG,EAAG,EAAE,GAAG,GAAG,IAAI,GAAG,EAAG,EAAG,EAAE,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,GAAG,GAAG,GAAG,EAAG,EAAE,GAAI,GAAG,GAAG,GAAG,EAAG,EAAE,GAAG,GAAG,IAAI,GAAG,EAAG,GAAG,EAAE,IAAI,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,IAAI,GAAG,GAAG,EAAG,EAAE,GAAG,GAAG,IAAI,GAAG,EAAG,GAAG,EAAE,IAAI,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAE,GAAG,GAAG,IAAI,GAAG,EAAG,EAAE,GAAI,EAAE,GAAG,GAAG,IAAI,GAAG,EAAG,EAAE,GAAI,EAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,GAAG,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACH,GAAG,GAAG,GAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAG,EAAG,EAAG,EAAG,EAClE,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAG,EAAE,GAAI,EAAE,GAAI,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,EAAE,GAAI,EAAE,GACjE,EAAE,GAAI,EAAE,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACH,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GACjE,EAAE,GAAI,EAAE,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACH,GAAG,GAAG,GAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAG,EAAG,EAAG,EAAG,EAClE,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GA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GAAG,GAAG,EAAE,GAAG,GAAI,EAAG,GAAG,GAAG,EAAG,EAAG,EAAE,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAG,EACH,EAAE,GAAI,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAG,EAAE,GAAI,EAAE,GAAI,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,GAAG,GAAG,EAAE,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAG,EAAE,GAAI,EAAE,GAAI,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GACjE,EAAE,GAAI,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG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G,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAG,GAAG,EAAG,EAAE,GAAI,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAI,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAE,GAAG,GAAI,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACpD,GAAG,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAE,GAAG,GAAI,EAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAI,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAG,GAAI,GAAG,GAAG,EAAE,GAAG,GAAI,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EACnD,EAAE,GACF,EAAE,GAAI,EAAG,GAAG,GAAG,EAAE,GAAG,GAAI,EAAG,EAAG,GAAG,EAAG,GAAG,EAAG,GAAG,EAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAClE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,G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"}