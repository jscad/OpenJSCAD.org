const test = require('ava')

const geom3 = require('../geometry/geom3')

const { sphere } = require('./index')

const comparePolygonsAsPoints = require('../../test/helpers/comparePolygonsAsPoints')

test('sphere (defaults)', t => {
  const obs = sphere()
  const pts = geom3.toPoints(obs)

  t.is(pts.length, 512)
})

test('sphere (options)', t => {
  // test radius
  let obs = sphere({ radius: 5, segments: 12 })
  let pts = geom3.toPoints(obs)
  // let exp = []
  t.is(pts.length, 72)
  // t.true(comparePolygonsAsPoints(pts, exp))

  // test segments
  obs = sphere({ segments: 8 })
  pts = geom3.toPoints(obs)
  exp = [
    [[ 1, 0, 0 ],
     [ 0.7071067690849304, -0.7071067690849304, 0 ],
     [ 0.5, -0.5, -0.7071067690849304 ],
     [ 0.7071067690849304, 0, -0.7071067690849304 ] ],
    [[ 0.7071067690849304, 0, 0.7071067690849304 ],
     [ 0.5, -0.5, 0.7071067690849304 ],
     [ 0.7071067690849304, -0.7071067690849304, 0 ],
     [ 1, 0, 0 ] ],
    [[ 0.7071067690849304, 0, -0.7071067690849304 ],
     [ 0.5, -0.5, -0.7071067690849304 ],
     [ 6.123234262925839e-17, 0, -1 ] ],
    [[ 6.123234262925839e-17, 0, 1 ],
     [ 0.5, -0.5, 0.7071067690849304 ],
     [ 0.7071067690849304, 0, 0.7071067690849304 ] ],
    [[ 0.7071067690849304, -0.7071067690849304, 0 ],
     [ 6.123234262925839e-17, -1, 0 ],
     [ 4.329780632585522e-17, -0.7071067690849304, -0.7071067690849304 ],
     [ 0.5, -0.5, -0.7071067690849304 ] ],
    [[ 0.5, -0.5, 0.7071067690849304 ],
     [ 4.329780632585522e-17, -0.7071067690849304, 0.7071067690849304 ],
     [ 6.123234262925839e-17, -1, 0 ],
     [ 0.7071067690849304, -0.7071067690849304, 0 ] ],
    [[ 0.5, -0.5, -0.7071067690849304 ],
     [ 4.329780632585522e-17, -0.7071067690849304, -0.7071067690849304 ],
     [ 4.329780301713277e-17, -4.329780301713277e-17, -1 ] ],
    [[ 4.329780301713277e-17, -4.329780301713277e-17, 1 ],
     [ 4.329780632585522e-17, -0.7071067690849304, 0.7071067690849304 ],
     [ 0.5, -0.5, 0.7071067690849304 ] ],
    [[ 6.123234262925839e-17, -1, 0 ],
     [ -0.7071067690849304, -0.7071067690849304, 0 ],
     [ -0.5, -0.5, -0.7071067690849304 ],
     [ 4.329780632585522e-17, -0.7071067690849304, -0.7071067690849304 ] ],
    [[ 4.329780632585522e-17, -0.7071067690849304, 0.7071067690849304 ],
     [ -0.5, -0.5, 0.7071067690849304 ],
     [ -0.7071067690849304, -0.7071067690849304, 0 ],
     [ 6.123234262925839e-17, -1, 0 ] ],
    [[ 4.329780632585522e-17, -0.7071067690849304, -0.7071067690849304 ],
     [ -0.5, -0.5, -0.7071067690849304 ],
     [ 3.74939976039497e-33, -6.123234262925839e-17, -1 ] ],
    [[ 3.74939976039497e-33, -6.123234262925839e-17, 1 ],
     [ -0.5, -0.5, 0.7071067690849304 ],
     [ 4.329780632585522e-17, -0.7071067690849304, 0.7071067690849304 ] ],
    [[ -0.7071067690849304, -0.7071067690849304, 0 ],
     [ -1, -1.2246468525851679e-16, 0 ],
     [ -0.7071067690849304, -8.659561265171044e-17, -0.7071067690849304 ],
     [ -0.5, -0.5, -0.7071067690849304 ] ],
    [[ -0.5, -0.5, 0.7071067690849304 ],
     [ -0.7071067690849304, -8.659561265171044e-17, 0.7071067690849304 ],
     [ -1, -1.2246468525851679e-16, 0 ],
     [ -0.7071067690849304, -0.7071067690849304, 0 ] ],
    [[ -0.5, -0.5, -0.7071067690849304 ],
     [ -0.7071067690849304, -8.659561265171044e-17, -0.7071067690849304 ],
     [ -4.329780301713277e-17, -4.329780301713277e-17, -1 ] ],
    [[ -4.329780301713277e-17, -4.329780301713277e-17, 1 ],
     [ -0.7071067690849304, -8.659561265171044e-17, 0.7071067690849304 ],
     [ -0.5, -0.5, 0.7071067690849304 ] ],
    [[ -1, -1.2246468525851679e-16, 0 ],
     [ -0.7071067690849304, 0.7071067690849304, 0 ],
     [ -0.5, 0.5, -0.7071067690849304 ],
     [ -0.7071067690849304, -8.659561265171044e-17, -0.7071067690849304 ] ],
    [[ -0.7071067690849304, -8.659561265171044e-17, 0.7071067690849304 ],
     [ -0.5, 0.5, 0.7071067690849304 ],
     [ -0.7071067690849304, 0.7071067690849304, 0 ],
     [ -1, -1.2246468525851679e-16, 0 ] ],
    [[ -0.7071067690849304, -8.659561265171044e-17, -0.7071067690849304 ],
     [ -0.5, 0.5, -0.7071067690849304 ],
     [ -6.123234262925839e-17, -7.49879952078994e-33, -1 ] ],
    [[ -6.123234262925839e-17, -7.49879952078994e-33, 1 ],
     [ -0.5, 0.5, 0.7071067690849304 ],
     [ -0.7071067690849304, -8.659561265171044e-17, 0.7071067690849304 ] ],
    [[ -0.7071067690849304, 0.7071067690849304, 0 ],
     [ -1.8369701465288538e-16, 1, 0 ],
     [ -1.2989340243395341e-16, 0.7071067690849304, -0.7071067690849304 ],
     [ -0.5, 0.5, -0.7071067690849304 ] ],
    [[ -0.5, 0.5, 0.7071067690849304 ],
     [ -1.2989340243395341e-16, 0.7071067690849304, 0.7071067690849304 ],
     [ -1.8369701465288538e-16, 1, 0 ],
     [ -0.7071067690849304, 0.7071067690849304, 0 ] ],
    [[ -0.5, 0.5, -0.7071067690849304 ],
     [ -1.2989340243395341e-16, 0.7071067690849304, -0.7071067690849304 ],
     [ -4.329780301713277e-17, 4.329780301713277e-17, -1 ] ],
    [[ -4.329780301713277e-17, 4.329780301713277e-17, 1 ],
     [ -1.2989340243395341e-16, 0.7071067690849304, 0.7071067690849304 ],
     [ -0.5, 0.5, 0.7071067690849304 ] ],
    [[ -1.8369701465288538e-16, 1, 0 ],
     [ 0.7071067690849304, 0.7071067690849304, 0 ],
     [ 0.5, 0.5, -0.7071067690849304 ],
     [ -1.2989340243395341e-16, 0.7071067690849304, -0.7071067690849304 ] ],
    [[ -1.2989340243395341e-16, 0.7071067690849304, 0.7071067690849304 ],
     [ 0.5, 0.5, 0.7071067690849304 ],
     [ 0.7071067690849304, 0.7071067690849304, 0 ],
     [ -1.8369701465288538e-16, 1, 0 ] ],
    [[ -1.2989340243395341e-16, 0.7071067690849304, -0.7071067690849304 ],
     [ 0.5, 0.5, -0.7071067690849304 ],
     [ -1.1248198179158957e-32, 6.123234262925839e-17, -1 ] ],
    [[ -1.1248198179158957e-32, 6.123234262925839e-17, 1 ],
     [ 0.5, 0.5, 0.7071067690849304 ],
     [ -1.2989340243395341e-16, 0.7071067690849304, 0.7071067690849304 ] ],
    [[ 0.7071067690849304, 0.7071067690849304, 0 ],
     [ 1, 2.4492937051703357e-16, 0 ],
     [ 0.7071067690849304, 1.7319122530342089e-16, -0.7071067690849304 ],
     [ 0.5, 0.5, -0.7071067690849304 ] ],
    [[ 0.5, 0.5, 0.7071067690849304 ],
     [ 0.7071067690849304, 1.7319122530342089e-16, 0.7071067690849304 ],
     [ 1, 2.4492937051703357e-16, 0 ],
     [ 0.7071067690849304, 0.7071067690849304, 0 ] ],
    [[ 0.5, 0.5, -0.7071067690849304 ],
     [ 0.7071067690849304, 1.7319122530342089e-16, -0.7071067690849304 ],
     [ 4.329780301713277e-17, 4.329780301713277e-17, -1 ] ],
    [[ 4.329780301713277e-17, 4.329780301713277e-17, 1 ],
     [ 0.7071067690849304, 1.7319122530342089e-16, 0.7071067690849304 ],
     [ 0.5, 0.5, 0.7071067690849304 ] ]
  ]
  t.is(pts.length, 32)
  t.true(comparePolygonsAsPoints(pts, exp))
})
