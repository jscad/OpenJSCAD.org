const test = require('ava')

const geom3 = require('../geometry/geom3')

const { cylinder } = require('./index')

const comparePolygonsAsPoints = require('../../test/helpers/comparePolygonsAsPoints')

test('cylinder (defaults)', t => {
  const obs = cylinder()
  const pts = geom3.toPoints(obs)

  t.is(pts.length, 96)
})

test('cylinder (options)', t => {
  const obs = cylinder({height: 10, radius: 4, segments: 5})
  const pts = geom3.toPoints(obs)
  const exp = [
    [[0, 0, -5], [1.2360680103302002, 3.8042261600494385, -5], [4, 0, -5]],
    [[1.2360680103302002, 3.8042261600494385, -5], [1.2360680103302002, 3.8042261600494385, 5],
     [4, 0, 5], [4, 0, -5]],
    [[0, 0, 5], [4, 0, 5], [1.2360680103302002, 3.8042261600494385, 5]],
    [[0, 0, -5], [-3.2360680103302, 2.3511409759521484, -5], [1.2360680103302002, 3.8042261600494385, -5]],
    [[-3.2360680103302, 2.3511409759521484, -5], [-3.2360680103302, 2.3511409759521484, 5],
     [1.2360680103302002, 3.8042261600494385, 5], [1.2360680103302002, 3.8042261600494385, -5]],
    [[0, 0, 5], [1.2360680103302002, 3.8042261600494385, 5], [-3.2360680103302, 2.3511409759521484, 5]],
    [[0, 0, -5], [-3.2360680103302, -2.3511409759521484, -5], [-3.2360680103302, 2.3511409759521484, -5]],
    [[-3.2360680103302, -2.3511409759521484, -5], [-3.2360680103302, -2.3511409759521484, 5],
     [-3.2360680103302, 2.3511409759521484, 5], [-3.2360680103302, 2.3511409759521484, -5]],
    [[0, 0, 5], [-3.2360680103302, 2.3511409759521484, 5], [-3.2360680103302, -2.3511409759521484, 5]],
    [[0, 0, -5], [1.2360680103302002, -3.8042261600494385, -5], [-3.2360680103302, -2.3511409759521484, -5]],
    [[1.2360680103302002, -3.8042261600494385, -5], [1.2360680103302002, -3.8042261600494385, 5],
     [-3.2360680103302, -2.3511409759521484, 5], [-3.2360680103302, -2.3511409759521484, -5]],
    [[0, 0, 5], [-3.2360680103302, -2.3511409759521484, 5], [1.2360680103302002, -3.8042261600494385, 5]],
    [[0, 0, -5], [4, -9.797174820681343e-16, -5], [1.2360680103302002, -3.8042261600494385, -5]],
    [[4, -9.797174820681343e-16, -5], [4, -9.797174820681343e-16, 5],
     [1.2360680103302002, -3.8042261600494385, 5], [1.2360680103302002, -3.8042261600494385, -5]],
    [[0, 0, 5], [1.2360680103302002, -3.8042261600494385, 5], [4, -9.797174820681343e-16, 5]]
  ]

  t.is(pts.length, 15)
  t.true(comparePolygonsAsPoints(pts, exp))
})
