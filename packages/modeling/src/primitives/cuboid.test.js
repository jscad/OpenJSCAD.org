const test = require('ava')

const geom3 = require('../geometry/geom3')

const {cuboid} = require('./index')

const comparePolygonsAsPoints = require('../../test/helpers/comparePolygonsAsPoints')

test('cuboid (defaults)', t => {
  const obs = cuboid()
  const pts = geom3.toPoints(obs)
  const exp = [
    [[-1.0000000, -1.0000000, -1.0000000],
     [-1.0000000, -1.0000000, 1.0000000],
     [-1.0000000, 1.0000000, 1.0000000],
     [-1.0000000, 1.0000000, -1.0000000] ],
    [[1.0000000, -1.0000000, -1.0000000],
     [1.0000000, 1.0000000, -1.0000000],
     [1.0000000, 1.0000000, 1.0000000],
     [1.0000000, -1.0000000, 1.0000000] ],
    [[-1.0000000, -1.0000000, -1.0000000],
     [1.0000000, -1.0000000, -1.0000000],
     [1.0000000, -1.0000000, 1.0000000],
     [-1.0000000, -1.0000000, 1.0000000] ],
    [[-1.0000000, 1.0000000, -1.0000000],
     [-1.0000000, 1.0000000, 1.0000000],
     [1.0000000, 1.0000000, 1.0000000],
     [1.0000000, 1.0000000, -1.0000000] ],
    [[-1.0000000, -1.0000000, -1.0000000],
     [-1.0000000, 1.0000000, -1.0000000],
     [1.0000000, 1.0000000, -1.0000000],
     [1.0000000, -1.0000000, -1.0000000] ],
    [[-1.0000000, -1.0000000, 1.0000000],
     [1.0000000, -1.0000000, 1.0000000],
     [1.0000000, 1.0000000, 1.0000000],
     [-1.0000000, 1.0000000, 1.0000000] ]
  ]
  t.is(pts.length, 6)
  t.true(comparePolygonsAsPoints(pts, exp))
})

test('cuboid (options)', t => {
  // test size
  let obs = cuboid({size: [4.5, 1.5, 7]})
  let pts = geom3.toPoints(obs)
  let exp = [
    [ [ -2.25, -0.75, -3.5 ], [ -2.25, -0.75, 3.5 ], [ -2.25, 0.75, 3.5 ], [ -2.25, 0.75, -3.5 ] ],
    [ [ 2.25, -0.75, -3.5 ], [ 2.25, 0.75, -3.5 ], [ 2.25, 0.75, 3.5 ], [ 2.25, -0.75, 3.5 ] ],
    [ [ -2.25, -0.75, -3.5 ], [ 2.25, -0.75, -3.5 ], [ 2.25, -0.75, 3.5 ], [ -2.25, -0.75, 3.5 ] ],
    [ [ -2.25, 0.75, -3.5 ], [ -2.25, 0.75, 3.5 ], [ 2.25, 0.75, 3.5 ], [ 2.25, 0.75, -3.5 ] ],
    [ [ -2.25, -0.75, -3.5 ], [ -2.25, 0.75, -3.5 ], [ 2.25, 0.75, -3.5 ], [ 2.25, -0.75, -3.5 ] ],
    [ [ -2.25, -0.75, 3.5 ], [ 2.25, -0.75, 3.5 ], [ 2.25, 0.75, 3.5 ], [ -2.25, 0.75, 3.5 ] ]
  ]

  t.is(pts.length, 6)
  t.true(comparePolygonsAsPoints(pts, exp))
})
